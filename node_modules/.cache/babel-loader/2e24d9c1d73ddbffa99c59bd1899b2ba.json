{"remainingRequest":"C:\\xampp\\htdocs\\vue_scg\\vue_scg_demo\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\vue_scg\\vue_scg_demo\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\xampp\\htdocs\\vue_scg\\vue_scg_demo\\public\\js\\bootstrap.js","dependencies":[{"path":"C:\\xampp\\htdocs\\vue_scg\\vue_scg_demo\\public\\js\\bootstrap.js","mtime":1587318632254},{"path":"C:\\xampp\\htdocs\\vue_scg\\vue_scg_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue_scg\\vue_scg_demo\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\vue_scg\\vue_scg_demo\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIik7Cgp2YXIgX3R5cGVvZiA9IHJlcXVpcmUoIkM6XFx4YW1wcFxcaHRkb2NzXFx2dWVfc2NnXFx2dWVfc2NnX2RlbW9cXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvdHlwZW9mIik7CgovKiEKICAqIEJvb3RzdHJhcCB2NC40LjEgKGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS8pCiAgKiBDb3B5cmlnaHQgMjAxMS0yMDE5IFRoZSBCb290c3RyYXAgQXV0aG9ycyAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2dyYXBocy9jb250cmlidXRvcnMpCiAgKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKQogICovCihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7CiAgKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzLCByZXF1aXJlKCdqcXVlcnknKSwgcmVxdWlyZSgncG9wcGVyLmpzJykpIDogdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsnZXhwb3J0cycsICdqcXVlcnknLCAncG9wcGVyLmpzJ10sIGZhY3RvcnkpIDogKGdsb2JhbCA9IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5ib290c3RyYXAgPSB7fSwgZ2xvYmFsLmpRdWVyeSwgZ2xvYmFsLlBvcHBlcikpOwp9KSh0aGlzLCBmdW5jdGlvbiAoZXhwb3J0cywgJCwgUG9wcGVyKSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAkID0gJCAmJiAkLmhhc093blByb3BlcnR5KCdkZWZhdWx0JykgPyAkWydkZWZhdWx0J10gOiAkOwogIFBvcHBlciA9IFBvcHBlciAmJiBQb3BwZXIuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKSA/IFBvcHBlclsnZGVmYXVsdCddIDogUG9wcGVyOwoKICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICByZXR1cm4gQ29uc3RydWN0b3I7CiAgfQoKICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7CiAgICBpZiAoa2V5IGluIG9iaikgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgICAgd3JpdGFibGU6IHRydWUKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmpba2V5XSA9IHZhbHVlOwogICAgfQoKICAgIHJldHVybiBvYmo7CiAgfQoKICBmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsKCiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgICAgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgewogICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgICB9KTsKICAgICAga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOwogICAgfQoKICAgIHJldHVybiBrZXlzOwogIH0KCiAgZnVuY3Rpb24gX29iamVjdFNwcmVhZDIodGFyZ2V0KSB7CiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICAgIGlmIChpICUgMikgewogICAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgICB9IGVsc2UgewogICAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGFyZ2V0OwogIH0KCiAgZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpOwogICAgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7CiAgICBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOwogIH0KICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIEJvb3RzdHJhcCAodjQuNC4xKTogdXRpbC5qcwogICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogUHJpdmF0ZSBUcmFuc2l0aW9uRW5kIEhlbHBlcnMKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCgogIHZhciBUUkFOU0lUSU9OX0VORCA9ICd0cmFuc2l0aW9uZW5kJzsKICB2YXIgTUFYX1VJRCA9IDEwMDAwMDA7CiAgdmFyIE1JTExJU0VDT05EU19NVUxUSVBMSUVSID0gMTAwMDsgLy8gU2hvdXRvdXQgQW5ndXNDcm9sbCAoaHR0cHM6Ly9nb28uZ2wvcHh3UUdwKQoKICBmdW5jdGlvbiB0b1R5cGUob2JqKSB7CiAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbChvYmopLm1hdGNoKC9ccyhbYS16XSspL2kpWzFdLnRvTG93ZXJDYXNlKCk7CiAgfQoKICBmdW5jdGlvbiBnZXRTcGVjaWFsVHJhbnNpdGlvbkVuZEV2ZW50KCkgewogICAgcmV0dXJuIHsKICAgICAgYmluZFR5cGU6IFRSQU5TSVRJT05fRU5ELAogICAgICBkZWxlZ2F0ZVR5cGU6IFRSQU5TSVRJT05fRU5ELAogICAgICBoYW5kbGU6IGZ1bmN0aW9uIGhhbmRsZShldmVudCkgewogICAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuaXModGhpcykpIHsKICAgICAgICAgIHJldHVybiBldmVudC5oYW5kbGVPYmouaGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1yZXN0LXBhcmFtcwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZmluZWQKICAgICAgfQogICAgfTsKICB9CgogIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmRFbXVsYXRvcihkdXJhdGlvbikgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgY2FsbGVkID0gZmFsc2U7CiAgICAkKHRoaXMpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbiAoKSB7CiAgICAgIGNhbGxlZCA9IHRydWU7CiAgICB9KTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICBpZiAoIWNhbGxlZCkgewogICAgICAgIFV0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQoX3RoaXMpOwogICAgICB9CiAgICB9LCBkdXJhdGlvbik7CiAgICByZXR1cm4gdGhpczsKICB9CgogIGZ1bmN0aW9uIHNldFRyYW5zaXRpb25FbmRTdXBwb3J0KCkgewogICAgJC5mbi5lbXVsYXRlVHJhbnNpdGlvbkVuZCA9IHRyYW5zaXRpb25FbmRFbXVsYXRvcjsKICAgICQuZXZlbnQuc3BlY2lhbFtVdGlsLlRSQU5TSVRJT05fRU5EXSA9IGdldFNwZWNpYWxUcmFuc2l0aW9uRW5kRXZlbnQoKTsKICB9CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBQdWJsaWMgVXRpbCBBcGkKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKCiAgdmFyIFV0aWwgPSB7CiAgICBUUkFOU0lUSU9OX0VORDogJ2JzVHJhbnNpdGlvbkVuZCcsCiAgICBnZXRVSUQ6IGZ1bmN0aW9uIGdldFVJRChwcmVmaXgpIHsKICAgICAgZG8gewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlCiAgICAgICAgcHJlZml4ICs9IH5+KE1hdGgucmFuZG9tKCkgKiBNQVhfVUlEKTsgLy8gIn5+IiBhY3RzIGxpa2UgYSBmYXN0ZXIgTWF0aC5mbG9vcigpIGhlcmUKICAgICAgfSB3aGlsZSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJlZml4KSk7CgogICAgICByZXR1cm4gcHJlZml4OwogICAgfSwKICAgIGdldFNlbGVjdG9yRnJvbUVsZW1lbnQ6IGZ1bmN0aW9uIGdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbWVudCkgewogICAgICB2YXIgc2VsZWN0b3IgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnKTsKCiAgICAgIGlmICghc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09ICcjJykgewogICAgICAgIHZhciBocmVmQXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdocmVmJyk7CiAgICAgICAgc2VsZWN0b3IgPSBocmVmQXR0ciAmJiBocmVmQXR0ciAhPT0gJyMnID8gaHJlZkF0dHIudHJpbSgpIDogJyc7CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpID8gc2VsZWN0b3IgOiBudWxsOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50OiBmdW5jdGlvbiBnZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudChlbGVtZW50KSB7CiAgICAgIGlmICghZWxlbWVudCkgewogICAgICAgIHJldHVybiAwOwogICAgICB9IC8vIEdldCB0cmFuc2l0aW9uLWR1cmF0aW9uIG9mIHRoZSBlbGVtZW50CgoKICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9ICQoZWxlbWVudCkuY3NzKCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7CiAgICAgIHZhciB0cmFuc2l0aW9uRGVsYXkgPSAkKGVsZW1lbnQpLmNzcygndHJhbnNpdGlvbi1kZWxheScpOwogICAgICB2YXIgZmxvYXRUcmFuc2l0aW9uRHVyYXRpb24gPSBwYXJzZUZsb2F0KHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICAgIHZhciBmbG9hdFRyYW5zaXRpb25EZWxheSA9IHBhcnNlRmxvYXQodHJhbnNpdGlvbkRlbGF5KTsgLy8gUmV0dXJuIDAgaWYgZWxlbWVudCBvciB0cmFuc2l0aW9uIGR1cmF0aW9uIGlzIG5vdCBmb3VuZAoKICAgICAgaWYgKCFmbG9hdFRyYW5zaXRpb25EdXJhdGlvbiAmJiAhZmxvYXRUcmFuc2l0aW9uRGVsYXkpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSAvLyBJZiBtdWx0aXBsZSBkdXJhdGlvbnMgYXJlIGRlZmluZWQsIHRha2UgdGhlIGZpcnN0CgoKICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uID0gdHJhbnNpdGlvbkR1cmF0aW9uLnNwbGl0KCcsJylbMF07CiAgICAgIHRyYW5zaXRpb25EZWxheSA9IHRyYW5zaXRpb25EZWxheS5zcGxpdCgnLCcpWzBdOwogICAgICByZXR1cm4gKHBhcnNlRmxvYXQodHJhbnNpdGlvbkR1cmF0aW9uKSArIHBhcnNlRmxvYXQodHJhbnNpdGlvbkRlbGF5KSkgKiBNSUxMSVNFQ09ORFNfTVVMVElQTElFUjsKICAgIH0sCiAgICByZWZsb3c6IGZ1bmN0aW9uIHJlZmxvdyhlbGVtZW50KSB7CiAgICAgIHJldHVybiBlbGVtZW50Lm9mZnNldEhlaWdodDsKICAgIH0sCiAgICB0cmlnZ2VyVHJhbnNpdGlvbkVuZDogZnVuY3Rpb24gdHJpZ2dlclRyYW5zaXRpb25FbmQoZWxlbWVudCkgewogICAgICAkKGVsZW1lbnQpLnRyaWdnZXIoVFJBTlNJVElPTl9FTkQpOwogICAgfSwKICAgIC8vIFRPRE86IFJlbW92ZSBpbiB2NQogICAgc3VwcG9ydHNUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiBzdXBwb3J0c1RyYW5zaXRpb25FbmQoKSB7CiAgICAgIHJldHVybiBCb29sZWFuKFRSQU5TSVRJT05fRU5EKTsKICAgIH0sCiAgICBpc0VsZW1lbnQ6IGZ1bmN0aW9uIGlzRWxlbWVudChvYmopIHsKICAgICAgcmV0dXJuIChvYmpbMF0gfHwgb2JqKS5ub2RlVHlwZTsKICAgIH0sCiAgICB0eXBlQ2hlY2tDb25maWc6IGZ1bmN0aW9uIHR5cGVDaGVja0NvbmZpZyhjb21wb25lbnROYW1lLCBjb25maWcsIGNvbmZpZ1R5cGVzKSB7CiAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIGNvbmZpZ1R5cGVzKSB7CiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjb25maWdUeXBlcywgcHJvcGVydHkpKSB7CiAgICAgICAgICB2YXIgZXhwZWN0ZWRUeXBlcyA9IGNvbmZpZ1R5cGVzW3Byb3BlcnR5XTsKICAgICAgICAgIHZhciB2YWx1ZSA9IGNvbmZpZ1twcm9wZXJ0eV07CiAgICAgICAgICB2YXIgdmFsdWVUeXBlID0gdmFsdWUgJiYgVXRpbC5pc0VsZW1lbnQodmFsdWUpID8gJ2VsZW1lbnQnIDogdG9UeXBlKHZhbHVlKTsKCiAgICAgICAgICBpZiAoIW5ldyBSZWdFeHAoZXhwZWN0ZWRUeXBlcykudGVzdCh2YWx1ZVR5cGUpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihjb21wb25lbnROYW1lLnRvVXBwZXJDYXNlKCkgKyAiOiAiICsgKCJPcHRpb24gXCIiICsgcHJvcGVydHkgKyAiXCIgcHJvdmlkZWQgdHlwZSBcIiIgKyB2YWx1ZVR5cGUgKyAiXCIgIikgKyAoImJ1dCBleHBlY3RlZCB0eXBlIFwiIiArIGV4cGVjdGVkVHlwZXMgKyAiXCIuIikpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGZpbmRTaGFkb3dSb290OiBmdW5jdGlvbiBmaW5kU2hhZG93Um9vdChlbGVtZW50KSB7CiAgICAgIGlmICghZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmF0dGFjaFNoYWRvdykgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9IC8vIENhbiBmaW5kIHRoZSBzaGFkb3cgcm9vdCBvdGhlcndpc2UgaXQnbGwgcmV0dXJuIHRoZSBkb2N1bWVudAoKCiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5nZXRSb290Tm9kZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHZhciByb290ID0gZWxlbWVudC5nZXRSb290Tm9kZSgpOwogICAgICAgIHJldHVybiByb290IGluc3RhbmNlb2YgU2hhZG93Um9vdCA/IHJvb3QgOiBudWxsOwogICAgICB9CgogICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpIHsKICAgICAgICByZXR1cm4gZWxlbWVudDsKICAgICAgfSAvLyB3aGVuIHdlIGRvbid0IGZpbmQgYSBzaGFkb3cgcm9vdAoKCiAgICAgIGlmICghZWxlbWVudC5wYXJlbnROb2RlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBVdGlsLmZpbmRTaGFkb3dSb290KGVsZW1lbnQucGFyZW50Tm9kZSk7CiAgICB9LAogICAgalF1ZXJ5RGV0ZWN0aW9uOiBmdW5jdGlvbiBqUXVlcnlEZXRlY3Rpb24oKSB7CiAgICAgIGlmICh0eXBlb2YgJCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb290c3RyYXBcJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnkuIGpRdWVyeSBtdXN0IGJlIGluY2x1ZGVkIGJlZm9yZSBCb290c3RyYXBcJ3MgSmF2YVNjcmlwdC4nKTsKICAgICAgfQoKICAgICAgdmFyIHZlcnNpb24gPSAkLmZuLmpxdWVyeS5zcGxpdCgnICcpWzBdLnNwbGl0KCcuJyk7CiAgICAgIHZhciBtaW5NYWpvciA9IDE7CiAgICAgIHZhciBsdE1ham9yID0gMjsKICAgICAgdmFyIG1pbk1pbm9yID0gOTsKICAgICAgdmFyIG1pblBhdGNoID0gMTsKICAgICAgdmFyIG1heE1ham9yID0gNDsKCiAgICAgIGlmICh2ZXJzaW9uWzBdIDwgbHRNYWpvciAmJiB2ZXJzaW9uWzFdIDwgbWluTWlub3IgfHwgdmVyc2lvblswXSA9PT0gbWluTWFqb3IgJiYgdmVyc2lvblsxXSA9PT0gbWluTWlub3IgJiYgdmVyc2lvblsyXSA8IG1pblBhdGNoIHx8IHZlcnNpb25bMF0gPj0gbWF4TWFqb3IpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Jvb3RzdHJhcFwncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGF0IGxlYXN0IGpRdWVyeSB2MS45LjEgYnV0IGxlc3MgdGhhbiB2NC4wLjAnKTsKICAgICAgfQogICAgfQogIH07CiAgVXRpbC5qUXVlcnlEZXRlY3Rpb24oKTsKICBzZXRUcmFuc2l0aW9uRW5kU3VwcG9ydCgpOwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENvbnN0YW50cwogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKICB2YXIgTkFNRSA9ICdhbGVydCc7CiAgdmFyIFZFUlNJT04gPSAnNC40LjEnOwogIHZhciBEQVRBX0tFWSA9ICdicy5hbGVydCc7CiAgdmFyIEVWRU5UX0tFWSA9ICIuIiArIERBVEFfS0VZOwogIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJzsKICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTsKICB2YXIgU2VsZWN0b3IgPSB7CiAgICBESVNNSVNTOiAnW2RhdGEtZGlzbWlzcz0iYWxlcnQiXScKICB9OwogIHZhciBFdmVudCA9IHsKICAgIENMT1NFOiAiY2xvc2UiICsgRVZFTlRfS0VZLAogICAgQ0xPU0VEOiAiY2xvc2VkIiArIEVWRU5UX0tFWSwKICAgIENMSUNLX0RBVEFfQVBJOiAiY2xpY2siICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZCiAgfTsKICB2YXIgQ2xhc3NOYW1lID0gewogICAgQUxFUlQ6ICdhbGVydCcsCiAgICBGQURFOiAnZmFkZScsCiAgICBTSE9XOiAnc2hvdycKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENsYXNzIERlZmluaXRpb24KICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCiAgdmFyIEFsZXJ0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIEFsZXJ0KGVsZW1lbnQpIHsKICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7CiAgICB9IC8vIEdldHRlcnMKCgogICAgdmFyIF9wcm90byA9IEFsZXJ0LnByb3RvdHlwZTsgLy8gUHVibGljCgogICAgX3Byb3RvLmNsb3NlID0gZnVuY3Rpb24gY2xvc2UoZWxlbWVudCkgewogICAgICB2YXIgcm9vdEVsZW1lbnQgPSB0aGlzLl9lbGVtZW50OwoKICAgICAgaWYgKGVsZW1lbnQpIHsKICAgICAgICByb290RWxlbWVudCA9IHRoaXMuX2dldFJvb3RFbGVtZW50KGVsZW1lbnQpOwogICAgICB9CgogICAgICB2YXIgY3VzdG9tRXZlbnQgPSB0aGlzLl90cmlnZ2VyQ2xvc2VFdmVudChyb290RWxlbWVudCk7CgogICAgICBpZiAoY3VzdG9tRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuX3JlbW92ZUVsZW1lbnQocm9vdEVsZW1lbnQpOwogICAgfTsKCiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7CiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsOwogICAgfSAvLyBQcml2YXRlCiAgICA7CgogICAgX3Byb3RvLl9nZXRSb290RWxlbWVudCA9IGZ1bmN0aW9uIF9nZXRSb290RWxlbWVudChlbGVtZW50KSB7CiAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTsKICAgICAgdmFyIHBhcmVudCA9IGZhbHNlOwoKICAgICAgaWYgKHNlbGVjdG9yKSB7CiAgICAgICAgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICAgIH0KCiAgICAgIGlmICghcGFyZW50KSB7CiAgICAgICAgcGFyZW50ID0gJChlbGVtZW50KS5jbG9zZXN0KCIuIiArIENsYXNzTmFtZS5BTEVSVClbMF07CiAgICAgIH0KCiAgICAgIHJldHVybiBwYXJlbnQ7CiAgICB9OwoKICAgIF9wcm90by5fdHJpZ2dlckNsb3NlRXZlbnQgPSBmdW5jdGlvbiBfdHJpZ2dlckNsb3NlRXZlbnQoZWxlbWVudCkgewogICAgICB2YXIgY2xvc2VFdmVudCA9ICQuRXZlbnQoRXZlbnQuQ0xPU0UpOwogICAgICAkKGVsZW1lbnQpLnRyaWdnZXIoY2xvc2VFdmVudCk7CiAgICAgIHJldHVybiBjbG9zZUV2ZW50OwogICAgfTsKCiAgICBfcHJvdG8uX3JlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiBfcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAkKGVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKTsKCiAgICAgIGlmICghJChlbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuRkFERSkpIHsKICAgICAgICB0aGlzLl9kZXN0cm95RWxlbWVudChlbGVtZW50KTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudChlbGVtZW50KTsKICAgICAgJChlbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF90aGlzLl9kZXN0cm95RWxlbWVudChlbGVtZW50LCBldmVudCk7CiAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICB9OwoKICAgIF9wcm90by5fZGVzdHJveUVsZW1lbnQgPSBmdW5jdGlvbiBfZGVzdHJveUVsZW1lbnQoZWxlbWVudCkgewogICAgICAkKGVsZW1lbnQpLmRldGFjaCgpLnRyaWdnZXIoRXZlbnQuQ0xPU0VEKS5yZW1vdmUoKTsKICAgIH0gLy8gU3RhdGljCiAgICA7CgogICAgQWxlcnQuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7CiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgIHZhciAkZWxlbWVudCA9ICQodGhpcyk7CiAgICAgICAgdmFyIGRhdGEgPSAkZWxlbWVudC5kYXRhKERBVEFfS0VZKTsKCiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICBkYXRhID0gbmV3IEFsZXJ0KHRoaXMpOwogICAgICAgICAgJGVsZW1lbnQuZGF0YShEQVRBX0tFWSwgZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY29uZmlnID09PSAnY2xvc2UnKSB7CiAgICAgICAgICBkYXRhW2NvbmZpZ10odGhpcyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgQWxlcnQuX2hhbmRsZURpc21pc3MgPSBmdW5jdGlvbiBfaGFuZGxlRGlzbWlzcyhhbGVydEluc3RhbmNlKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZXZlbnQpIHsKICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgfQoKICAgICAgICBhbGVydEluc3RhbmNlLmNsb3NlKHRoaXMpOwogICAgICB9OwogICAgfTsKCiAgICBfY3JlYXRlQ2xhc3MoQWxlcnQsIG51bGwsIFt7CiAgICAgIGtleTogIlZFUlNJT04iLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gVkVSU0lPTjsKICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBBbGVydDsKICB9KCk7CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb24KICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCgogICQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5ESVNNSVNTLCBBbGVydC5faGFuZGxlRGlzbWlzcyhuZXcgQWxlcnQoKSkpOwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIGpRdWVyeQogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKICAkLmZuW05BTUVdID0gQWxlcnQuX2pRdWVyeUludGVyZmFjZTsKICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gQWxlcnQ7CgogICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7CiAgICByZXR1cm4gQWxlcnQuX2pRdWVyeUludGVyZmFjZTsKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENvbnN0YW50cwogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKCiAgdmFyIE5BTUUkMSA9ICdidXR0b24nOwogIHZhciBWRVJTSU9OJDEgPSAnNC40LjEnOwogIHZhciBEQVRBX0tFWSQxID0gJ2JzLmJ1dHRvbic7CiAgdmFyIEVWRU5UX0tFWSQxID0gIi4iICsgREFUQV9LRVkkMTsKICB2YXIgREFUQV9BUElfS0VZJDEgPSAnLmRhdGEtYXBpJzsKICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUJDEgPSAkLmZuW05BTUUkMV07CiAgdmFyIENsYXNzTmFtZSQxID0gewogICAgQUNUSVZFOiAnYWN0aXZlJywKICAgIEJVVFRPTjogJ2J0bicsCiAgICBGT0NVUzogJ2ZvY3VzJwogIH07CiAgdmFyIFNlbGVjdG9yJDEgPSB7CiAgICBEQVRBX1RPR0dMRV9DQVJST1Q6ICdbZGF0YS10b2dnbGVePSJidXR0b24iXScsCiAgICBEQVRBX1RPR0dMRVM6ICdbZGF0YS10b2dnbGU9ImJ1dHRvbnMiXScsCiAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT0iYnV0dG9uIl0nLAogICAgREFUQV9UT0dHTEVTX0JVVFRPTlM6ICdbZGF0YS10b2dnbGU9ImJ1dHRvbnMiXSAuYnRuJywKICAgIElOUFVUOiAnaW5wdXQ6bm90KFt0eXBlPSJoaWRkZW4iXSknLAogICAgQUNUSVZFOiAnLmFjdGl2ZScsCiAgICBCVVRUT046ICcuYnRuJwogIH07CiAgdmFyIEV2ZW50JDEgPSB7CiAgICBDTElDS19EQVRBX0FQSTogImNsaWNrIiArIEVWRU5UX0tFWSQxICsgREFUQV9BUElfS0VZJDEsCiAgICBGT0NVU19CTFVSX0RBVEFfQVBJOiAiZm9jdXMiICsgRVZFTlRfS0VZJDEgKyBEQVRBX0FQSV9LRVkkMSArICIgIiArICgiYmx1ciIgKyBFVkVOVF9LRVkkMSArIERBVEFfQVBJX0tFWSQxKSwKICAgIExPQURfREFUQV9BUEk6ICJsb2FkIiArIEVWRU5UX0tFWSQxICsgREFUQV9BUElfS0VZJDEKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENsYXNzIERlZmluaXRpb24KICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCiAgdmFyIEJ1dHRvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBCdXR0b24oZWxlbWVudCkgewogICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDsKICAgIH0gLy8gR2V0dGVycwoKCiAgICB2YXIgX3Byb3RvID0gQnV0dG9uLnByb3RvdHlwZTsgLy8gUHVibGljCgogICAgX3Byb3RvLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHsKICAgICAgdmFyIHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7CiAgICAgIHZhciBhZGRBcmlhUHJlc3NlZCA9IHRydWU7CiAgICAgIHZhciByb290RWxlbWVudCA9ICQodGhpcy5fZWxlbWVudCkuY2xvc2VzdChTZWxlY3RvciQxLkRBVEFfVE9HR0xFUylbMF07CgogICAgICBpZiAocm9vdEVsZW1lbnQpIHsKICAgICAgICB2YXIgaW5wdXQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IkMS5JTlBVVCk7CgogICAgICAgIGlmIChpbnB1dCkgewogICAgICAgICAgaWYgKGlucHV0LnR5cGUgPT09ICdyYWRpbycpIHsKICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQgJiYgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lJDEuQUNUSVZFKSkgewogICAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2VFdmVudCA9IGZhbHNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gcm9vdEVsZW1lbnQucXVlcnlTZWxlY3RvcihTZWxlY3RvciQxLkFDVElWRSk7CgogICAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZSQxLkFDVElWRSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnR5cGUgPT09ICdjaGVja2JveCcpIHsKICAgICAgICAgICAgaWYgKHRoaXMuX2VsZW1lbnQudGFnTmFtZSA9PT0gJ0xBQkVMJyAmJiBpbnB1dC5jaGVja2VkID09PSB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUkMS5BQ1RJVkUpKSB7CiAgICAgICAgICAgICAgdHJpZ2dlckNoYW5nZUV2ZW50ID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IGEgcmFkaW8gYnV0dG9uIG9yIGNoZWNrYm94IGRvbid0IGFkZCBhIHBvaW50bGVzcy9pbnZhbGlkIGNoZWNrZWQgcHJvcGVydHkgdG8gdGhlIGlucHV0CiAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2VFdmVudCA9IGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHsKICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9ICF0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUkMS5BQ1RJVkUpOwogICAgICAgICAgICAkKGlucHV0KS50cmlnZ2VyKCdjaGFuZ2UnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpbnB1dC5mb2N1cygpOwogICAgICAgICAgYWRkQXJpYVByZXNzZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghKHRoaXMuX2VsZW1lbnQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpIHx8IHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSkgewogICAgICAgIGlmIChhZGRBcmlhUHJlc3NlZCkgewogICAgICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcHJlc3NlZCcsICF0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUkMS5BQ1RJVkUpKTsKICAgICAgICB9CgogICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHsKICAgICAgICAgICQodGhpcy5fZWxlbWVudCkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lJDEuQUNUSVZFKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICAkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkkMSk7CiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsOwogICAgfSAvLyBTdGF0aWMKICAgIDsKCiAgICBCdXR0b24uX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7CiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZJDEpOwoKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIGRhdGEgPSBuZXcgQnV0dG9uKHRoaXMpOwogICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZJDEsIGRhdGEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbmZpZyA9PT0gJ3RvZ2dsZScpIHsKICAgICAgICAgIGRhdGFbY29uZmlnXSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIF9jcmVhdGVDbGFzcyhCdXR0b24sIG51bGwsIFt7CiAgICAgIGtleTogIlZFUlNJT04iLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gVkVSU0lPTiQxOwogICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIEJ1dHRvbjsKICB9KCk7CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb24KICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCgogICQoZG9jdW1lbnQpLm9uKEV2ZW50JDEuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yJDEuREFUQV9UT0dHTEVfQ0FSUk9ULCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHZhciBidXR0b24gPSBldmVudC50YXJnZXQ7CgogICAgaWYgKCEkKGJ1dHRvbikuaGFzQ2xhc3MoQ2xhc3NOYW1lJDEuQlVUVE9OKSkgewogICAgICBidXR0b24gPSAkKGJ1dHRvbikuY2xvc2VzdChTZWxlY3RvciQxLkJVVFRPTilbMF07CiAgICB9CgogICAgaWYgKCFidXR0b24gfHwgYnV0dG9uLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSB8fCBidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIHdvcmsgYXJvdW5kIEZpcmVmb3ggYnVnICMxNTQwOTk1CiAgICB9IGVsc2UgewogICAgICB2YXIgaW5wdXRCdG4gPSBidXR0b24ucXVlcnlTZWxlY3RvcihTZWxlY3RvciQxLklOUFVUKTsKCiAgICAgIGlmIChpbnB1dEJ0biAmJiAoaW5wdXRCdG4uaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpIHx8IGlucHV0QnRuLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyB3b3JrIGFyb3VuZCBGaXJlZm94IGJ1ZyAjMTU0MDk5NQoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJChidXR0b24pLCAndG9nZ2xlJyk7CiAgICB9CiAgfSkub24oRXZlbnQkMS5GT0NVU19CTFVSX0RBVEFfQVBJLCBTZWxlY3RvciQxLkRBVEFfVE9HR0xFX0NBUlJPVCwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIgYnV0dG9uID0gJChldmVudC50YXJnZXQpLmNsb3Nlc3QoU2VsZWN0b3IkMS5CVVRUT04pWzBdOwogICAgJChidXR0b24pLnRvZ2dsZUNsYXNzKENsYXNzTmFtZSQxLkZPQ1VTLCAvXmZvY3VzKGluKT8kLy50ZXN0KGV2ZW50LnR5cGUpKTsKICB9KTsKICAkKHdpbmRvdykub24oRXZlbnQkMS5MT0FEX0RBVEFfQVBJLCBmdW5jdGlvbiAoKSB7CiAgICAvLyBlbnN1cmUgY29ycmVjdCBhY3RpdmUgY2xhc3MgaXMgc2V0IHRvIG1hdGNoIHRoZSBjb250cm9scycgYWN0dWFsIHZhbHVlcy9zdGF0ZXMKICAgIC8vIGZpbmQgYWxsIGNoZWNrYm94ZXMvcmVhZGlvIGJ1dHRvbnMgaW5zaWRlIGRhdGEtdG9nZ2xlIGdyb3VwcwogICAgdmFyIGJ1dHRvbnMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IkMS5EQVRBX1RPR0dMRVNfQlVUVE9OUykpOwoKICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBidXR0b25zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHZhciBidXR0b24gPSBidXR0b25zW2ldOwogICAgICB2YXIgaW5wdXQgPSBidXR0b24ucXVlcnlTZWxlY3RvcihTZWxlY3RvciQxLklOUFVUKTsKCiAgICAgIGlmIChpbnB1dC5jaGVja2VkIHx8IGlucHV0Lmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7CiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lJDEuQUNUSVZFKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShDbGFzc05hbWUkMS5BQ1RJVkUpOwogICAgICB9CiAgICB9IC8vIGZpbmQgYWxsIGJ1dHRvbiB0b2dnbGVzCgoKICAgIGJ1dHRvbnMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IkMS5EQVRBX1RPR0dMRSkpOwoKICAgIGZvciAodmFyIF9pID0gMCwgX2xlbiA9IGJ1dHRvbnMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgdmFyIF9idXR0b24gPSBidXR0b25zW19pXTsKCiAgICAgIGlmIChfYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJykgPT09ICd0cnVlJykgewogICAgICAgIF9idXR0b24uY2xhc3NMaXN0LmFkZChDbGFzc05hbWUkMS5BQ1RJVkUpOwogICAgICB9IGVsc2UgewogICAgICAgIF9idXR0b24uY2xhc3NMaXN0LnJlbW92ZShDbGFzc05hbWUkMS5BQ1RJVkUpOwogICAgICB9CiAgICB9CiAgfSk7CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogalF1ZXJ5CiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgogICQuZm5bTkFNRSQxXSA9IEJ1dHRvbi5falF1ZXJ5SW50ZXJmYWNlOwogICQuZm5bTkFNRSQxXS5Db25zdHJ1Y3RvciA9IEJ1dHRvbjsKCiAgJC5mbltOQU1FJDFdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuW05BTUUkMV0gPSBKUVVFUllfTk9fQ09ORkxJQ1QkMTsKICAgIHJldHVybiBCdXR0b24uX2pRdWVyeUludGVyZmFjZTsKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENvbnN0YW50cwogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKCiAgdmFyIE5BTUUkMiA9ICdjYXJvdXNlbCc7CiAgdmFyIFZFUlNJT04kMiA9ICc0LjQuMSc7CiAgdmFyIERBVEFfS0VZJDIgPSAnYnMuY2Fyb3VzZWwnOwogIHZhciBFVkVOVF9LRVkkMiA9ICIuIiArIERBVEFfS0VZJDI7CiAgdmFyIERBVEFfQVBJX0tFWSQyID0gJy5kYXRhLWFwaSc7CiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCQyID0gJC5mbltOQU1FJDJdOwogIHZhciBBUlJPV19MRUZUX0tFWUNPREUgPSAzNzsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgbGVmdCBhcnJvdyBrZXkKCiAgdmFyIEFSUk9XX1JJR0hUX0tFWUNPREUgPSAzOTsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgcmlnaHQgYXJyb3cga2V5CgogIHZhciBUT1VDSEVWRU5UX0NPTVBBVF9XQUlUID0gNTAwOyAvLyBUaW1lIGZvciBtb3VzZSBjb21wYXQgZXZlbnRzIHRvIGZpcmUgYWZ0ZXIgdG91Y2gKCiAgdmFyIFNXSVBFX1RIUkVTSE9MRCA9IDQwOwogIHZhciBEZWZhdWx0ID0gewogICAgaW50ZXJ2YWw6IDUwMDAsCiAgICBrZXlib2FyZDogdHJ1ZSwKICAgIHNsaWRlOiBmYWxzZSwKICAgIHBhdXNlOiAnaG92ZXInLAogICAgd3JhcDogdHJ1ZSwKICAgIHRvdWNoOiB0cnVlCiAgfTsKICB2YXIgRGVmYXVsdFR5cGUgPSB7CiAgICBpbnRlcnZhbDogJyhudW1iZXJ8Ym9vbGVhbiknLAogICAga2V5Ym9hcmQ6ICdib29sZWFuJywKICAgIHNsaWRlOiAnKGJvb2xlYW58c3RyaW5nKScsCiAgICBwYXVzZTogJyhzdHJpbmd8Ym9vbGVhbiknLAogICAgd3JhcDogJ2Jvb2xlYW4nLAogICAgdG91Y2g6ICdib29sZWFuJwogIH07CiAgdmFyIERpcmVjdGlvbiA9IHsKICAgIE5FWFQ6ICduZXh0JywKICAgIFBSRVY6ICdwcmV2JywKICAgIExFRlQ6ICdsZWZ0JywKICAgIFJJR0hUOiAncmlnaHQnCiAgfTsKICB2YXIgRXZlbnQkMiA9IHsKICAgIFNMSURFOiAic2xpZGUiICsgRVZFTlRfS0VZJDIsCiAgICBTTElEOiAic2xpZCIgKyBFVkVOVF9LRVkkMiwKICAgIEtFWURPV046ICJrZXlkb3duIiArIEVWRU5UX0tFWSQyLAogICAgTU9VU0VFTlRFUjogIm1vdXNlZW50ZXIiICsgRVZFTlRfS0VZJDIsCiAgICBNT1VTRUxFQVZFOiAibW91c2VsZWF2ZSIgKyBFVkVOVF9LRVkkMiwKICAgIFRPVUNIU1RBUlQ6ICJ0b3VjaHN0YXJ0IiArIEVWRU5UX0tFWSQyLAogICAgVE9VQ0hNT1ZFOiAidG91Y2htb3ZlIiArIEVWRU5UX0tFWSQyLAogICAgVE9VQ0hFTkQ6ICJ0b3VjaGVuZCIgKyBFVkVOVF9LRVkkMiwKICAgIFBPSU5URVJET1dOOiAicG9pbnRlcmRvd24iICsgRVZFTlRfS0VZJDIsCiAgICBQT0lOVEVSVVA6ICJwb2ludGVydXAiICsgRVZFTlRfS0VZJDIsCiAgICBEUkFHX1NUQVJUOiAiZHJhZ3N0YXJ0IiArIEVWRU5UX0tFWSQyLAogICAgTE9BRF9EQVRBX0FQSTogImxvYWQiICsgRVZFTlRfS0VZJDIgKyBEQVRBX0FQSV9LRVkkMiwKICAgIENMSUNLX0RBVEFfQVBJOiAiY2xpY2siICsgRVZFTlRfS0VZJDIgKyBEQVRBX0FQSV9LRVkkMgogIH07CiAgdmFyIENsYXNzTmFtZSQyID0gewogICAgQ0FST1VTRUw6ICdjYXJvdXNlbCcsCiAgICBBQ1RJVkU6ICdhY3RpdmUnLAogICAgU0xJREU6ICdzbGlkZScsCiAgICBSSUdIVDogJ2Nhcm91c2VsLWl0ZW0tcmlnaHQnLAogICAgTEVGVDogJ2Nhcm91c2VsLWl0ZW0tbGVmdCcsCiAgICBORVhUOiAnY2Fyb3VzZWwtaXRlbS1uZXh0JywKICAgIFBSRVY6ICdjYXJvdXNlbC1pdGVtLXByZXYnLAogICAgSVRFTTogJ2Nhcm91c2VsLWl0ZW0nLAogICAgUE9JTlRFUl9FVkVOVDogJ3BvaW50ZXItZXZlbnQnCiAgfTsKICB2YXIgU2VsZWN0b3IkMiA9IHsKICAgIEFDVElWRTogJy5hY3RpdmUnLAogICAgQUNUSVZFX0lURU06ICcuYWN0aXZlLmNhcm91c2VsLWl0ZW0nLAogICAgSVRFTTogJy5jYXJvdXNlbC1pdGVtJywKICAgIElURU1fSU1HOiAnLmNhcm91c2VsLWl0ZW0gaW1nJywKICAgIE5FWFRfUFJFVjogJy5jYXJvdXNlbC1pdGVtLW5leHQsIC5jYXJvdXNlbC1pdGVtLXByZXYnLAogICAgSU5ESUNBVE9SUzogJy5jYXJvdXNlbC1pbmRpY2F0b3JzJywKICAgIERBVEFfU0xJREU6ICdbZGF0YS1zbGlkZV0sIFtkYXRhLXNsaWRlLXRvXScsCiAgICBEQVRBX1JJREU6ICdbZGF0YS1yaWRlPSJjYXJvdXNlbCJdJwogIH07CiAgdmFyIFBvaW50ZXJUeXBlID0gewogICAgVE9VQ0g6ICd0b3VjaCcsCiAgICBQRU46ICdwZW4nCiAgfTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBDbGFzcyBEZWZpbml0aW9uCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgogIHZhciBDYXJvdXNlbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBDYXJvdXNlbChlbGVtZW50LCBjb25maWcpIHsKICAgICAgdGhpcy5faXRlbXMgPSBudWxsOwogICAgICB0aGlzLl9pbnRlcnZhbCA9IG51bGw7CiAgICAgIHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSBudWxsOwogICAgICB0aGlzLl9pc1BhdXNlZCA9IGZhbHNlOwogICAgICB0aGlzLl9pc1NsaWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy50b3VjaFRpbWVvdXQgPSBudWxsOwogICAgICB0aGlzLnRvdWNoU3RhcnRYID0gMDsKICAgICAgdGhpcy50b3VjaERlbHRhWCA9IDA7CiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpOwogICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDsKICAgICAgdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IkMi5JTkRJQ0FUT1JTKTsKICAgICAgdGhpcy5fdG91Y2hTdXBwb3J0ZWQgPSAnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMDsKICAgICAgdGhpcy5fcG9pbnRlckV2ZW50ID0gQm9vbGVhbih3aW5kb3cuUG9pbnRlckV2ZW50IHx8IHdpbmRvdy5NU1BvaW50ZXJFdmVudCk7CgogICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpOwogICAgfSAvLyBHZXR0ZXJzCgoKICAgIHZhciBfcHJvdG8gPSBDYXJvdXNlbC5wcm90b3R5cGU7IC8vIFB1YmxpYwoKICAgIF9wcm90by5uZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgaWYgKCF0aGlzLl9pc1NsaWRpbmcpIHsKICAgICAgICB0aGlzLl9zbGlkZShEaXJlY3Rpb24uTkVYVCk7CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLm5leHRXaGVuVmlzaWJsZSA9IGZ1bmN0aW9uIG5leHRXaGVuVmlzaWJsZSgpIHsKICAgICAgLy8gRG9uJ3QgY2FsbCBuZXh0IHdoZW4gdGhlIHBhZ2UgaXNuJ3QgdmlzaWJsZQogICAgICAvLyBvciB0aGUgY2Fyb3VzZWwgb3IgaXRzIHBhcmVudCBpc24ndCB2aXNpYmxlCiAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuICYmICQodGhpcy5fZWxlbWVudCkuaXMoJzp2aXNpYmxlJykgJiYgJCh0aGlzLl9lbGVtZW50KS5jc3MoJ3Zpc2liaWxpdHknKSAhPT0gJ2hpZGRlbicpIHsKICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgfQogICAgfTsKCiAgICBfcHJvdG8ucHJldiA9IGZ1bmN0aW9uIHByZXYoKSB7CiAgICAgIGlmICghdGhpcy5faXNTbGlkaW5nKSB7CiAgICAgICAgdGhpcy5fc2xpZGUoRGlyZWN0aW9uLlBSRVYpOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5wYXVzZSA9IGZ1bmN0aW9uIHBhdXNlKGV2ZW50KSB7CiAgICAgIGlmICghZXZlbnQpIHsKICAgICAgICB0aGlzLl9pc1BhdXNlZCA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoU2VsZWN0b3IkMi5ORVhUX1BSRVYpKSB7CiAgICAgICAgVXRpbC50cmlnZ2VyVHJhbnNpdGlvbkVuZCh0aGlzLl9lbGVtZW50KTsKICAgICAgICB0aGlzLmN5Y2xlKHRydWUpOwogICAgICB9CgogICAgICBjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKTsKICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsOwogICAgfTsKCiAgICBfcHJvdG8uY3ljbGUgPSBmdW5jdGlvbiBjeWNsZShldmVudCkgewogICAgICBpZiAoIWV2ZW50KSB7CiAgICAgICAgdGhpcy5faXNQYXVzZWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX2ludGVydmFsKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7CiAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsOwogICAgICB9CgogICAgICBpZiAodGhpcy5fY29uZmlnLmludGVydmFsICYmICF0aGlzLl9pc1BhdXNlZCkgewogICAgICAgIHRoaXMuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA/IHRoaXMubmV4dFdoZW5WaXNpYmxlIDogdGhpcy5uZXh0KS5iaW5kKHRoaXMpLCB0aGlzLl9jb25maWcuaW50ZXJ2YWwpOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by50byA9IGZ1bmN0aW9uIHRvKGluZGV4KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLl9hY3RpdmVFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yJDIuQUNUSVZFX0lURU0pOwoKICAgICAgdmFyIGFjdGl2ZUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KHRoaXMuX2FjdGl2ZUVsZW1lbnQpOwoKICAgICAgaWYgKGluZGV4ID4gdGhpcy5faXRlbXMubGVuZ3RoIC0gMSB8fCBpbmRleCA8IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9pc1NsaWRpbmcpIHsKICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uZShFdmVudCQyLlNMSUQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpcy50byhpbmRleCk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoYWN0aXZlSW5kZXggPT09IGluZGV4KSB7CiAgICAgICAgdGhpcy5wYXVzZSgpOwogICAgICAgIHRoaXMuY3ljbGUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBkaXJlY3Rpb24gPSBpbmRleCA+IGFjdGl2ZUluZGV4ID8gRGlyZWN0aW9uLk5FWFQgOiBEaXJlY3Rpb24uUFJFVjsKCiAgICAgIHRoaXMuX3NsaWRlKGRpcmVjdGlvbiwgdGhpcy5faXRlbXNbaW5kZXhdKTsKICAgIH07CgogICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICAkKHRoaXMuX2VsZW1lbnQpLm9mZihFVkVOVF9LRVkkMik7CiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSQyKTsKICAgICAgdGhpcy5faXRlbXMgPSBudWxsOwogICAgICB0aGlzLl9jb25maWcgPSBudWxsOwogICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDsKICAgICAgdGhpcy5faW50ZXJ2YWwgPSBudWxsOwogICAgICB0aGlzLl9pc1BhdXNlZCA9IG51bGw7CiAgICAgIHRoaXMuX2lzU2xpZGluZyA9IG51bGw7CiAgICAgIHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSBudWxsOwogICAgICB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCA9IG51bGw7CiAgICB9IC8vIFByaXZhdGUKICAgIDsKCiAgICBfcHJvdG8uX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7CiAgICAgIGNvbmZpZyA9IF9vYmplY3RTcHJlYWQyKHt9LCBEZWZhdWx0LCB7fSwgY29uZmlnKTsKICAgICAgVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSQyLCBjb25maWcsIERlZmF1bHRUeXBlKTsKICAgICAgcmV0dXJuIGNvbmZpZzsKICAgIH07CgogICAgX3Byb3RvLl9oYW5kbGVTd2lwZSA9IGZ1bmN0aW9uIF9oYW5kbGVTd2lwZSgpIHsKICAgICAgdmFyIGFic0RlbHRheCA9IE1hdGguYWJzKHRoaXMudG91Y2hEZWx0YVgpOwoKICAgICAgaWYgKGFic0RlbHRheCA8PSBTV0lQRV9USFJFU0hPTEQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBkaXJlY3Rpb24gPSBhYnNEZWx0YXggLyB0aGlzLnRvdWNoRGVsdGFYOwogICAgICB0aGlzLnRvdWNoRGVsdGFYID0gMDsgLy8gc3dpcGUgbGVmdAoKICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHsKICAgICAgICB0aGlzLnByZXYoKTsKICAgICAgfSAvLyBzd2lwZSByaWdodAoKCiAgICAgIGlmIChkaXJlY3Rpb24gPCAwKSB7CiAgICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLl9hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9hZGRFdmVudExpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5fY29uZmlnLmtleWJvYXJkKSB7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudCQyLktFWURPV04sIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5fa2V5ZG93bihldmVudCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9jb25maWcucGF1c2UgPT09ICdob3ZlcicpIHsKICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50JDIuTU9VU0VFTlRFUiwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLnBhdXNlKGV2ZW50KTsKICAgICAgICB9KS5vbihFdmVudCQyLk1PVVNFTEVBVkUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMi5jeWNsZShldmVudCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9jb25maWcudG91Y2gpIHsKICAgICAgICB0aGlzLl9hZGRUb3VjaEV2ZW50TGlzdGVuZXJzKCk7CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLl9hZGRUb3VjaEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24gX2FkZFRvdWNoRXZlbnRMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLl90b3VjaFN1cHBvcnRlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoZXZlbnQpIHsKICAgICAgICBpZiAoX3RoaXMzLl9wb2ludGVyRXZlbnQgJiYgUG9pbnRlclR5cGVbZXZlbnQub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZS50b1VwcGVyQ2FzZSgpXSkgewogICAgICAgICAgX3RoaXMzLnRvdWNoU3RhcnRYID0gZXZlbnQub3JpZ2luYWxFdmVudC5jbGllbnRYOwogICAgICAgIH0gZWxzZSBpZiAoIV90aGlzMy5fcG9pbnRlckV2ZW50KSB7CiAgICAgICAgICBfdGhpczMudG91Y2hTdGFydFggPSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDsKICAgICAgICB9CiAgICAgIH07CgogICAgICB2YXIgbW92ZSA9IGZ1bmN0aW9uIG1vdmUoZXZlbnQpIHsKICAgICAgICAvLyBlbnN1cmUgc3dpcGluZyB3aXRoIG9uZSB0b3VjaCBhbmQgbm90IHBpbmNoaW5nCiAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyAmJiBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMSkgewogICAgICAgICAgX3RoaXMzLnRvdWNoRGVsdGFYID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLnRvdWNoRGVsdGFYID0gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLmNsaWVudFggLSBfdGhpczMudG91Y2hTdGFydFg7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdmFyIGVuZCA9IGZ1bmN0aW9uIGVuZChldmVudCkgewogICAgICAgIGlmIChfdGhpczMuX3BvaW50ZXJFdmVudCAmJiBQb2ludGVyVHlwZVtldmVudC5vcmlnaW5hbEV2ZW50LnBvaW50ZXJUeXBlLnRvVXBwZXJDYXNlKCldKSB7CiAgICAgICAgICBfdGhpczMudG91Y2hEZWx0YVggPSBldmVudC5vcmlnaW5hbEV2ZW50LmNsaWVudFggLSBfdGhpczMudG91Y2hTdGFydFg7CiAgICAgICAgfQoKICAgICAgICBfdGhpczMuX2hhbmRsZVN3aXBlKCk7CgogICAgICAgIGlmIChfdGhpczMuX2NvbmZpZy5wYXVzZSA9PT0gJ2hvdmVyJykgewogICAgICAgICAgLy8gSWYgaXQncyBhIHRvdWNoLWVuYWJsZWQgZGV2aWNlLCBtb3VzZWVudGVyL2xlYXZlIGFyZSBmaXJlZCBhcwogICAgICAgICAgLy8gcGFydCBvZiB0aGUgbW91c2UgY29tcGF0aWJpbGl0eSBldmVudHMgb24gZmlyc3QgdGFwIC0gdGhlIGNhcm91c2VsCiAgICAgICAgICAvLyB3b3VsZCBzdG9wIGN5Y2xpbmcgdW50aWwgdXNlciB0YXBwZWQgb3V0IG9mIGl0OwogICAgICAgICAgLy8gaGVyZSwgd2UgbGlzdGVuIGZvciB0b3VjaGVuZCwgZXhwbGljaXRseSBwYXVzZSB0aGUgY2Fyb3VzZWwKICAgICAgICAgIC8vIChhcyBpZiBpdCdzIHRoZSBzZWNvbmQgdGltZSB3ZSB0YXAgb24gaXQsIG1vdXNlZW50ZXIgY29tcGF0IGV2ZW50CiAgICAgICAgICAvLyBpcyBOT1QgZmlyZWQpIGFuZCBhZnRlciBhIHRpbWVvdXQgKHRvIGFsbG93IGZvciBtb3VzZSBjb21wYXRpYmlsaXR5CiAgICAgICAgICAvLyBldmVudHMgdG8gZmlyZSkgd2UgZXhwbGljaXRseSByZXN0YXJ0IGN5Y2xpbmcKICAgICAgICAgIF90aGlzMy5wYXVzZSgpOwoKICAgICAgICAgIGlmIChfdGhpczMudG91Y2hUaW1lb3V0KSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpczMudG91Y2hUaW1lb3V0KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczMudG91Y2hUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5jeWNsZShldmVudCk7CiAgICAgICAgICB9LCBUT1VDSEVWRU5UX0NPTVBBVF9XQUlUICsgX3RoaXMzLl9jb25maWcuaW50ZXJ2YWwpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgICQodGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yJDIuSVRFTV9JTUcpKS5vbihFdmVudCQyLkRSQUdfU1RBUlQsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5fcG9pbnRlckV2ZW50KSB7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudCQyLlBPSU5URVJET1dOLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBzdGFydChldmVudCk7CiAgICAgICAgfSk7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudCQyLlBPSU5URVJVUCwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gZW5kKGV2ZW50KTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENsYXNzTmFtZSQyLlBPSU5URVJfRVZFTlQpOwogICAgICB9IGVsc2UgewogICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQkMi5UT1VDSFNUQVJULCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBzdGFydChldmVudCk7CiAgICAgICAgfSk7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudCQyLlRPVUNITU9WRSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gbW92ZShldmVudCk7CiAgICAgICAgfSk7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudCQyLlRPVUNIRU5ELCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiBlbmQoZXZlbnQpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5fa2V5ZG93biA9IGZ1bmN0aW9uIF9rZXlkb3duKGV2ZW50KSB7CiAgICAgIGlmICgvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGV2ZW50LnRhcmdldC50YWdOYW1lKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc3dpdGNoIChldmVudC53aGljaCkgewogICAgICAgIGNhc2UgQVJST1dfTEVGVF9LRVlDT0RFOgogICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIHRoaXMucHJldigpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgQVJST1dfUklHSFRfS0VZQ09ERToKICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICB0aGlzLm5leHQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5fZ2V0SXRlbUluZGV4ID0gZnVuY3Rpb24gX2dldEl0ZW1JbmRleChlbGVtZW50KSB7CiAgICAgIHRoaXMuX2l0ZW1zID0gZWxlbWVudCAmJiBlbGVtZW50LnBhcmVudE5vZGUgPyBbXS5zbGljZS5jYWxsKGVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yJDIuSVRFTSkpIDogW107CiAgICAgIHJldHVybiB0aGlzLl9pdGVtcy5pbmRleE9mKGVsZW1lbnQpOwogICAgfTsKCiAgICBfcHJvdG8uX2dldEl0ZW1CeURpcmVjdGlvbiA9IGZ1bmN0aW9uIF9nZXRJdGVtQnlEaXJlY3Rpb24oZGlyZWN0aW9uLCBhY3RpdmVFbGVtZW50KSB7CiAgICAgIHZhciBpc05leHREaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5ORVhUOwogICAgICB2YXIgaXNQcmV2RGlyZWN0aW9uID0gZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uUFJFVjsKCiAgICAgIHZhciBhY3RpdmVJbmRleCA9IHRoaXMuX2dldEl0ZW1JbmRleChhY3RpdmVFbGVtZW50KTsKCiAgICAgIHZhciBsYXN0SXRlbUluZGV4ID0gdGhpcy5faXRlbXMubGVuZ3RoIC0gMTsKICAgICAgdmFyIGlzR29pbmdUb1dyYXAgPSBpc1ByZXZEaXJlY3Rpb24gJiYgYWN0aXZlSW5kZXggPT09IDAgfHwgaXNOZXh0RGlyZWN0aW9uICYmIGFjdGl2ZUluZGV4ID09PSBsYXN0SXRlbUluZGV4OwoKICAgICAgaWYgKGlzR29pbmdUb1dyYXAgJiYgIXRoaXMuX2NvbmZpZy53cmFwKSB7CiAgICAgICAgcmV0dXJuIGFjdGl2ZUVsZW1lbnQ7CiAgICAgIH0KCiAgICAgIHZhciBkZWx0YSA9IGRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlBSRVYgPyAtMSA6IDE7CiAgICAgIHZhciBpdGVtSW5kZXggPSAoYWN0aXZlSW5kZXggKyBkZWx0YSkgJSB0aGlzLl9pdGVtcy5sZW5ndGg7CiAgICAgIHJldHVybiBpdGVtSW5kZXggPT09IC0xID8gdGhpcy5faXRlbXNbdGhpcy5faXRlbXMubGVuZ3RoIC0gMV0gOiB0aGlzLl9pdGVtc1tpdGVtSW5kZXhdOwogICAgfTsKCiAgICBfcHJvdG8uX3RyaWdnZXJTbGlkZUV2ZW50ID0gZnVuY3Rpb24gX3RyaWdnZXJTbGlkZUV2ZW50KHJlbGF0ZWRUYXJnZXQsIGV2ZW50RGlyZWN0aW9uTmFtZSkgewogICAgICB2YXIgdGFyZ2V0SW5kZXggPSB0aGlzLl9nZXRJdGVtSW5kZXgocmVsYXRlZFRhcmdldCk7CgogICAgICB2YXIgZnJvbUluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihTZWxlY3RvciQyLkFDVElWRV9JVEVNKSk7CgogICAgICB2YXIgc2xpZGVFdmVudCA9ICQuRXZlbnQoRXZlbnQkMi5TTElERSwgewogICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHJlbGF0ZWRUYXJnZXQsCiAgICAgICAgZGlyZWN0aW9uOiBldmVudERpcmVjdGlvbk5hbWUsCiAgICAgICAgZnJvbTogZnJvbUluZGV4LAogICAgICAgIHRvOiB0YXJnZXRJbmRleAogICAgICB9KTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNsaWRlRXZlbnQpOwogICAgICByZXR1cm4gc2xpZGVFdmVudDsKICAgIH07CgogICAgX3Byb3RvLl9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50ID0gZnVuY3Rpb24gX3NldEFjdGl2ZUluZGljYXRvckVsZW1lbnQoZWxlbWVudCkgewogICAgICBpZiAodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpIHsKICAgICAgICB2YXIgaW5kaWNhdG9ycyA9IFtdLnNsaWNlLmNhbGwodGhpcy5faW5kaWNhdG9yc0VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3RvciQyLkFDVElWRSkpOwogICAgICAgICQoaW5kaWNhdG9ycykucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lJDIuQUNUSVZFKTsKCiAgICAgICAgdmFyIG5leHRJbmRpY2F0b3IgPSB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudC5jaGlsZHJlblt0aGlzLl9nZXRJdGVtSW5kZXgoZWxlbWVudCldOwoKICAgICAgICBpZiAobmV4dEluZGljYXRvcikgewogICAgICAgICAgJChuZXh0SW5kaWNhdG9yKS5hZGRDbGFzcyhDbGFzc05hbWUkMi5BQ1RJVkUpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICBfcHJvdG8uX3NsaWRlID0gZnVuY3Rpb24gX3NsaWRlKGRpcmVjdGlvbiwgZWxlbWVudCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yJDIuQUNUSVZFX0lURU0pOwoKICAgICAgdmFyIGFjdGl2ZUVsZW1lbnRJbmRleCA9IHRoaXMuX2dldEl0ZW1JbmRleChhY3RpdmVFbGVtZW50KTsKCiAgICAgIHZhciBuZXh0RWxlbWVudCA9IGVsZW1lbnQgfHwgYWN0aXZlRWxlbWVudCAmJiB0aGlzLl9nZXRJdGVtQnlEaXJlY3Rpb24oZGlyZWN0aW9uLCBhY3RpdmVFbGVtZW50KTsKCiAgICAgIHZhciBuZXh0RWxlbWVudEluZGV4ID0gdGhpcy5fZ2V0SXRlbUluZGV4KG5leHRFbGVtZW50KTsKCiAgICAgIHZhciBpc0N5Y2xpbmcgPSBCb29sZWFuKHRoaXMuX2ludGVydmFsKTsKICAgICAgdmFyIGRpcmVjdGlvbmFsQ2xhc3NOYW1lOwogICAgICB2YXIgb3JkZXJDbGFzc05hbWU7CiAgICAgIHZhciBldmVudERpcmVjdGlvbk5hbWU7CgogICAgICBpZiAoZGlyZWN0aW9uID09PSBEaXJlY3Rpb24uTkVYVCkgewogICAgICAgIGRpcmVjdGlvbmFsQ2xhc3NOYW1lID0gQ2xhc3NOYW1lJDIuTEVGVDsKICAgICAgICBvcmRlckNsYXNzTmFtZSA9IENsYXNzTmFtZSQyLk5FWFQ7CiAgICAgICAgZXZlbnREaXJlY3Rpb25OYW1lID0gRGlyZWN0aW9uLkxFRlQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGlyZWN0aW9uYWxDbGFzc05hbWUgPSBDbGFzc05hbWUkMi5SSUdIVDsKICAgICAgICBvcmRlckNsYXNzTmFtZSA9IENsYXNzTmFtZSQyLlBSRVY7CiAgICAgICAgZXZlbnREaXJlY3Rpb25OYW1lID0gRGlyZWN0aW9uLlJJR0hUOwogICAgICB9CgogICAgICBpZiAobmV4dEVsZW1lbnQgJiYgJChuZXh0RWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDIuQUNUSVZFKSkgewogICAgICAgIHRoaXMuX2lzU2xpZGluZyA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHNsaWRlRXZlbnQgPSB0aGlzLl90cmlnZ2VyU2xpZGVFdmVudChuZXh0RWxlbWVudCwgZXZlbnREaXJlY3Rpb25OYW1lKTsKCiAgICAgIGlmIChzbGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIWFjdGl2ZUVsZW1lbnQgfHwgIW5leHRFbGVtZW50KSB7CiAgICAgICAgLy8gU29tZSB3ZWlyZG5lc3MgaXMgaGFwcGVuaW5nLCBzbyB3ZSBiYWlsCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLl9pc1NsaWRpbmcgPSB0cnVlOwoKICAgICAgaWYgKGlzQ3ljbGluZykgewogICAgICAgIHRoaXMucGF1c2UoKTsKICAgICAgfQoKICAgICAgdGhpcy5fc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChuZXh0RWxlbWVudCk7CgogICAgICB2YXIgc2xpZEV2ZW50ID0gJC5FdmVudChFdmVudCQyLlNMSUQsIHsKICAgICAgICByZWxhdGVkVGFyZ2V0OiBuZXh0RWxlbWVudCwKICAgICAgICBkaXJlY3Rpb246IGV2ZW50RGlyZWN0aW9uTmFtZSwKICAgICAgICBmcm9tOiBhY3RpdmVFbGVtZW50SW5kZXgsCiAgICAgICAgdG86IG5leHRFbGVtZW50SW5kZXgKICAgICAgfSk7CgogICAgICBpZiAoJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUkMi5TTElERSkpIHsKICAgICAgICAkKG5leHRFbGVtZW50KS5hZGRDbGFzcyhvcmRlckNsYXNzTmFtZSk7CiAgICAgICAgVXRpbC5yZWZsb3cobmV4dEVsZW1lbnQpOwogICAgICAgICQoYWN0aXZlRWxlbWVudCkuYWRkQ2xhc3MoZGlyZWN0aW9uYWxDbGFzc05hbWUpOwogICAgICAgICQobmV4dEVsZW1lbnQpLmFkZENsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lKTsKICAgICAgICB2YXIgbmV4dEVsZW1lbnRJbnRlcnZhbCA9IHBhcnNlSW50KG5leHRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pbnRlcnZhbCcpLCAxMCk7CgogICAgICAgIGlmIChuZXh0RWxlbWVudEludGVydmFsKSB7CiAgICAgICAgICB0aGlzLl9jb25maWcuZGVmYXVsdEludGVydmFsID0gdGhpcy5fY29uZmlnLmRlZmF1bHRJbnRlcnZhbCB8fCB0aGlzLl9jb25maWcuaW50ZXJ2YWw7CiAgICAgICAgICB0aGlzLl9jb25maWcuaW50ZXJ2YWwgPSBuZXh0RWxlbWVudEludGVydmFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLl9jb25maWcuaW50ZXJ2YWwgPSB0aGlzLl9jb25maWcuZGVmYXVsdEludGVydmFsIHx8IHRoaXMuX2NvbmZpZy5pbnRlcnZhbDsKICAgICAgICB9CgogICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KGFjdGl2ZUVsZW1lbnQpOwogICAgICAgICQoYWN0aXZlRWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICQobmV4dEVsZW1lbnQpLnJlbW92ZUNsYXNzKGRpcmVjdGlvbmFsQ2xhc3NOYW1lICsgIiAiICsgb3JkZXJDbGFzc05hbWUpLmFkZENsYXNzKENsYXNzTmFtZSQyLkFDVElWRSk7CiAgICAgICAgICAkKGFjdGl2ZUVsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZSQyLkFDVElWRSArICIgIiArIG9yZGVyQ2xhc3NOYW1lICsgIiAiICsgZGlyZWN0aW9uYWxDbGFzc05hbWUpOwogICAgICAgICAgX3RoaXM0Ll9pc1NsaWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gJChfdGhpczQuX2VsZW1lbnQpLnRyaWdnZXIoc2xpZEV2ZW50KTsKICAgICAgICAgIH0sIDApOwogICAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJChhY3RpdmVFbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUkMi5BQ1RJVkUpOwogICAgICAgICQobmV4dEVsZW1lbnQpLmFkZENsYXNzKENsYXNzTmFtZSQyLkFDVElWRSk7CiAgICAgICAgdGhpcy5faXNTbGlkaW5nID0gZmFsc2U7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNsaWRFdmVudCk7CiAgICAgIH0KCiAgICAgIGlmIChpc0N5Y2xpbmcpIHsKICAgICAgICB0aGlzLmN5Y2xlKCk7CiAgICAgIH0KICAgIH0gLy8gU3RhdGljCiAgICA7CgogICAgQ2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7CiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZJDIpOwoKICAgICAgICB2YXIgX2NvbmZpZyA9IF9vYmplY3RTcHJlYWQyKHt9LCBEZWZhdWx0LCB7fSwgJCh0aGlzKS5kYXRhKCkpOwoKICAgICAgICBpZiAoX3R5cGVvZihjb25maWcpID09PSAnb2JqZWN0JykgewogICAgICAgICAgX2NvbmZpZyA9IF9vYmplY3RTcHJlYWQyKHt9LCBfY29uZmlnLCB7fSwgY29uZmlnKTsKICAgICAgICB9CgogICAgICAgIHZhciBhY3Rpb24gPSB0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJyA/IGNvbmZpZyA6IF9jb25maWcuc2xpZGU7CgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgZGF0YSA9IG5ldyBDYXJvdXNlbCh0aGlzLCBfY29uZmlnKTsKICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSQyLCBkYXRhKTsKICAgICAgICB9CgogICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnbnVtYmVyJykgewogICAgICAgICAgZGF0YS50byhjb25maWcpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVthY3Rpb25dID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiICsgYWN0aW9uICsgIlwiIik7CiAgICAgICAgICB9CgogICAgICAgICAgZGF0YVthY3Rpb25dKCk7CiAgICAgICAgfSBlbHNlIGlmIChfY29uZmlnLmludGVydmFsICYmIF9jb25maWcucmlkZSkgewogICAgICAgICAgZGF0YS5wYXVzZSgpOwogICAgICAgICAgZGF0YS5jeWNsZSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIENhcm91c2VsLl9kYXRhQXBpQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gX2RhdGFBcGlDbGlja0hhbmRsZXIoZXZlbnQpIHsKICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpOwoKICAgICAgaWYgKCFzZWxlY3RvcikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHRhcmdldCA9ICQoc2VsZWN0b3IpWzBdOwoKICAgICAgaWYgKCF0YXJnZXQgfHwgISQodGFyZ2V0KS5oYXNDbGFzcyhDbGFzc05hbWUkMi5DQVJPVVNFTCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBjb25maWcgPSBfb2JqZWN0U3ByZWFkMih7fSwgJCh0YXJnZXQpLmRhdGEoKSwge30sICQodGhpcykuZGF0YSgpKTsKCiAgICAgIHZhciBzbGlkZUluZGV4ID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2xpZGUtdG8nKTsKCiAgICAgIGlmIChzbGlkZUluZGV4KSB7CiAgICAgICAgY29uZmlnLmludGVydmFsID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIENhcm91c2VsLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRhcmdldCksIGNvbmZpZyk7CgogICAgICBpZiAoc2xpZGVJbmRleCkgewogICAgICAgICQodGFyZ2V0KS5kYXRhKERBVEFfS0VZJDIpLnRvKHNsaWRlSW5kZXgpOwogICAgICB9CgogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgfTsKCiAgICBfY3JlYXRlQ2xhc3MoQ2Fyb3VzZWwsIG51bGwsIFt7CiAgICAgIGtleTogIlZFUlNJT04iLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gVkVSU0lPTiQyOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIkRlZmF1bHQiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRGVmYXVsdDsKICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBDYXJvdXNlbDsKICB9KCk7CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb24KICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCgogICQoZG9jdW1lbnQpLm9uKEV2ZW50JDIuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yJDIuREFUQV9TTElERSwgQ2Fyb3VzZWwuX2RhdGFBcGlDbGlja0hhbmRsZXIpOwogICQod2luZG93KS5vbihFdmVudCQyLkxPQURfREFUQV9BUEksIGZ1bmN0aW9uICgpIHsKICAgIHZhciBjYXJvdXNlbHMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IkMi5EQVRBX1JJREUpKTsKCiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2Fyb3VzZWxzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHZhciAkY2Fyb3VzZWwgPSAkKGNhcm91c2Vsc1tpXSk7CgogICAgICBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJGNhcm91c2VsLCAkY2Fyb3VzZWwuZGF0YSgpKTsKICAgIH0KICB9KTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBqUXVlcnkKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCiAgJC5mbltOQU1FJDJdID0gQ2Fyb3VzZWwuX2pRdWVyeUludGVyZmFjZTsKICAkLmZuW05BTUUkMl0uQ29uc3RydWN0b3IgPSBDYXJvdXNlbDsKCiAgJC5mbltOQU1FJDJdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuW05BTUUkMl0gPSBKUVVFUllfTk9fQ09ORkxJQ1QkMjsKICAgIHJldHVybiBDYXJvdXNlbC5falF1ZXJ5SW50ZXJmYWNlOwogIH07CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogQ29uc3RhbnRzCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgoKICB2YXIgTkFNRSQzID0gJ2NvbGxhcHNlJzsKICB2YXIgVkVSU0lPTiQzID0gJzQuNC4xJzsKICB2YXIgREFUQV9LRVkkMyA9ICdicy5jb2xsYXBzZSc7CiAgdmFyIEVWRU5UX0tFWSQzID0gIi4iICsgREFUQV9LRVkkMzsKICB2YXIgREFUQV9BUElfS0VZJDMgPSAnLmRhdGEtYXBpJzsKICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUJDMgPSAkLmZuW05BTUUkM107CiAgdmFyIERlZmF1bHQkMSA9IHsKICAgIHRvZ2dsZTogdHJ1ZSwKICAgIHBhcmVudDogJycKICB9OwogIHZhciBEZWZhdWx0VHlwZSQxID0gewogICAgdG9nZ2xlOiAnYm9vbGVhbicsCiAgICBwYXJlbnQ6ICcoc3RyaW5nfGVsZW1lbnQpJwogIH07CiAgdmFyIEV2ZW50JDMgPSB7CiAgICBTSE9XOiAic2hvdyIgKyBFVkVOVF9LRVkkMywKICAgIFNIT1dOOiAic2hvd24iICsgRVZFTlRfS0VZJDMsCiAgICBISURFOiAiaGlkZSIgKyBFVkVOVF9LRVkkMywKICAgIEhJRERFTjogImhpZGRlbiIgKyBFVkVOVF9LRVkkMywKICAgIENMSUNLX0RBVEFfQVBJOiAiY2xpY2siICsgRVZFTlRfS0VZJDMgKyBEQVRBX0FQSV9LRVkkMwogIH07CiAgdmFyIENsYXNzTmFtZSQzID0gewogICAgU0hPVzogJ3Nob3cnLAogICAgQ09MTEFQU0U6ICdjb2xsYXBzZScsCiAgICBDT0xMQVBTSU5HOiAnY29sbGFwc2luZycsCiAgICBDT0xMQVBTRUQ6ICdjb2xsYXBzZWQnCiAgfTsKICB2YXIgRGltZW5zaW9uID0gewogICAgV0lEVEg6ICd3aWR0aCcsCiAgICBIRUlHSFQ6ICdoZWlnaHQnCiAgfTsKICB2YXIgU2VsZWN0b3IkMyA9IHsKICAgIEFDVElWRVM6ICcuc2hvdywgLmNvbGxhcHNpbmcnLAogICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9ImNvbGxhcHNlIl0nCiAgfTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBDbGFzcyBEZWZpbml0aW9uCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgogIHZhciBDb2xsYXBzZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBDb2xsYXBzZShlbGVtZW50LCBjb25maWcpIHsKICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50OwogICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTsKICAgICAgdGhpcy5fdHJpZ2dlckFycmF5ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtocmVmPVwiIyIgKyBlbGVtZW50LmlkICsgIlwiXSwiICsgKCJbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXRhcmdldD1cIiMiICsgZWxlbWVudC5pZCArICJcIl0iKSkpOwogICAgICB2YXIgdG9nZ2xlTGlzdCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChTZWxlY3RvciQzLkRBVEFfVE9HR0xFKSk7CgogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdG9nZ2xlTGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIHZhciBlbGVtID0gdG9nZ2xlTGlzdFtpXTsKICAgICAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQoZWxlbSk7CiAgICAgICAgdmFyIGZpbHRlckVsZW1lbnQgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKS5maWx0ZXIoZnVuY3Rpb24gKGZvdW5kRWxlbSkgewogICAgICAgICAgcmV0dXJuIGZvdW5kRWxlbSA9PT0gZWxlbWVudDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHNlbGVjdG9yICE9PSBudWxsICYmIGZpbHRlckVsZW1lbnQubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjsKCiAgICAgICAgICB0aGlzLl90cmlnZ2VyQXJyYXkucHVzaChlbGVtKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuX3BhcmVudCA9IHRoaXMuX2NvbmZpZy5wYXJlbnQgPyB0aGlzLl9nZXRQYXJlbnQoKSA6IG51bGw7CgogICAgICBpZiAoIXRoaXMuX2NvbmZpZy5wYXJlbnQpIHsKICAgICAgICB0aGlzLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModGhpcy5fZWxlbWVudCwgdGhpcy5fdHJpZ2dlckFycmF5KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX2NvbmZpZy50b2dnbGUpIHsKICAgICAgICB0aGlzLnRvZ2dsZSgpOwogICAgICB9CiAgICB9IC8vIEdldHRlcnMKCgogICAgdmFyIF9wcm90byA9IENvbGxhcHNlLnByb3RvdHlwZTsgLy8gUHVibGljCgogICAgX3Byb3RvLnRvZ2dsZSA9IGZ1bmN0aW9uIHRvZ2dsZSgpIHsKICAgICAgaWYgKCQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDMuU0hPVykpIHsKICAgICAgICB0aGlzLmhpZGUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNob3coKTsKICAgICAgfQogICAgfTsKCiAgICBfcHJvdG8uc2hvdyA9IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5faXNUcmFuc2l0aW9uaW5nIHx8ICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDMuU0hPVykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBhY3RpdmVzOwogICAgICB2YXIgYWN0aXZlc0RhdGE7CgogICAgICBpZiAodGhpcy5fcGFyZW50KSB7CiAgICAgICAgYWN0aXZlcyA9IFtdLnNsaWNlLmNhbGwodGhpcy5fcGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IkMy5BQ1RJVkVTKSkuZmlsdGVyKGZ1bmN0aW9uIChlbGVtKSB7CiAgICAgICAgICBpZiAodHlwZW9mIF90aGlzLl9jb25maWcucGFyZW50ID09PSAnc3RyaW5nJykgewogICAgICAgICAgICByZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFyZW50JykgPT09IF90aGlzLl9jb25maWcucGFyZW50OwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUkMy5DT0xMQVBTRSk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChhY3RpdmVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgYWN0aXZlcyA9IG51bGw7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoYWN0aXZlcykgewogICAgICAgIGFjdGl2ZXNEYXRhID0gJChhY3RpdmVzKS5ub3QodGhpcy5fc2VsZWN0b3IpLmRhdGEoREFUQV9LRVkkMyk7CgogICAgICAgIGlmIChhY3RpdmVzRGF0YSAmJiBhY3RpdmVzRGF0YS5faXNUcmFuc2l0aW9uaW5nKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgc3RhcnRFdmVudCA9ICQuRXZlbnQoRXZlbnQkMy5TSE9XKTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHN0YXJ0RXZlbnQpOwoKICAgICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhY3RpdmVzKSB7CiAgICAgICAgQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQoYWN0aXZlcykubm90KHRoaXMuX3NlbGVjdG9yKSwgJ2hpZGUnKTsKCiAgICAgICAgaWYgKCFhY3RpdmVzRGF0YSkgewogICAgICAgICAgJChhY3RpdmVzKS5kYXRhKERBVEFfS0VZJDMsIG51bGwpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuX2dldERpbWVuc2lvbigpOwoKICAgICAgJCh0aGlzLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUkMy5DT0xMQVBTRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lJDMuQ09MTEFQU0lORyk7CiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IDA7CgogICAgICBpZiAodGhpcy5fdHJpZ2dlckFycmF5Lmxlbmd0aCkgewogICAgICAgICQodGhpcy5fdHJpZ2dlckFycmF5KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUkMy5DT0xMQVBTRUQpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpOwoKICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7CiAgICAgICAgJChfdGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lJDMuQ09MTEFQU0lORykuYWRkQ2xhc3MoQ2xhc3NOYW1lJDMuQ09MTEFQU0UpLmFkZENsYXNzKENsYXNzTmFtZSQzLlNIT1cpOwogICAgICAgIF90aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAnJzsKCiAgICAgICAgX3RoaXMuc2V0VHJhbnNpdGlvbmluZyhmYWxzZSk7CgogICAgICAgICQoX3RoaXMuX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQkMy5TSE9XTik7CiAgICAgIH07CgogICAgICB2YXIgY2FwaXRhbGl6ZWREaW1lbnNpb24gPSBkaW1lbnNpb25bMF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSgxKTsKICAgICAgdmFyIHNjcm9sbFNpemUgPSAic2Nyb2xsIiArIGNhcGl0YWxpemVkRGltZW5zaW9uOwogICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IHRoaXMuX2VsZW1lbnRbc2Nyb2xsU2l6ZV0gKyAicHgiOwogICAgfTsKCiAgICBfcHJvdG8uaGlkZSA9IGZ1bmN0aW9uIGhpZGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuX2lzVHJhbnNpdGlvbmluZyB8fCAhJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUkMy5TSE9XKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHN0YXJ0RXZlbnQgPSAkLkV2ZW50KEV2ZW50JDMuSElERSk7CiAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzdGFydEV2ZW50KTsKCiAgICAgIGlmIChzdGFydEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5fZ2V0RGltZW5zaW9uKCk7CgogICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSB0aGlzLl9lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW2RpbWVuc2lvbl0gKyAicHgiOwogICAgICBVdGlsLnJlZmxvdyh0aGlzLl9lbGVtZW50KTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUkMy5DT0xMQVBTSU5HKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUkMy5DT0xMQVBTRSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lJDMuU0hPVyk7CiAgICAgIHZhciB0cmlnZ2VyQXJyYXlMZW5ndGggPSB0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoOwoKICAgICAgaWYgKHRyaWdnZXJBcnJheUxlbmd0aCA+IDApIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyaWdnZXJBcnJheUxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgdHJpZ2dlciA9IHRoaXMuX3RyaWdnZXJBcnJheVtpXTsKICAgICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0cmlnZ2VyKTsKCiAgICAgICAgICBpZiAoc2VsZWN0b3IgIT09IG51bGwpIHsKICAgICAgICAgICAgdmFyICRlbGVtID0gJChbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSk7CgogICAgICAgICAgICBpZiAoISRlbGVtLmhhc0NsYXNzKENsYXNzTmFtZSQzLlNIT1cpKSB7CiAgICAgICAgICAgICAgJCh0cmlnZ2VyKS5hZGRDbGFzcyhDbGFzc05hbWUkMy5DT0xMQVBTRUQpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuc2V0VHJhbnNpdGlvbmluZyh0cnVlKTsKCiAgICAgIHZhciBjb21wbGV0ZSA9IGZ1bmN0aW9uIGNvbXBsZXRlKCkgewogICAgICAgIF90aGlzMi5zZXRUcmFuc2l0aW9uaW5nKGZhbHNlKTsKCiAgICAgICAgJChfdGhpczIuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZSQzLkNPTExBUFNJTkcpLmFkZENsYXNzKENsYXNzTmFtZSQzLkNPTExBUFNFKS50cmlnZ2VyKEV2ZW50JDMuSElEREVOKTsKICAgICAgfTsKCiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9ICcnOwogICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICB9OwoKICAgIF9wcm90by5zZXRUcmFuc2l0aW9uaW5nID0gZnVuY3Rpb24gc2V0VHJhbnNpdGlvbmluZyhpc1RyYW5zaXRpb25pbmcpIHsKICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gaXNUcmFuc2l0aW9uaW5nOwogICAgfTsKCiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSQzKTsKICAgICAgdGhpcy5fY29uZmlnID0gbnVsbDsKICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDsKICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7CiAgICAgIHRoaXMuX3RyaWdnZXJBcnJheSA9IG51bGw7CiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IG51bGw7CiAgICB9IC8vIFByaXZhdGUKICAgIDsKCiAgICBfcHJvdG8uX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7CiAgICAgIGNvbmZpZyA9IF9vYmplY3RTcHJlYWQyKHt9LCBEZWZhdWx0JDEsIHt9LCBjb25maWcpOwogICAgICBjb25maWcudG9nZ2xlID0gQm9vbGVhbihjb25maWcudG9nZ2xlKTsgLy8gQ29lcmNlIHN0cmluZyB2YWx1ZXMKCiAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUkMywgY29uZmlnLCBEZWZhdWx0VHlwZSQxKTsKICAgICAgcmV0dXJuIGNvbmZpZzsKICAgIH07CgogICAgX3Byb3RvLl9nZXREaW1lbnNpb24gPSBmdW5jdGlvbiBfZ2V0RGltZW5zaW9uKCkgewogICAgICB2YXIgaGFzV2lkdGggPSAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKERpbWVuc2lvbi5XSURUSCk7CiAgICAgIHJldHVybiBoYXNXaWR0aCA/IERpbWVuc2lvbi5XSURUSCA6IERpbWVuc2lvbi5IRUlHSFQ7CiAgICB9OwoKICAgIF9wcm90by5fZ2V0UGFyZW50ID0gZnVuY3Rpb24gX2dldFBhcmVudCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgcGFyZW50OwoKICAgICAgaWYgKFV0aWwuaXNFbGVtZW50KHRoaXMuX2NvbmZpZy5wYXJlbnQpKSB7CiAgICAgICAgcGFyZW50ID0gdGhpcy5fY29uZmlnLnBhcmVudDsgLy8gSXQncyBhIGpRdWVyeSBvYmplY3QKCiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jb25maWcucGFyZW50LmpxdWVyeSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHBhcmVudCA9IHRoaXMuX2NvbmZpZy5wYXJlbnRbMF07CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnBhcmVudCk7CiAgICAgIH0KCiAgICAgIHZhciBzZWxlY3RvciA9ICJbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIiIgKyB0aGlzLl9jb25maWcucGFyZW50ICsgIlwiXSI7CiAgICAgIHZhciBjaGlsZHJlbiA9IFtdLnNsaWNlLmNhbGwocGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTsKICAgICAgJChjaGlsZHJlbikuZWFjaChmdW5jdGlvbiAoaSwgZWxlbWVudCkgewogICAgICAgIF90aGlzMy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKENvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudChlbGVtZW50KSwgW2VsZW1lbnRdKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBwYXJlbnQ7CiAgICB9OwoKICAgIF9wcm90by5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzID0gZnVuY3Rpb24gX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhlbGVtZW50LCB0cmlnZ2VyQXJyYXkpIHsKICAgICAgdmFyIGlzT3BlbiA9ICQoZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDMuU0hPVyk7CgogICAgICBpZiAodHJpZ2dlckFycmF5Lmxlbmd0aCkgewogICAgICAgICQodHJpZ2dlckFycmF5KS50b2dnbGVDbGFzcyhDbGFzc05hbWUkMy5DT0xMQVBTRUQsICFpc09wZW4pLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCBpc09wZW4pOwogICAgICB9CiAgICB9IC8vIFN0YXRpYwogICAgOwoKICAgIENvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudCA9IGZ1bmN0aW9uIF9nZXRUYXJnZXRGcm9tRWxlbWVudChlbGVtZW50KSB7CiAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTsKICAgICAgcmV0dXJuIHNlbGVjdG9yID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcikgOiBudWxsOwogICAgfTsKCiAgICBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHsKICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKICAgICAgICB2YXIgZGF0YSA9ICR0aGlzLmRhdGEoREFUQV9LRVkkMyk7CgogICAgICAgIHZhciBfY29uZmlnID0gX29iamVjdFNwcmVhZDIoe30sIERlZmF1bHQkMSwge30sICR0aGlzLmRhdGEoKSwge30sIF90eXBlb2YoY29uZmlnKSA9PT0gJ29iamVjdCcgJiYgY29uZmlnID8gY29uZmlnIDoge30pOwoKICAgICAgICBpZiAoIWRhdGEgJiYgX2NvbmZpZy50b2dnbGUgJiYgL3Nob3d8aGlkZS8udGVzdChjb25maWcpKSB7CiAgICAgICAgICBfY29uZmlnLnRvZ2dsZSA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICBkYXRhID0gbmV3IENvbGxhcHNlKHRoaXMsIF9jb25maWcpOwogICAgICAgICAgJHRoaXMuZGF0YShEQVRBX0tFWSQzLCBkYXRhKTsKICAgICAgICB9CgogICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykgewogICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIk5vIG1ldGhvZCBuYW1lZCBcIiIgKyBjb25maWcgKyAiXCIiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICBfY3JlYXRlQ2xhc3MoQ29sbGFwc2UsIG51bGwsIFt7CiAgICAgIGtleTogIlZFUlNJT04iLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gVkVSU0lPTiQzOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIkRlZmF1bHQiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRGVmYXVsdCQxOwogICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIENvbGxhcHNlOwogIH0oKTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvbgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKCiAgJChkb2N1bWVudCkub24oRXZlbnQkMy5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IkMy5EQVRBX1RPR0dMRSwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAvLyBwcmV2ZW50RGVmYXVsdCBvbmx5IGZvciA8YT4gZWxlbWVudHMgKHdoaWNoIGNoYW5nZSB0aGUgVVJMKSBub3QgaW5zaWRlIHRoZSBjb2xsYXBzaWJsZSBlbGVtZW50CiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC50YWdOYW1lID09PSAnQScpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIH0KCiAgICB2YXIgJHRyaWdnZXIgPSAkKHRoaXMpOwogICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpOwogICAgdmFyIHNlbGVjdG9ycyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpOwogICAgJChzZWxlY3RvcnMpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgJHRhcmdldCA9ICQodGhpcyk7CiAgICAgIHZhciBkYXRhID0gJHRhcmdldC5kYXRhKERBVEFfS0VZJDMpOwogICAgICB2YXIgY29uZmlnID0gZGF0YSA/ICd0b2dnbGUnIDogJHRyaWdnZXIuZGF0YSgpOwoKICAgICAgQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZS5jYWxsKCR0YXJnZXQsIGNvbmZpZyk7CiAgICB9KTsKICB9KTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBqUXVlcnkKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCiAgJC5mbltOQU1FJDNdID0gQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZTsKICAkLmZuW05BTUUkM10uQ29uc3RydWN0b3IgPSBDb2xsYXBzZTsKCiAgJC5mbltOQU1FJDNdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuW05BTUUkM10gPSBKUVVFUllfTk9fQ09ORkxJQ1QkMzsKICAgIHJldHVybiBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlOwogIH07CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogQ29uc3RhbnRzCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgoKICB2YXIgTkFNRSQ0ID0gJ2Ryb3Bkb3duJzsKICB2YXIgVkVSU0lPTiQ0ID0gJzQuNC4xJzsKICB2YXIgREFUQV9LRVkkNCA9ICdicy5kcm9wZG93bic7CiAgdmFyIEVWRU5UX0tFWSQ0ID0gIi4iICsgREFUQV9LRVkkNDsKICB2YXIgREFUQV9BUElfS0VZJDQgPSAnLmRhdGEtYXBpJzsKICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUJDQgPSAkLmZuW05BTUUkNF07CiAgdmFyIEVTQ0FQRV9LRVlDT0RFID0gMjc7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIEVzY2FwZSAoRXNjKSBrZXkKCiAgdmFyIFNQQUNFX0tFWUNPREUgPSAzMjsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3Igc3BhY2Uga2V5CgogIHZhciBUQUJfS0VZQ09ERSA9IDk7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIHRhYiBrZXkKCiAgdmFyIEFSUk9XX1VQX0tFWUNPREUgPSAzODsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgdXAgYXJyb3cga2V5CgogIHZhciBBUlJPV19ET1dOX0tFWUNPREUgPSA0MDsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgZG93biBhcnJvdyBrZXkKCiAgdmFyIFJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCA9IDM7IC8vIE1vdXNlRXZlbnQud2hpY2ggdmFsdWUgZm9yIHRoZSByaWdodCBidXR0b24gKGFzc3VtaW5nIGEgcmlnaHQtaGFuZGVkIG1vdXNlKQoKICB2YXIgUkVHRVhQX0tFWURPV04gPSBuZXcgUmVnRXhwKEFSUk9XX1VQX0tFWUNPREUgKyAifCIgKyBBUlJPV19ET1dOX0tFWUNPREUgKyAifCIgKyBFU0NBUEVfS0VZQ09ERSk7CiAgdmFyIEV2ZW50JDQgPSB7CiAgICBISURFOiAiaGlkZSIgKyBFVkVOVF9LRVkkNCwKICAgIEhJRERFTjogImhpZGRlbiIgKyBFVkVOVF9LRVkkNCwKICAgIFNIT1c6ICJzaG93IiArIEVWRU5UX0tFWSQ0LAogICAgU0hPV046ICJzaG93biIgKyBFVkVOVF9LRVkkNCwKICAgIENMSUNLOiAiY2xpY2siICsgRVZFTlRfS0VZJDQsCiAgICBDTElDS19EQVRBX0FQSTogImNsaWNrIiArIEVWRU5UX0tFWSQ0ICsgREFUQV9BUElfS0VZJDQsCiAgICBLRVlET1dOX0RBVEFfQVBJOiAia2V5ZG93biIgKyBFVkVOVF9LRVkkNCArIERBVEFfQVBJX0tFWSQ0LAogICAgS0VZVVBfREFUQV9BUEk6ICJrZXl1cCIgKyBFVkVOVF9LRVkkNCArIERBVEFfQVBJX0tFWSQ0CiAgfTsKICB2YXIgQ2xhc3NOYW1lJDQgPSB7CiAgICBESVNBQkxFRDogJ2Rpc2FibGVkJywKICAgIFNIT1c6ICdzaG93JywKICAgIERST1BVUDogJ2Ryb3B1cCcsCiAgICBEUk9QUklHSFQ6ICdkcm9wcmlnaHQnLAogICAgRFJPUExFRlQ6ICdkcm9wbGVmdCcsCiAgICBNRU5VUklHSFQ6ICdkcm9wZG93bi1tZW51LXJpZ2h0JywKICAgIE1FTlVMRUZUOiAnZHJvcGRvd24tbWVudS1sZWZ0JywKICAgIFBPU0lUSU9OX1NUQVRJQzogJ3Bvc2l0aW9uLXN0YXRpYycKICB9OwogIHZhciBTZWxlY3RvciQ0ID0gewogICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9ImRyb3Bkb3duIl0nLAogICAgRk9STV9DSElMRDogJy5kcm9wZG93biBmb3JtJywKICAgIE1FTlU6ICcuZHJvcGRvd24tbWVudScsCiAgICBOQVZCQVJfTkFWOiAnLm5hdmJhci1uYXYnLAogICAgVklTSUJMRV9JVEVNUzogJy5kcm9wZG93bi1tZW51IC5kcm9wZG93bi1pdGVtOm5vdCguZGlzYWJsZWQpOm5vdCg6ZGlzYWJsZWQpJwogIH07CiAgdmFyIEF0dGFjaG1lbnRNYXAgPSB7CiAgICBUT1A6ICd0b3Atc3RhcnQnLAogICAgVE9QRU5EOiAndG9wLWVuZCcsCiAgICBCT1RUT006ICdib3R0b20tc3RhcnQnLAogICAgQk9UVE9NRU5EOiAnYm90dG9tLWVuZCcsCiAgICBSSUdIVDogJ3JpZ2h0LXN0YXJ0JywKICAgIFJJR0hURU5EOiAncmlnaHQtZW5kJywKICAgIExFRlQ6ICdsZWZ0LXN0YXJ0JywKICAgIExFRlRFTkQ6ICdsZWZ0LWVuZCcKICB9OwogIHZhciBEZWZhdWx0JDIgPSB7CiAgICBvZmZzZXQ6IDAsCiAgICBmbGlwOiB0cnVlLAogICAgYm91bmRhcnk6ICdzY3JvbGxQYXJlbnQnLAogICAgcmVmZXJlbmNlOiAndG9nZ2xlJywKICAgIGRpc3BsYXk6ICdkeW5hbWljJywKICAgIHBvcHBlckNvbmZpZzogbnVsbAogIH07CiAgdmFyIERlZmF1bHRUeXBlJDIgPSB7CiAgICBvZmZzZXQ6ICcobnVtYmVyfHN0cmluZ3xmdW5jdGlvbiknLAogICAgZmxpcDogJ2Jvb2xlYW4nLAogICAgYm91bmRhcnk6ICcoc3RyaW5nfGVsZW1lbnQpJywKICAgIHJlZmVyZW5jZTogJyhzdHJpbmd8ZWxlbWVudCknLAogICAgZGlzcGxheTogJ3N0cmluZycsCiAgICBwb3BwZXJDb25maWc6ICcobnVsbHxvYmplY3QpJwogIH07CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogQ2xhc3MgRGVmaW5pdGlvbgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKICB2YXIgRHJvcGRvd24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRHJvcGRvd24oZWxlbWVudCwgY29uZmlnKSB7CiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50OwogICAgICB0aGlzLl9wb3BwZXIgPSBudWxsOwogICAgICB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTsKICAgICAgdGhpcy5fbWVudSA9IHRoaXMuX2dldE1lbnVFbGVtZW50KCk7CiAgICAgIHRoaXMuX2luTmF2YmFyID0gdGhpcy5fZGV0ZWN0TmF2YmFyKCk7CgogICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVycygpOwogICAgfSAvLyBHZXR0ZXJzCgoKICAgIHZhciBfcHJvdG8gPSBEcm9wZG93bi5wcm90b3R5cGU7IC8vIFB1YmxpYwoKICAgIF9wcm90by50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUoKSB7CiAgICAgIGlmICh0aGlzLl9lbGVtZW50LmRpc2FibGVkIHx8ICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDQuRElTQUJMRUQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaXNBY3RpdmUgPSAkKHRoaXMuX21lbnUpLmhhc0NsYXNzKENsYXNzTmFtZSQ0LlNIT1cpOwoKICAgICAgRHJvcGRvd24uX2NsZWFyTWVudXMoKTsKCiAgICAgIGlmIChpc0FjdGl2ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5zaG93KHRydWUpOwogICAgfTsKCiAgICBfcHJvdG8uc2hvdyA9IGZ1bmN0aW9uIHNob3codXNlUG9wcGVyKSB7CiAgICAgIGlmICh1c2VQb3BwZXIgPT09IHZvaWQgMCkgewogICAgICAgIHVzZVBvcHBlciA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAodGhpcy5fZWxlbWVudC5kaXNhYmxlZCB8fCAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZSQ0LkRJU0FCTEVEKSB8fCAkKHRoaXMuX21lbnUpLmhhc0NsYXNzKENsYXNzTmFtZSQ0LlNIT1cpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsKICAgICAgICByZWxhdGVkVGFyZ2V0OiB0aGlzLl9lbGVtZW50CiAgICAgIH07CiAgICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KEV2ZW50JDQuU0hPVywgcmVsYXRlZFRhcmdldCk7CgogICAgICB2YXIgcGFyZW50ID0gRHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpOwoKICAgICAgJChwYXJlbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTsKCiAgICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gRGlzYWJsZSB0b3RhbGx5IFBvcHBlci5qcyBmb3IgRHJvcGRvd24gaW4gTmF2YmFyCgoKICAgICAgaWYgKCF0aGlzLl9pbk5hdmJhciAmJiB1c2VQb3BwZXIpIHsKICAgICAgICAvKioKICAgICAgICAgKiBDaGVjayBmb3IgUG9wcGVyIGRlcGVuZGVuY3kKICAgICAgICAgKiBQb3BwZXIgLSBodHRwczovL3BvcHBlci5qcy5vcmcKICAgICAgICAgKi8KICAgICAgICBpZiAodHlwZW9mIFBvcHBlciA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Jvb3RzdHJhcFwncyBkcm9wZG93bnMgcmVxdWlyZSBQb3BwZXIuanMgKGh0dHBzOi8vcG9wcGVyLmpzLm9yZy8pJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgcmVmZXJlbmNlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQ7CgogICAgICAgIGlmICh0aGlzLl9jb25maWcucmVmZXJlbmNlID09PSAncGFyZW50JykgewogICAgICAgICAgcmVmZXJlbmNlRWxlbWVudCA9IHBhcmVudDsKICAgICAgICB9IGVsc2UgaWYgKFV0aWwuaXNFbGVtZW50KHRoaXMuX2NvbmZpZy5yZWZlcmVuY2UpKSB7CiAgICAgICAgICByZWZlcmVuY2VFbGVtZW50ID0gdGhpcy5fY29uZmlnLnJlZmVyZW5jZTsgLy8gQ2hlY2sgaWYgaXQncyBqUXVlcnkgZWxlbWVudAoKICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5fY29uZmlnLnJlZmVyZW5jZS5qcXVlcnkgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIHJlZmVyZW5jZUVsZW1lbnQgPSB0aGlzLl9jb25maWcucmVmZXJlbmNlWzBdOwogICAgICAgICAgfQogICAgICAgIH0gLy8gSWYgYm91bmRhcnkgaXMgbm90IGBzY3JvbGxQYXJlbnRgLCB0aGVuIHNldCBwb3NpdGlvbiB0byBgc3RhdGljYAogICAgICAgIC8vIHRvIGFsbG93IHRoZSBtZW51IHRvICJlc2NhcGUiIHRoZSBzY3JvbGwgcGFyZW50J3MgYm91bmRhcmllcwogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9pc3N1ZXMvMjQyNTEKCgogICAgICAgIGlmICh0aGlzLl9jb25maWcuYm91bmRhcnkgIT09ICdzY3JvbGxQYXJlbnQnKSB7CiAgICAgICAgICAkKHBhcmVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lJDQuUE9TSVRJT05fU1RBVElDKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuX3BvcHBlciA9IG5ldyBQb3BwZXIocmVmZXJlbmNlRWxlbWVudCwgdGhpcy5fbWVudSwgdGhpcy5fZ2V0UG9wcGVyQ29uZmlnKCkpOwogICAgICB9IC8vIElmIHRoaXMgaXMgYSB0b3VjaC1lbmFibGVkIGRldmljZSB3ZSBhZGQgZXh0cmEKICAgICAgLy8gZW1wdHkgbW91c2VvdmVyIGxpc3RlbmVycyB0byB0aGUgYm9keSdzIGltbWVkaWF0ZSBjaGlsZHJlbjsKICAgICAgLy8gb25seSBuZWVkZWQgYmVjYXVzZSBvZiBicm9rZW4gZXZlbnQgZGVsZWdhdGlvbiBvbiBpT1MKICAgICAgLy8gaHR0cHM6Ly93d3cucXVpcmtzbW9kZS5vcmcvYmxvZy9hcmNoaXZlcy8yMDE0LzAyL21vdXNlX2V2ZW50X2J1Yi5odG1sCgoKICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAkKHBhcmVudCkuY2xvc2VzdChTZWxlY3RvciQ0Lk5BVkJBUl9OQVYpLmxlbmd0aCA9PT0gMCkgewogICAgICAgICQoZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vbignbW91c2VvdmVyJywgbnVsbCwgJC5ub29wKTsKICAgICAgfQoKICAgICAgdGhpcy5fZWxlbWVudC5mb2N1cygpOwoKICAgICAgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTsKCiAgICAgICQodGhpcy5fbWVudSkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lJDQuU0hPVyk7CiAgICAgICQocGFyZW50KS50b2dnbGVDbGFzcyhDbGFzc05hbWUkNC5TSE9XKS50cmlnZ2VyKCQuRXZlbnQoRXZlbnQkNC5TSE9XTiwgcmVsYXRlZFRhcmdldCkpOwogICAgfTsKCiAgICBfcHJvdG8uaGlkZSA9IGZ1bmN0aW9uIGhpZGUoKSB7CiAgICAgIGlmICh0aGlzLl9lbGVtZW50LmRpc2FibGVkIHx8ICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDQuRElTQUJMRUQpIHx8ICEkKHRoaXMuX21lbnUpLmhhc0NsYXNzKENsYXNzTmFtZSQ0LlNIT1cpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgcmVsYXRlZFRhcmdldCA9IHsKICAgICAgICByZWxhdGVkVGFyZ2V0OiB0aGlzLl9lbGVtZW50CiAgICAgIH07CiAgICAgIHZhciBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50JDQuSElERSwgcmVsYXRlZFRhcmdldCk7CgogICAgICB2YXIgcGFyZW50ID0gRHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpOwoKICAgICAgJChwYXJlbnQpLnRyaWdnZXIoaGlkZUV2ZW50KTsKCiAgICAgIGlmIChoaWRlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl9wb3BwZXIpIHsKICAgICAgICB0aGlzLl9wb3BwZXIuZGVzdHJveSgpOwogICAgICB9CgogICAgICAkKHRoaXMuX21lbnUpLnRvZ2dsZUNsYXNzKENsYXNzTmFtZSQ0LlNIT1cpOwogICAgICAkKHBhcmVudCkudG9nZ2xlQ2xhc3MoQ2xhc3NOYW1lJDQuU0hPVykudHJpZ2dlcigkLkV2ZW50KEV2ZW50JDQuSElEREVOLCByZWxhdGVkVGFyZ2V0KSk7CiAgICB9OwoKICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZJDQpOwogICAgICAkKHRoaXMuX2VsZW1lbnQpLm9mZihFVkVOVF9LRVkkNCk7CiAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsOwogICAgICB0aGlzLl9tZW51ID0gbnVsbDsKCiAgICAgIGlmICh0aGlzLl9wb3BwZXIgIT09IG51bGwpIHsKICAgICAgICB0aGlzLl9wb3BwZXIuZGVzdHJveSgpOwoKICAgICAgICB0aGlzLl9wb3BwZXIgPSBudWxsOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHRoaXMuX2luTmF2YmFyID0gdGhpcy5fZGV0ZWN0TmF2YmFyKCk7CgogICAgICBpZiAodGhpcy5fcG9wcGVyICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy5fcG9wcGVyLnNjaGVkdWxlVXBkYXRlKCk7CiAgICAgIH0KICAgIH0gLy8gUHJpdmF0ZQogICAgOwoKICAgIF9wcm90by5fYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbiBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50JDQuQ0xJQ0ssIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICAgIF90aGlzLnRvZ2dsZSgpOwogICAgICB9KTsKICAgIH07CgogICAgX3Byb3RvLl9nZXRDb25maWcgPSBmdW5jdGlvbiBfZ2V0Q29uZmlnKGNvbmZpZykgewogICAgICBjb25maWcgPSBfb2JqZWN0U3ByZWFkMih7fSwgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0LCB7fSwgJCh0aGlzLl9lbGVtZW50KS5kYXRhKCksIHt9LCBjb25maWcpOwogICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FJDQsIGNvbmZpZywgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7CiAgICAgIHJldHVybiBjb25maWc7CiAgICB9OwoKICAgIF9wcm90by5fZ2V0TWVudUVsZW1lbnQgPSBmdW5jdGlvbiBfZ2V0TWVudUVsZW1lbnQoKSB7CiAgICAgIGlmICghdGhpcy5fbWVudSkgewogICAgICAgIHZhciBwYXJlbnQgPSBEcm9wZG93bi5fZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7CgogICAgICAgIGlmIChwYXJlbnQpIHsKICAgICAgICAgIHRoaXMuX21lbnUgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihTZWxlY3RvciQ0Lk1FTlUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuX21lbnU7CiAgICB9OwoKICAgIF9wcm90by5fZ2V0UGxhY2VtZW50ID0gZnVuY3Rpb24gX2dldFBsYWNlbWVudCgpIHsKICAgICAgdmFyICRwYXJlbnREcm9wZG93biA9ICQodGhpcy5fZWxlbWVudC5wYXJlbnROb2RlKTsKICAgICAgdmFyIHBsYWNlbWVudCA9IEF0dGFjaG1lbnRNYXAuQk9UVE9NOyAvLyBIYW5kbGUgZHJvcHVwCgogICAgICBpZiAoJHBhcmVudERyb3Bkb3duLmhhc0NsYXNzKENsYXNzTmFtZSQ0LkRST1BVUCkpIHsKICAgICAgICBwbGFjZW1lbnQgPSBBdHRhY2htZW50TWFwLlRPUDsKCiAgICAgICAgaWYgKCQodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDQuTUVOVVJJR0hUKSkgewogICAgICAgICAgcGxhY2VtZW50ID0gQXR0YWNobWVudE1hcC5UT1BFTkQ7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKCRwYXJlbnREcm9wZG93bi5oYXNDbGFzcyhDbGFzc05hbWUkNC5EUk9QUklHSFQpKSB7CiAgICAgICAgcGxhY2VtZW50ID0gQXR0YWNobWVudE1hcC5SSUdIVDsKICAgICAgfSBlbHNlIGlmICgkcGFyZW50RHJvcGRvd24uaGFzQ2xhc3MoQ2xhc3NOYW1lJDQuRFJPUExFRlQpKSB7CiAgICAgICAgcGxhY2VtZW50ID0gQXR0YWNobWVudE1hcC5MRUZUOwogICAgICB9IGVsc2UgaWYgKCQodGhpcy5fbWVudSkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDQuTUVOVVJJR0hUKSkgewogICAgICAgIHBsYWNlbWVudCA9IEF0dGFjaG1lbnRNYXAuQk9UVE9NRU5EOwogICAgICB9CgogICAgICByZXR1cm4gcGxhY2VtZW50OwogICAgfTsKCiAgICBfcHJvdG8uX2RldGVjdE5hdmJhciA9IGZ1bmN0aW9uIF9kZXRlY3ROYXZiYXIoKSB7CiAgICAgIHJldHVybiAkKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoJy5uYXZiYXInKS5sZW5ndGggPiAwOwogICAgfTsKCiAgICBfcHJvdG8uX2dldE9mZnNldCA9IGZ1bmN0aW9uIF9nZXRPZmZzZXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIG9mZnNldCA9IHt9OwoKICAgICAgaWYgKHR5cGVvZiB0aGlzLl9jb25maWcub2Zmc2V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgb2Zmc2V0LmZuID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGRhdGEub2Zmc2V0cyA9IF9vYmplY3RTcHJlYWQyKHt9LCBkYXRhLm9mZnNldHMsIHt9LCBfdGhpczIuX2NvbmZpZy5vZmZzZXQoZGF0YS5vZmZzZXRzLCBfdGhpczIuX2VsZW1lbnQpIHx8IHt9KTsKICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb2Zmc2V0Lm9mZnNldCA9IHRoaXMuX2NvbmZpZy5vZmZzZXQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBvZmZzZXQ7CiAgICB9OwoKICAgIF9wcm90by5fZ2V0UG9wcGVyQ29uZmlnID0gZnVuY3Rpb24gX2dldFBvcHBlckNvbmZpZygpIHsKICAgICAgdmFyIHBvcHBlckNvbmZpZyA9IHsKICAgICAgICBwbGFjZW1lbnQ6IHRoaXMuX2dldFBsYWNlbWVudCgpLAogICAgICAgIG1vZGlmaWVyczogewogICAgICAgICAgb2Zmc2V0OiB0aGlzLl9nZXRPZmZzZXQoKSwKICAgICAgICAgIGZsaXA6IHsKICAgICAgICAgICAgZW5hYmxlZDogdGhpcy5fY29uZmlnLmZsaXAKICAgICAgICAgIH0sCiAgICAgICAgICBwcmV2ZW50T3ZlcmZsb3c6IHsKICAgICAgICAgICAgYm91bmRhcmllc0VsZW1lbnQ6IHRoaXMuX2NvbmZpZy5ib3VuZGFyeQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsgLy8gRGlzYWJsZSBQb3BwZXIuanMgaWYgd2UgaGF2ZSBhIHN0YXRpYyBkaXNwbGF5CgogICAgICBpZiAodGhpcy5fY29uZmlnLmRpc3BsYXkgPT09ICdzdGF0aWMnKSB7CiAgICAgICAgcG9wcGVyQ29uZmlnLm1vZGlmaWVycy5hcHBseVN0eWxlID0gewogICAgICAgICAgZW5hYmxlZDogZmFsc2UKICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gX29iamVjdFNwcmVhZDIoe30sIHBvcHBlckNvbmZpZywge30sIHRoaXMuX2NvbmZpZy5wb3BwZXJDb25maWcpOwogICAgfSAvLyBTdGF0aWMKICAgIDsKCiAgICBEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHsKICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkkNCk7CgogICAgICAgIHZhciBfY29uZmlnID0gX3R5cGVvZihjb25maWcpID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IG51bGw7CgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgZGF0YSA9IG5ldyBEcm9wZG93bih0aGlzLCBfY29uZmlnKTsKICAgICAgICAgICQodGhpcykuZGF0YShEQVRBX0tFWSQ0LCBkYXRhKTsKICAgICAgICB9CgogICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykgewogICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIk5vIG1ldGhvZCBuYW1lZCBcIiIgKyBjb25maWcgKyAiXCIiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICBEcm9wZG93bi5fY2xlYXJNZW51cyA9IGZ1bmN0aW9uIF9jbGVhck1lbnVzKGV2ZW50KSB7CiAgICAgIGlmIChldmVudCAmJiAoZXZlbnQud2hpY2ggPT09IFJJR0hUX01PVVNFX0JVVFRPTl9XSElDSCB8fCBldmVudC50eXBlID09PSAna2V5dXAnICYmIGV2ZW50LndoaWNoICE9PSBUQUJfS0VZQ09ERSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciB0b2dnbGVzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yJDQuREFUQV9UT0dHTEUpKTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0b2dnbGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0b2dnbGVzW2ldKTsKCiAgICAgICAgdmFyIGNvbnRleHQgPSAkKHRvZ2dsZXNbaV0pLmRhdGEoREFUQV9LRVkkNCk7CiAgICAgICAgdmFyIHJlbGF0ZWRUYXJnZXQgPSB7CiAgICAgICAgICByZWxhdGVkVGFyZ2V0OiB0b2dnbGVzW2ldCiAgICAgICAgfTsKCiAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICdjbGljaycpIHsKICAgICAgICAgIHJlbGF0ZWRUYXJnZXQuY2xpY2tFdmVudCA9IGV2ZW50OwogICAgICAgIH0KCiAgICAgICAgaWYgKCFjb250ZXh0KSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIHZhciBkcm9wZG93bk1lbnUgPSBjb250ZXh0Ll9tZW51OwoKICAgICAgICBpZiAoISQocGFyZW50KS5oYXNDbGFzcyhDbGFzc05hbWUkNC5TSE9XKSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdjbGljaycgJiYgL2lucHV0fHRleHRhcmVhL2kudGVzdChldmVudC50YXJnZXQudGFnTmFtZSkgfHwgZXZlbnQudHlwZSA9PT0gJ2tleXVwJyAmJiBldmVudC53aGljaCA9PT0gVEFCX0tFWUNPREUpICYmICQuY29udGFpbnMocGFyZW50LCBldmVudC50YXJnZXQpKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIHZhciBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50JDQuSElERSwgcmVsYXRlZFRhcmdldCk7CiAgICAgICAgJChwYXJlbnQpLnRyaWdnZXIoaGlkZUV2ZW50KTsKCiAgICAgICAgaWYgKGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBJZiB0aGlzIGlzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2Ugd2UgcmVtb3ZlIHRoZSBleHRyYQogICAgICAgIC8vIGVtcHR5IG1vdXNlb3ZlciBsaXN0ZW5lcnMgd2UgYWRkZWQgZm9yIGlPUyBzdXBwb3J0CgoKICAgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLmNoaWxkcmVuKCkub2ZmKCdtb3VzZW92ZXInLCBudWxsLCAkLm5vb3ApOwogICAgICAgIH0KCiAgICAgICAgdG9nZ2xlc1tpXS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTsKCiAgICAgICAgaWYgKGNvbnRleHQuX3BvcHBlcikgewogICAgICAgICAgY29udGV4dC5fcG9wcGVyLmRlc3Ryb3koKTsKICAgICAgICB9CgogICAgICAgICQoZHJvcGRvd25NZW51KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUkNC5TSE9XKTsKICAgICAgICAkKHBhcmVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lJDQuU0hPVykudHJpZ2dlcigkLkV2ZW50KEV2ZW50JDQuSElEREVOLCByZWxhdGVkVGFyZ2V0KSk7CiAgICAgIH0KICAgIH07CgogICAgRHJvcGRvd24uX2dldFBhcmVudEZyb21FbGVtZW50ID0gZnVuY3Rpb24gX2dldFBhcmVudEZyb21FbGVtZW50KGVsZW1lbnQpIHsKICAgICAgdmFyIHBhcmVudDsKICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpOwoKICAgICAgaWYgKHNlbGVjdG9yKSB7CiAgICAgICAgcGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICAgIH0KCiAgICAgIHJldHVybiBwYXJlbnQgfHwgZWxlbWVudC5wYXJlbnROb2RlOwogICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eQogICAgOwoKICAgIERyb3Bkb3duLl9kYXRhQXBpS2V5ZG93bkhhbmRsZXIgPSBmdW5jdGlvbiBfZGF0YUFwaUtleWRvd25IYW5kbGVyKGV2ZW50KSB7CiAgICAgIC8vIElmIG5vdCBpbnB1dC90ZXh0YXJlYToKICAgICAgLy8gIC0gQW5kIG5vdCBhIGtleSBpbiBSRUdFWFBfS0VZRE9XTiA9PiBub3QgYSBkcm9wZG93biBjb21tYW5kCiAgICAgIC8vIElmIGlucHV0L3RleHRhcmVhOgogICAgICAvLyAgLSBJZiBzcGFjZSBrZXkgPT4gbm90IGEgZHJvcGRvd24gY29tbWFuZAogICAgICAvLyAgLSBJZiBrZXkgaXMgb3RoZXIgdGhhbiBlc2NhcGUKICAgICAgLy8gICAgLSBJZiBrZXkgaXMgbm90IHVwIG9yIGRvd24gPT4gbm90IGEgZHJvcGRvd24gY29tbWFuZAogICAgICAvLyAgICAtIElmIHRyaWdnZXIgaW5zaWRlIHRoZSBtZW51ID0+IG5vdCBhIGRyb3Bkb3duIGNvbW1hbmQKICAgICAgaWYgKC9pbnB1dHx0ZXh0YXJlYS9pLnRlc3QoZXZlbnQudGFyZ2V0LnRhZ05hbWUpID8gZXZlbnQud2hpY2ggPT09IFNQQUNFX0tFWUNPREUgfHwgZXZlbnQud2hpY2ggIT09IEVTQ0FQRV9LRVlDT0RFICYmIChldmVudC53aGljaCAhPT0gQVJST1dfRE9XTl9LRVlDT0RFICYmIGV2ZW50LndoaWNoICE9PSBBUlJPV19VUF9LRVlDT0RFIHx8ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFNlbGVjdG9yJDQuTUVOVSkubGVuZ3RoKSA6ICFSRUdFWFBfS0VZRE9XTi50ZXN0KGV2ZW50LndoaWNoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAkKHRoaXMpLmhhc0NsYXNzKENsYXNzTmFtZSQ0LkRJU0FCTEVEKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHBhcmVudCA9IERyb3Bkb3duLl9nZXRQYXJlbnRGcm9tRWxlbWVudCh0aGlzKTsKCiAgICAgIHZhciBpc0FjdGl2ZSA9ICQocGFyZW50KS5oYXNDbGFzcyhDbGFzc05hbWUkNC5TSE9XKTsKCiAgICAgIGlmICghaXNBY3RpdmUgJiYgZXZlbnQud2hpY2ggPT09IEVTQ0FQRV9LRVlDT0RFKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIWlzQWN0aXZlIHx8IGlzQWN0aXZlICYmIChldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUgfHwgZXZlbnQud2hpY2ggPT09IFNQQUNFX0tFWUNPREUpKSB7CiAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSkgewogICAgICAgICAgdmFyIHRvZ2dsZSA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yJDQuREFUQV9UT0dHTEUpOwogICAgICAgICAgJCh0b2dnbGUpLnRyaWdnZXIoJ2ZvY3VzJyk7CiAgICAgICAgfQoKICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaXRlbXMgPSBbXS5zbGljZS5jYWxsKHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yJDQuVklTSUJMRV9JVEVNUykpLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiAkKGl0ZW0pLmlzKCc6dmlzaWJsZScpOwogICAgICB9KTsKCiAgICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpbmRleCA9IGl0ZW1zLmluZGV4T2YoZXZlbnQudGFyZ2V0KTsKCiAgICAgIGlmIChldmVudC53aGljaCA9PT0gQVJST1dfVVBfS0VZQ09ERSAmJiBpbmRleCA+IDApIHsKICAgICAgICAvLyBVcAogICAgICAgIGluZGV4LS07CiAgICAgIH0KCiAgICAgIGlmIChldmVudC53aGljaCA9PT0gQVJST1dfRE9XTl9LRVlDT0RFICYmIGluZGV4IDwgaXRlbXMubGVuZ3RoIC0gMSkgewogICAgICAgIC8vIERvd24KICAgICAgICBpbmRleCsrOwogICAgICB9CgogICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgaW5kZXggPSAwOwogICAgICB9CgogICAgICBpdGVtc1tpbmRleF0uZm9jdXMoKTsKICAgIH07CgogICAgX2NyZWF0ZUNsYXNzKERyb3Bkb3duLCBudWxsLCBbewogICAgICBrZXk6ICJWRVJTSU9OIiwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIFZFUlNJT04kNDsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJEZWZhdWx0IiwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIERlZmF1bHQkMjsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJEZWZhdWx0VHlwZSIsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiBEZWZhdWx0VHlwZSQyOwogICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIERyb3Bkb3duOwogIH0oKTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvbgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKCiAgJChkb2N1bWVudCkub24oRXZlbnQkNC5LRVlET1dOX0RBVEFfQVBJLCBTZWxlY3RvciQ0LkRBVEFfVE9HR0xFLCBEcm9wZG93bi5fZGF0YUFwaUtleWRvd25IYW5kbGVyKS5vbihFdmVudCQ0LktFWURPV05fREFUQV9BUEksIFNlbGVjdG9yJDQuTUVOVSwgRHJvcGRvd24uX2RhdGFBcGlLZXlkb3duSGFuZGxlcikub24oRXZlbnQkNC5DTElDS19EQVRBX0FQSSArICIgIiArIEV2ZW50JDQuS0VZVVBfREFUQV9BUEksIERyb3Bkb3duLl9jbGVhck1lbnVzKS5vbihFdmVudCQ0LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3RvciQ0LkRBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKCiAgICBEcm9wZG93bi5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0aGlzKSwgJ3RvZ2dsZScpOwogIH0pLm9uKEV2ZW50JDQuQ0xJQ0tfREFUQV9BUEksIFNlbGVjdG9yJDQuRk9STV9DSElMRCwgZnVuY3Rpb24gKGUpIHsKICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgfSk7CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogalF1ZXJ5CiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgogICQuZm5bTkFNRSQ0XSA9IERyb3Bkb3duLl9qUXVlcnlJbnRlcmZhY2U7CiAgJC5mbltOQU1FJDRdLkNvbnN0cnVjdG9yID0gRHJvcGRvd247CgogICQuZm5bTkFNRSQ0XS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgewogICAgJC5mbltOQU1FJDRdID0gSlFVRVJZX05PX0NPTkZMSUNUJDQ7CiAgICByZXR1cm4gRHJvcGRvd24uX2pRdWVyeUludGVyZmFjZTsKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENvbnN0YW50cwogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKCiAgdmFyIE5BTUUkNSA9ICdtb2RhbCc7CiAgdmFyIFZFUlNJT04kNSA9ICc0LjQuMSc7CiAgdmFyIERBVEFfS0VZJDUgPSAnYnMubW9kYWwnOwogIHZhciBFVkVOVF9LRVkkNSA9ICIuIiArIERBVEFfS0VZJDU7CiAgdmFyIERBVEFfQVBJX0tFWSQ1ID0gJy5kYXRhLWFwaSc7CiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCQ1ID0gJC5mbltOQU1FJDVdOwogIHZhciBFU0NBUEVfS0VZQ09ERSQxID0gMjc7IC8vIEtleWJvYXJkRXZlbnQud2hpY2ggdmFsdWUgZm9yIEVzY2FwZSAoRXNjKSBrZXkKCiAgdmFyIERlZmF1bHQkMyA9IHsKICAgIGJhY2tkcm9wOiB0cnVlLAogICAga2V5Ym9hcmQ6IHRydWUsCiAgICBmb2N1czogdHJ1ZSwKICAgIHNob3c6IHRydWUKICB9OwogIHZhciBEZWZhdWx0VHlwZSQzID0gewogICAgYmFja2Ryb3A6ICcoYm9vbGVhbnxzdHJpbmcpJywKICAgIGtleWJvYXJkOiAnYm9vbGVhbicsCiAgICBmb2N1czogJ2Jvb2xlYW4nLAogICAgc2hvdzogJ2Jvb2xlYW4nCiAgfTsKICB2YXIgRXZlbnQkNSA9IHsKICAgIEhJREU6ICJoaWRlIiArIEVWRU5UX0tFWSQ1LAogICAgSElERV9QUkVWRU5URUQ6ICJoaWRlUHJldmVudGVkIiArIEVWRU5UX0tFWSQ1LAogICAgSElEREVOOiAiaGlkZGVuIiArIEVWRU5UX0tFWSQ1LAogICAgU0hPVzogInNob3ciICsgRVZFTlRfS0VZJDUsCiAgICBTSE9XTjogInNob3duIiArIEVWRU5UX0tFWSQ1LAogICAgRk9DVVNJTjogImZvY3VzaW4iICsgRVZFTlRfS0VZJDUsCiAgICBSRVNJWkU6ICJyZXNpemUiICsgRVZFTlRfS0VZJDUsCiAgICBDTElDS19ESVNNSVNTOiAiY2xpY2suZGlzbWlzcyIgKyBFVkVOVF9LRVkkNSwKICAgIEtFWURPV05fRElTTUlTUzogImtleWRvd24uZGlzbWlzcyIgKyBFVkVOVF9LRVkkNSwKICAgIE1PVVNFVVBfRElTTUlTUzogIm1vdXNldXAuZGlzbWlzcyIgKyBFVkVOVF9LRVkkNSwKICAgIE1PVVNFRE9XTl9ESVNNSVNTOiAibW91c2Vkb3duLmRpc21pc3MiICsgRVZFTlRfS0VZJDUsCiAgICBDTElDS19EQVRBX0FQSTogImNsaWNrIiArIEVWRU5UX0tFWSQ1ICsgREFUQV9BUElfS0VZJDUKICB9OwogIHZhciBDbGFzc05hbWUkNSA9IHsKICAgIFNDUk9MTEFCTEU6ICdtb2RhbC1kaWFsb2ctc2Nyb2xsYWJsZScsCiAgICBTQ1JPTExCQVJfTUVBU1VSRVI6ICdtb2RhbC1zY3JvbGxiYXItbWVhc3VyZScsCiAgICBCQUNLRFJPUDogJ21vZGFsLWJhY2tkcm9wJywKICAgIE9QRU46ICdtb2RhbC1vcGVuJywKICAgIEZBREU6ICdmYWRlJywKICAgIFNIT1c6ICdzaG93JywKICAgIFNUQVRJQzogJ21vZGFsLXN0YXRpYycKICB9OwogIHZhciBTZWxlY3RvciQ1ID0gewogICAgRElBTE9HOiAnLm1vZGFsLWRpYWxvZycsCiAgICBNT0RBTF9CT0RZOiAnLm1vZGFsLWJvZHknLAogICAgREFUQV9UT0dHTEU6ICdbZGF0YS10b2dnbGU9Im1vZGFsIl0nLAogICAgREFUQV9ESVNNSVNTOiAnW2RhdGEtZGlzbWlzcz0ibW9kYWwiXScsCiAgICBGSVhFRF9DT05URU5UOiAnLmZpeGVkLXRvcCwgLmZpeGVkLWJvdHRvbSwgLmlzLWZpeGVkLCAuc3RpY2t5LXRvcCcsCiAgICBTVElDS1lfQ09OVEVOVDogJy5zdGlja3ktdG9wJwogIH07CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogQ2xhc3MgRGVmaW5pdGlvbgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKICB2YXIgTW9kYWwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gTW9kYWwoZWxlbWVudCwgY29uZmlnKSB7CiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpOwogICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDsKICAgICAgdGhpcy5fZGlhbG9nID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yJDUuRElBTE9HKTsKICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsOwogICAgICB0aGlzLl9pc1Nob3duID0gZmFsc2U7CiAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gZmFsc2U7CiAgICAgIHRoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZTsKICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gMDsKICAgIH0gLy8gR2V0dGVycwoKCiAgICB2YXIgX3Byb3RvID0gTW9kYWwucHJvdG90eXBlOyAvLyBQdWJsaWMKCiAgICBfcHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKHJlbGF0ZWRUYXJnZXQpIHsKICAgICAgcmV0dXJuIHRoaXMuX2lzU2hvd24gPyB0aGlzLmhpZGUoKSA6IHRoaXMuc2hvdyhyZWxhdGVkVGFyZ2V0KTsKICAgIH07CgogICAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KHJlbGF0ZWRUYXJnZXQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLl9pc1Nob3duIHx8IHRoaXMuX2lzVHJhbnNpdGlvbmluZykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDUuRkFERSkpIHsKICAgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSB0cnVlOwogICAgICB9CgogICAgICB2YXIgc2hvd0V2ZW50ID0gJC5FdmVudChFdmVudCQ1LlNIT1csIHsKICAgICAgICByZWxhdGVkVGFyZ2V0OiByZWxhdGVkVGFyZ2V0CiAgICAgIH0pOwogICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTsKCiAgICAgIGlmICh0aGlzLl9pc1Nob3duIHx8IHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5faXNTaG93biA9IHRydWU7CgogICAgICB0aGlzLl9jaGVja1Njcm9sbGJhcigpOwoKICAgICAgdGhpcy5fc2V0U2Nyb2xsYmFyKCk7CgogICAgICB0aGlzLl9hZGp1c3REaWFsb2coKTsKCiAgICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KCk7CgogICAgICB0aGlzLl9zZXRSZXNpemVFdmVudCgpOwoKICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudCQ1LkNMSUNLX0RJU01JU1MsIFNlbGVjdG9yJDUuREFUQV9ESVNNSVNTLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICByZXR1cm4gX3RoaXMuaGlkZShldmVudCk7CiAgICAgIH0pOwogICAgICAkKHRoaXMuX2RpYWxvZykub24oRXZlbnQkNS5NT1VTRURPV05fRElTTUlTUywgZnVuY3Rpb24gKCkgewogICAgICAgICQoX3RoaXMuX2VsZW1lbnQpLm9uZShFdmVudCQ1Lk1PVVNFVVBfRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICBpZiAoJChldmVudC50YXJnZXQpLmlzKF90aGlzLl9lbGVtZW50KSkgewogICAgICAgICAgICBfdGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwoKICAgICAgdGhpcy5fc2hvd0JhY2tkcm9wKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuX3Nob3dFbGVtZW50KHJlbGF0ZWRUYXJnZXQpOwogICAgICB9KTsKICAgIH07CgogICAgX3Byb3RvLmhpZGUgPSBmdW5jdGlvbiBoaWRlKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKGV2ZW50KSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLl9pc1Nob3duIHx8IHRoaXMuX2lzVHJhbnNpdGlvbmluZykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGhpZGVFdmVudCA9ICQuRXZlbnQoRXZlbnQkNS5ISURFKTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7CgogICAgICBpZiAoIXRoaXMuX2lzU2hvd24gfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLl9pc1Nob3duID0gZmFsc2U7CiAgICAgIHZhciB0cmFuc2l0aW9uID0gJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUkNS5GQURFKTsKCiAgICAgIGlmICh0cmFuc2l0aW9uKSB7CiAgICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gdHJ1ZTsKICAgICAgfQoKICAgICAgdGhpcy5fc2V0RXNjYXBlRXZlbnQoKTsKCiAgICAgIHRoaXMuX3NldFJlc2l6ZUV2ZW50KCk7CgogICAgICAkKGRvY3VtZW50KS5vZmYoRXZlbnQkNS5GT0NVU0lOKTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUkNS5TSE9XKTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQkNS5DTElDS19ESVNNSVNTKTsKICAgICAgJCh0aGlzLl9kaWFsb2cpLm9mZihFdmVudCQ1Lk1PVVNFRE9XTl9ESVNNSVNTKTsKCiAgICAgIGlmICh0cmFuc2l0aW9uKSB7CiAgICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLl9oaWRlTW9kYWwoZXZlbnQpOwogICAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5faGlkZU1vZGFsKCk7CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICBbd2luZG93LCB0aGlzLl9lbGVtZW50LCB0aGlzLl9kaWFsb2ddLmZvckVhY2goZnVuY3Rpb24gKGh0bWxFbGVtZW50KSB7CiAgICAgICAgcmV0dXJuICQoaHRtbEVsZW1lbnQpLm9mZihFVkVOVF9LRVkkNSk7CiAgICAgIH0pOwogICAgICAvKioKICAgICAgICogYGRvY3VtZW50YCBoYXMgMiBldmVudHMgYEV2ZW50LkZPQ1VTSU5gIGFuZCBgRXZlbnQuQ0xJQ0tfREFUQV9BUElgCiAgICAgICAqIERvIG5vdCBtb3ZlIGBkb2N1bWVudGAgaW4gYGh0bWxFbGVtZW50c2AgYXJyYXkKICAgICAgICogSXQgd2lsbCByZW1vdmUgYEV2ZW50LkNMSUNLX0RBVEFfQVBJYCBldmVudCB0aGF0IHNob3VsZCByZW1haW4KICAgICAgICovCgogICAgICAkKGRvY3VtZW50KS5vZmYoRXZlbnQkNS5GT0NVU0lOKTsKICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZJDUpOwogICAgICB0aGlzLl9jb25maWcgPSBudWxsOwogICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDsKICAgICAgdGhpcy5fZGlhbG9nID0gbnVsbDsKICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsOwogICAgICB0aGlzLl9pc1Nob3duID0gbnVsbDsKICAgICAgdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgPSBudWxsOwogICAgICB0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrID0gbnVsbDsKICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gbnVsbDsKICAgICAgdGhpcy5fc2Nyb2xsYmFyV2lkdGggPSBudWxsOwogICAgfTsKCiAgICBfcHJvdG8uaGFuZGxlVXBkYXRlID0gZnVuY3Rpb24gaGFuZGxlVXBkYXRlKCkgewogICAgICB0aGlzLl9hZGp1c3REaWFsb2coKTsKICAgIH0gLy8gUHJpdmF0ZQogICAgOwoKICAgIF9wcm90by5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHsKICAgICAgY29uZmlnID0gX29iamVjdFNwcmVhZDIoe30sIERlZmF1bHQkMywge30sIGNvbmZpZyk7CiAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUkNSwgY29uZmlnLCBEZWZhdWx0VHlwZSQzKTsKICAgICAgcmV0dXJuIGNvbmZpZzsKICAgIH07CgogICAgX3Byb3RvLl90cmlnZ2VyQmFja2Ryb3BUcmFuc2l0aW9uID0gZnVuY3Rpb24gX3RyaWdnZXJCYWNrZHJvcFRyYW5zaXRpb24oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuX2NvbmZpZy5iYWNrZHJvcCA9PT0gJ3N0YXRpYycpIHsKICAgICAgICB2YXIgaGlkZUV2ZW50UHJldmVudGVkID0gJC5FdmVudChFdmVudCQ1LkhJREVfUFJFVkVOVEVEKTsKICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoaGlkZUV2ZW50UHJldmVudGVkKTsKCiAgICAgICAgaWYgKGhpZGVFdmVudFByZXZlbnRlZC5kZWZhdWx0UHJldmVudGVkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lJDUuU1RBVElDKTsKCiAgICAgICAgdmFyIG1vZGFsVHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTsKICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDbGFzc05hbWUkNS5TVEFUSUMpOwogICAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKG1vZGFsVHJhbnNpdGlvbkR1cmF0aW9uKTsKCiAgICAgICAgdGhpcy5fZWxlbWVudC5mb2N1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaGlkZSgpOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5fc2hvd0VsZW1lbnQgPSBmdW5jdGlvbiBfc2hvd0VsZW1lbnQocmVsYXRlZFRhcmdldCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciB0cmFuc2l0aW9uID0gJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUkNS5GQURFKTsKICAgICAgdmFyIG1vZGFsQm9keSA9IHRoaXMuX2RpYWxvZyA/IHRoaXMuX2RpYWxvZy5xdWVyeVNlbGVjdG9yKFNlbGVjdG9yJDUuTU9EQUxfQk9EWSkgOiBudWxsOwoKICAgICAgaWYgKCF0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUgfHwgdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlICE9PSBOb2RlLkVMRU1FTlRfTk9ERSkgewogICAgICAgIC8vIERvbid0IG1vdmUgbW9kYWwncyBET00gcG9zaXRpb24KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2VsZW1lbnQpOwogICAgICB9CgogICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwoKICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7CgogICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsIHRydWUpOwoKICAgICAgaWYgKCQodGhpcy5fZGlhbG9nKS5oYXNDbGFzcyhDbGFzc05hbWUkNS5TQ1JPTExBQkxFKSAmJiBtb2RhbEJvZHkpIHsKICAgICAgICBtb2RhbEJvZHkuc2Nyb2xsVG9wID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9lbGVtZW50LnNjcm9sbFRvcCA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh0cmFuc2l0aW9uKSB7CiAgICAgICAgVXRpbC5yZWZsb3codGhpcy5fZWxlbWVudCk7CiAgICAgIH0KCiAgICAgICQodGhpcy5fZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lJDUuU0hPVyk7CgogICAgICBpZiAodGhpcy5fY29uZmlnLmZvY3VzKSB7CiAgICAgICAgdGhpcy5fZW5mb3JjZUZvY3VzKCk7CiAgICAgIH0KCiAgICAgIHZhciBzaG93bkV2ZW50ID0gJC5FdmVudChFdmVudCQ1LlNIT1dOLCB7CiAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldAogICAgICB9KTsKCiAgICAgIHZhciB0cmFuc2l0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiB0cmFuc2l0aW9uQ29tcGxldGUoKSB7CiAgICAgICAgaWYgKF90aGlzNC5fY29uZmlnLmZvY3VzKSB7CiAgICAgICAgICBfdGhpczQuX2VsZW1lbnQuZm9jdXMoKTsKICAgICAgICB9CgogICAgICAgIF90aGlzNC5faXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7CiAgICAgICAgJChfdGhpczQuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7CiAgICAgIH07CgogICAgICBpZiAodHJhbnNpdGlvbikgewogICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2RpYWxvZyk7CiAgICAgICAgJCh0aGlzLl9kaWFsb2cpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCB0cmFuc2l0aW9uQ29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdHJhbnNpdGlvbkNvbXBsZXRlKCk7CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLl9lbmZvcmNlRm9jdXMgPSBmdW5jdGlvbiBfZW5mb3JjZUZvY3VzKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgICQoZG9jdW1lbnQpLm9mZihFdmVudCQ1LkZPQ1VTSU4pIC8vIEd1YXJkIGFnYWluc3QgaW5maW5pdGUgZm9jdXMgbG9vcAogICAgICAub24oRXZlbnQkNS5GT0NVU0lOLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBpZiAoZG9jdW1lbnQgIT09IGV2ZW50LnRhcmdldCAmJiBfdGhpczUuX2VsZW1lbnQgIT09IGV2ZW50LnRhcmdldCAmJiAkKF90aGlzNS5fZWxlbWVudCkuaGFzKGV2ZW50LnRhcmdldCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBfdGhpczUuX2VsZW1lbnQuZm9jdXMoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICBfcHJvdG8uX3NldEVzY2FwZUV2ZW50ID0gZnVuY3Rpb24gX3NldEVzY2FwZUV2ZW50KCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLl9pc1Nob3duICYmIHRoaXMuX2NvbmZpZy5rZXlib2FyZCkgewogICAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQkNS5LRVlET1dOX0RJU01JU1MsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSBFU0NBUEVfS0VZQ09ERSQxKSB7CiAgICAgICAgICAgIF90aGlzNi5fdHJpZ2dlckJhY2tkcm9wVHJhbnNpdGlvbigpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLl9pc1Nob3duKSB7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQkNS5LRVlET1dOX0RJU01JU1MpOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5fc2V0UmVzaXplRXZlbnQgPSBmdW5jdGlvbiBfc2V0UmVzaXplRXZlbnQoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuX2lzU2hvd24pIHsKICAgICAgICAkKHdpbmRvdykub24oRXZlbnQkNS5SRVNJWkUsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNy5oYW5kbGVVcGRhdGUoZXZlbnQpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgICQod2luZG93KS5vZmYoRXZlbnQkNS5SRVNJWkUpOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5faGlkZU1vZGFsID0gZnVuY3Rpb24gX2hpZGVNb2RhbCgpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgogICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKTsKCiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLW1vZGFsJyk7CgogICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTsKCiAgICAgIHRoaXMuX3Nob3dCYWNrZHJvcChmdW5jdGlvbiAoKSB7CiAgICAgICAgJChkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUkNS5PUEVOKTsKCiAgICAgICAgX3RoaXM4Ll9yZXNldEFkanVzdG1lbnRzKCk7CgogICAgICAgIF90aGlzOC5fcmVzZXRTY3JvbGxiYXIoKTsKCiAgICAgICAgJChfdGhpczguX2VsZW1lbnQpLnRyaWdnZXIoRXZlbnQkNS5ISURERU4pOwogICAgICB9KTsKICAgIH07CgogICAgX3Byb3RvLl9yZW1vdmVCYWNrZHJvcCA9IGZ1bmN0aW9uIF9yZW1vdmVCYWNrZHJvcCgpIHsKICAgICAgaWYgKHRoaXMuX2JhY2tkcm9wKSB7CiAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlKCk7CiAgICAgICAgdGhpcy5fYmFja2Ryb3AgPSBudWxsOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5fc2hvd0JhY2tkcm9wID0gZnVuY3Rpb24gX3Nob3dCYWNrZHJvcChjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHZhciBhbmltYXRlID0gJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUkNS5GQURFKSA/IENsYXNzTmFtZSQ1LkZBREUgOiAnJzsKCiAgICAgIGlmICh0aGlzLl9pc1Nob3duICYmIHRoaXMuX2NvbmZpZy5iYWNrZHJvcCkgewogICAgICAgIHRoaXMuX2JhY2tkcm9wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgdGhpcy5fYmFja2Ryb3AuY2xhc3NOYW1lID0gQ2xhc3NOYW1lJDUuQkFDS0RST1A7CgogICAgICAgIGlmIChhbmltYXRlKSB7CiAgICAgICAgICB0aGlzLl9iYWNrZHJvcC5jbGFzc0xpc3QuYWRkKGFuaW1hdGUpOwogICAgICAgIH0KCiAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudCQ1LkNMSUNLX0RJU01JU1MsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgaWYgKF90aGlzOS5faWdub3JlQmFja2Ryb3BDbGljaykgewogICAgICAgICAgICBfdGhpczkuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzOS5fdHJpZ2dlckJhY2tkcm9wVHJhbnNpdGlvbigpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoYW5pbWF0ZSkgewogICAgICAgICAgVXRpbC5yZWZsb3codGhpcy5fYmFja2Ryb3ApOwogICAgICAgIH0KCiAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkuYWRkQ2xhc3MoQ2xhc3NOYW1lJDUuU0hPVyk7CgogICAgICAgIGlmICghY2FsbGJhY2spIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghYW5pbWF0ZSkgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBiYWNrZHJvcFRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fYmFja2Ryb3ApOwogICAgICAgICQodGhpcy5fYmFja2Ryb3ApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjYWxsYmFjaykuZW11bGF0ZVRyYW5zaXRpb25FbmQoYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb24pOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLl9pc1Nob3duICYmIHRoaXMuX2JhY2tkcm9wKSB7CiAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lJDUuU0hPVyk7CgogICAgICAgIHZhciBjYWxsYmFja1JlbW92ZSA9IGZ1bmN0aW9uIGNhbGxiYWNrUmVtb3ZlKCkgewogICAgICAgICAgX3RoaXM5Ll9yZW1vdmVCYWNrZHJvcCgpOwoKICAgICAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGlmICgkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZSQ1LkZBREUpKSB7CiAgICAgICAgICB2YXIgX2JhY2tkcm9wVHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9iYWNrZHJvcCk7CgogICAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGNhbGxiYWNrUmVtb3ZlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChfYmFja2Ryb3BUcmFuc2l0aW9uRHVyYXRpb24pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjYWxsYmFja1JlbW92ZSgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChjYWxsYmFjaykgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH0gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gdGhlIGZvbGxvd2luZyBtZXRob2RzIGFyZSB1c2VkIHRvIGhhbmRsZSBvdmVyZmxvd2luZyBtb2RhbHMKICAgIC8vIHRvZG8gKGZhdCk6IHRoZXNlIHNob3VsZCBwcm9iYWJseSBiZSByZWZhY3RvcmVkIG91dCBvZiBtb2RhbC5qcwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgOwoKICAgIF9wcm90by5fYWRqdXN0RGlhbG9nID0gZnVuY3Rpb24gX2FkanVzdERpYWxvZygpIHsKICAgICAgdmFyIGlzTW9kYWxPdmVyZmxvd2luZyA9IHRoaXMuX2VsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKCiAgICAgIGlmICghdGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgJiYgaXNNb2RhbE92ZXJmbG93aW5nKSB7CiAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IHRoaXMuX3Njcm9sbGJhcldpZHRoICsgInB4IjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX2lzQm9keU92ZXJmbG93aW5nICYmICFpc01vZGFsT3ZlcmZsb3dpbmcpIHsKICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IHRoaXMuX3Njcm9sbGJhcldpZHRoICsgInB4IjsKICAgICAgfQogICAgfTsKCiAgICBfcHJvdG8uX3Jlc2V0QWRqdXN0bWVudHMgPSBmdW5jdGlvbiBfcmVzZXRBZGp1c3RtZW50cygpIHsKICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9ICcnOwogICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9ICcnOwogICAgfTsKCiAgICBfcHJvdG8uX2NoZWNrU2Nyb2xsYmFyID0gZnVuY3Rpb24gX2NoZWNrU2Nyb2xsYmFyKCkgewogICAgICB2YXIgcmVjdCA9IGRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gcmVjdC5sZWZ0ICsgcmVjdC5yaWdodCA8IHdpbmRvdy5pbm5lcldpZHRoOwogICAgICB0aGlzLl9zY3JvbGxiYXJXaWR0aCA9IHRoaXMuX2dldFNjcm9sbGJhcldpZHRoKCk7CiAgICB9OwoKICAgIF9wcm90by5fc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gX3NldFNjcm9sbGJhcigpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuX2lzQm9keU92ZXJmbG93aW5nKSB7CiAgICAgICAgLy8gTm90ZTogRE9NTm9kZS5zdHlsZS5wYWRkaW5nUmlnaHQgcmV0dXJucyB0aGUgYWN0dWFsIHZhbHVlIG9yICcnIGlmIG5vdCBzZXQKICAgICAgICAvLyAgIHdoaWxlICQoRE9NTm9kZSkuY3NzKCdwYWRkaW5nLXJpZ2h0JykgcmV0dXJucyB0aGUgY2FsY3VsYXRlZCB2YWx1ZSBvciAwIGlmIG5vdCBzZXQKICAgICAgICB2YXIgZml4ZWRDb250ZW50ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yJDUuRklYRURfQ09OVEVOVCkpOwogICAgICAgIHZhciBzdGlja3lDb250ZW50ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yJDUuU1RJQ0tZX0NPTlRFTlQpKTsgLy8gQWRqdXN0IGZpeGVkIGNvbnRlbnQgcGFkZGluZwoKICAgICAgICAkKGZpeGVkQ29udGVudCkuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHsKICAgICAgICAgIHZhciBhY3R1YWxQYWRkaW5nID0gZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQ7CiAgICAgICAgICB2YXIgY2FsY3VsYXRlZFBhZGRpbmcgPSAkKGVsZW1lbnQpLmNzcygncGFkZGluZy1yaWdodCcpOwogICAgICAgICAgJChlbGVtZW50KS5kYXRhKCdwYWRkaW5nLXJpZ2h0JywgYWN0dWFsUGFkZGluZykuY3NzKCdwYWRkaW5nLXJpZ2h0JywgcGFyc2VGbG9hdChjYWxjdWxhdGVkUGFkZGluZykgKyBfdGhpczEwLl9zY3JvbGxiYXJXaWR0aCArICJweCIpOwogICAgICAgIH0pOyAvLyBBZGp1c3Qgc3RpY2t5IGNvbnRlbnQgbWFyZ2luCgogICAgICAgICQoc3RpY2t5Q29udGVudCkuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHsKICAgICAgICAgIHZhciBhY3R1YWxNYXJnaW4gPSBlbGVtZW50LnN0eWxlLm1hcmdpblJpZ2h0OwogICAgICAgICAgdmFyIGNhbGN1bGF0ZWRNYXJnaW4gPSAkKGVsZW1lbnQpLmNzcygnbWFyZ2luLXJpZ2h0Jyk7CiAgICAgICAgICAkKGVsZW1lbnQpLmRhdGEoJ21hcmdpbi1yaWdodCcsIGFjdHVhbE1hcmdpbikuY3NzKCdtYXJnaW4tcmlnaHQnLCBwYXJzZUZsb2F0KGNhbGN1bGF0ZWRNYXJnaW4pIC0gX3RoaXMxMC5fc2Nyb2xsYmFyV2lkdGggKyAicHgiKTsKICAgICAgICB9KTsgLy8gQWRqdXN0IGJvZHkgcGFkZGluZwoKICAgICAgICB2YXIgYWN0dWFsUGFkZGluZyA9IGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0OwogICAgICAgIHZhciBjYWxjdWxhdGVkUGFkZGluZyA9ICQoZG9jdW1lbnQuYm9keSkuY3NzKCdwYWRkaW5nLXJpZ2h0Jyk7CiAgICAgICAgJChkb2N1bWVudC5ib2R5KS5kYXRhKCdwYWRkaW5nLXJpZ2h0JywgYWN0dWFsUGFkZGluZykuY3NzKCdwYWRkaW5nLXJpZ2h0JywgcGFyc2VGbG9hdChjYWxjdWxhdGVkUGFkZGluZykgKyB0aGlzLl9zY3JvbGxiYXJXaWR0aCArICJweCIpOwogICAgICB9CgogICAgICAkKGRvY3VtZW50LmJvZHkpLmFkZENsYXNzKENsYXNzTmFtZSQ1Lk9QRU4pOwogICAgfTsKCiAgICBfcHJvdG8uX3Jlc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gX3Jlc2V0U2Nyb2xsYmFyKCkgewogICAgICAvLyBSZXN0b3JlIGZpeGVkIGNvbnRlbnQgcGFkZGluZwogICAgICB2YXIgZml4ZWRDb250ZW50ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yJDUuRklYRURfQ09OVEVOVCkpOwogICAgICAkKGZpeGVkQ29udGVudCkuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHsKICAgICAgICB2YXIgcGFkZGluZyA9ICQoZWxlbWVudCkuZGF0YSgncGFkZGluZy1yaWdodCcpOwogICAgICAgICQoZWxlbWVudCkucmVtb3ZlRGF0YSgncGFkZGluZy1yaWdodCcpOwogICAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZyA/IHBhZGRpbmcgOiAnJzsKICAgICAgfSk7IC8vIFJlc3RvcmUgc3RpY2t5IGNvbnRlbnQKCiAgICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiIiArIFNlbGVjdG9yJDUuU1RJQ0tZX0NPTlRFTlQpKTsKICAgICAgJChlbGVtZW50cykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHsKICAgICAgICB2YXIgbWFyZ2luID0gJChlbGVtZW50KS5kYXRhKCdtYXJnaW4tcmlnaHQnKTsKCiAgICAgICAgaWYgKHR5cGVvZiBtYXJnaW4gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAkKGVsZW1lbnQpLmNzcygnbWFyZ2luLXJpZ2h0JywgbWFyZ2luKS5yZW1vdmVEYXRhKCdtYXJnaW4tcmlnaHQnKTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBSZXN0b3JlIGJvZHkgcGFkZGluZwoKICAgICAgdmFyIHBhZGRpbmcgPSAkKGRvY3VtZW50LmJvZHkpLmRhdGEoJ3BhZGRpbmctcmlnaHQnKTsKICAgICAgJChkb2N1bWVudC5ib2R5KS5yZW1vdmVEYXRhKCdwYWRkaW5nLXJpZ2h0Jyk7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZyA/IHBhZGRpbmcgOiAnJzsKICAgIH07CgogICAgX3Byb3RvLl9nZXRTY3JvbGxiYXJXaWR0aCA9IGZ1bmN0aW9uIF9nZXRTY3JvbGxiYXJXaWR0aCgpIHsKICAgICAgLy8gdGh4IGQud2Fsc2gKICAgICAgdmFyIHNjcm9sbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBzY3JvbGxEaXYuY2xhc3NOYW1lID0gQ2xhc3NOYW1lJDUuU0NST0xMQkFSX01FQVNVUkVSOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcm9sbERpdik7CiAgICAgIHZhciBzY3JvbGxiYXJXaWR0aCA9IHNjcm9sbERpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpOwogICAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGg7CiAgICB9IC8vIFN0YXRpYwogICAgOwoKICAgIE1vZGFsLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZywgcmVsYXRlZFRhcmdldCkgewogICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSQ1KTsKCiAgICAgICAgdmFyIF9jb25maWcgPSBfb2JqZWN0U3ByZWFkMih7fSwgRGVmYXVsdCQzLCB7fSwgJCh0aGlzKS5kYXRhKCksIHt9LCBfdHlwZW9mKGNvbmZpZykgPT09ICdvYmplY3QnICYmIGNvbmZpZyA/IGNvbmZpZyA6IHt9KTsKCiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICBkYXRhID0gbmV3IE1vZGFsKHRoaXMsIF9jb25maWcpOwogICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZJDUsIGRhdGEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiTm8gbWV0aG9kIG5hbWVkIFwiIiArIGNvbmZpZyArICJcIiIpOwogICAgICAgICAgfQoKICAgICAgICAgIGRhdGFbY29uZmlnXShyZWxhdGVkVGFyZ2V0KTsKICAgICAgICB9IGVsc2UgaWYgKF9jb25maWcuc2hvdykgewogICAgICAgICAgZGF0YS5zaG93KHJlbGF0ZWRUYXJnZXQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIF9jcmVhdGVDbGFzcyhNb2RhbCwgbnVsbCwgW3sKICAgICAga2V5OiAiVkVSU0lPTiIsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiBWRVJTSU9OJDU7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiRGVmYXVsdCIsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiBEZWZhdWx0JDM7CiAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gTW9kYWw7CiAgfSgpOwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgoKICAkKGRvY3VtZW50KS5vbihFdmVudCQ1LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3RvciQ1LkRBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICB2YXIgdGFyZ2V0OwogICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KHRoaXMpOwoKICAgIGlmIChzZWxlY3RvcikgewogICAgICB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgIH0KCiAgICB2YXIgY29uZmlnID0gJCh0YXJnZXQpLmRhdGEoREFUQV9LRVkkNSkgPyAndG9nZ2xlJyA6IF9vYmplY3RTcHJlYWQyKHt9LCAkKHRhcmdldCkuZGF0YSgpLCB7fSwgJCh0aGlzKS5kYXRhKCkpOwoKICAgIGlmICh0aGlzLnRhZ05hbWUgPT09ICdBJyB8fCB0aGlzLnRhZ05hbWUgPT09ICdBUkVBJykgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgfQoKICAgIHZhciAkdGFyZ2V0ID0gJCh0YXJnZXQpLm9uZShFdmVudCQ1LlNIT1csIGZ1bmN0aW9uIChzaG93RXZlbnQpIHsKICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgewogICAgICAgIC8vIE9ubHkgcmVnaXN0ZXIgZm9jdXMgcmVzdG9yZXIgaWYgbW9kYWwgd2lsbCBhY3R1YWxseSBnZXQgc2hvd24KICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgICR0YXJnZXQub25lKEV2ZW50JDUuSElEREVOLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCQoX3RoaXMxMSkuaXMoJzp2aXNpYmxlJykpIHsKICAgICAgICAgIF90aGlzMTEuZm9jdXMoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgTW9kYWwuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQodGFyZ2V0KSwgY29uZmlnLCB0aGlzKTsKICB9KTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBqUXVlcnkKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCiAgJC5mbltOQU1FJDVdID0gTW9kYWwuX2pRdWVyeUludGVyZmFjZTsKICAkLmZuW05BTUUkNV0uQ29uc3RydWN0b3IgPSBNb2RhbDsKCiAgJC5mbltOQU1FJDVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuW05BTUUkNV0gPSBKUVVFUllfTk9fQ09ORkxJQ1QkNTsKICAgIHJldHVybiBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlOwogIH07CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBCb290c3RyYXAgKHY0LjQuMSk6IHRvb2xzL3Nhbml0aXplci5qcwogICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCgogIHZhciB1cmlBdHRycyA9IFsnYmFja2dyb3VuZCcsICdjaXRlJywgJ2hyZWYnLCAnaXRlbXR5cGUnLCAnbG9uZ2Rlc2MnLCAncG9zdGVyJywgJ3NyYycsICd4bGluazpocmVmJ107CiAgdmFyIEFSSUFfQVRUUklCVVRFX1BBVFRFUk4gPSAvXmFyaWEtW1x3LV0qJC9pOwogIHZhciBEZWZhdWx0V2hpdGVsaXN0ID0gewogICAgLy8gR2xvYmFsIGF0dHJpYnV0ZXMgYWxsb3dlZCBvbiBhbnkgc3VwcGxpZWQgZWxlbWVudCBiZWxvdy4KICAgICcqJzogWydjbGFzcycsICdkaXInLCAnaWQnLCAnbGFuZycsICdyb2xlJywgQVJJQV9BVFRSSUJVVEVfUEFUVEVSTl0sCiAgICBhOiBbJ3RhcmdldCcsICdocmVmJywgJ3RpdGxlJywgJ3JlbCddLAogICAgYXJlYTogW10sCiAgICBiOiBbXSwKICAgIGJyOiBbXSwKICAgIGNvbDogW10sCiAgICBjb2RlOiBbXSwKICAgIGRpdjogW10sCiAgICBlbTogW10sCiAgICBocjogW10sCiAgICBoMTogW10sCiAgICBoMjogW10sCiAgICBoMzogW10sCiAgICBoNDogW10sCiAgICBoNTogW10sCiAgICBoNjogW10sCiAgICBpOiBbXSwKICAgIGltZzogWydzcmMnLCAnYWx0JywgJ3RpdGxlJywgJ3dpZHRoJywgJ2hlaWdodCddLAogICAgbGk6IFtdLAogICAgb2w6IFtdLAogICAgcDogW10sCiAgICBwcmU6IFtdLAogICAgczogW10sCiAgICBzbWFsbDogW10sCiAgICBzcGFuOiBbXSwKICAgIHN1YjogW10sCiAgICBzdXA6IFtdLAogICAgc3Ryb25nOiBbXSwKICAgIHU6IFtdLAogICAgdWw6IFtdCiAgfTsKICAvKioKICAgKiBBIHBhdHRlcm4gdGhhdCByZWNvZ25pemVzIGEgY29tbW9ubHkgdXNlZnVsIHN1YnNldCBvZiBVUkxzIHRoYXQgYXJlIHNhZmUuCiAgICoKICAgKiBTaG91dG91dCB0byBBbmd1bGFyIDcgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci9ibG9iLzcuMi40L3BhY2thZ2VzL2NvcmUvc3JjL3Nhbml0aXphdGlvbi91cmxfc2FuaXRpemVyLnRzCiAgICovCgogIHZhciBTQUZFX1VSTF9QQVRURVJOID0gL14oPzooPzpodHRwcz98bWFpbHRvfGZ0cHx0ZWx8ZmlsZSk6fFteJjovPyNdKig/OlsvPyNdfCQpKS9naTsKICAvKioKICAgKiBBIHBhdHRlcm4gdGhhdCBtYXRjaGVzIHNhZmUgZGF0YSBVUkxzLiBPbmx5IG1hdGNoZXMgaW1hZ2UsIHZpZGVvIGFuZCBhdWRpbyB0eXBlcy4KICAgKgogICAqIFNob3V0b3V0IHRvIEFuZ3VsYXIgNyBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyL2Jsb2IvNy4yLjQvcGFja2FnZXMvY29yZS9zcmMvc2FuaXRpemF0aW9uL3VybF9zYW5pdGl6ZXIudHMKICAgKi8KCiAgdmFyIERBVEFfVVJMX1BBVFRFUk4gPSAvXmRhdGE6KD86aW1hZ2VcLyg/OmJtcHxnaWZ8anBlZ3xqcGd8cG5nfHRpZmZ8d2VicCl8dmlkZW9cLyg/Om1wZWd8bXA0fG9nZ3x3ZWJtKXxhdWRpb1wvKD86bXAzfG9nYXxvZ2d8b3B1cykpO2Jhc2U2NCxbYS16MC05Ky9dKz0qJC9pOwoKICBmdW5jdGlvbiBhbGxvd2VkQXR0cmlidXRlKGF0dHIsIGFsbG93ZWRBdHRyaWJ1dGVMaXN0KSB7CiAgICB2YXIgYXR0ck5hbWUgPSBhdHRyLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKGFsbG93ZWRBdHRyaWJ1dGVMaXN0LmluZGV4T2YoYXR0ck5hbWUpICE9PSAtMSkgewogICAgICBpZiAodXJpQXR0cnMuaW5kZXhPZihhdHRyTmFtZSkgIT09IC0xKSB7CiAgICAgICAgcmV0dXJuIEJvb2xlYW4oYXR0ci5ub2RlVmFsdWUubWF0Y2goU0FGRV9VUkxfUEFUVEVSTikgfHwgYXR0ci5ub2RlVmFsdWUubWF0Y2goREFUQV9VUkxfUEFUVEVSTikpOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICB2YXIgcmVnRXhwID0gYWxsb3dlZEF0dHJpYnV0ZUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChhdHRyUmVnZXgpIHsKICAgICAgcmV0dXJuIGF0dHJSZWdleCBpbnN0YW5jZW9mIFJlZ0V4cDsKICAgIH0pOyAvLyBDaGVjayBpZiBhIHJlZ3VsYXIgZXhwcmVzc2lvbiB2YWxpZGF0ZXMgdGhlIGF0dHJpYnV0ZS4KCiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJlZ0V4cC5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgaWYgKGF0dHJOYW1lLm1hdGNoKHJlZ0V4cFtpXSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIHNhbml0aXplSHRtbCh1bnNhZmVIdG1sLCB3aGl0ZUxpc3QsIHNhbml0aXplRm4pIHsKICAgIGlmICh1bnNhZmVIdG1sLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gdW5zYWZlSHRtbDsKICAgIH0KCiAgICBpZiAoc2FuaXRpemVGbiAmJiB0eXBlb2Ygc2FuaXRpemVGbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm4gc2FuaXRpemVGbih1bnNhZmVIdG1sKTsKICAgIH0KCiAgICB2YXIgZG9tUGFyc2VyID0gbmV3IHdpbmRvdy5ET01QYXJzZXIoKTsKICAgIHZhciBjcmVhdGVkRG9jdW1lbnQgPSBkb21QYXJzZXIucGFyc2VGcm9tU3RyaW5nKHVuc2FmZUh0bWwsICd0ZXh0L2h0bWwnKTsKICAgIHZhciB3aGl0ZWxpc3RLZXlzID0gT2JqZWN0LmtleXMod2hpdGVMaXN0KTsKICAgIHZhciBlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwoY3JlYXRlZERvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvckFsbCgnKicpKTsKCiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpLCBsZW4pIHsKICAgICAgdmFyIGVsID0gZWxlbWVudHNbaV07CiAgICAgIHZhciBlbE5hbWUgPSBlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoKICAgICAgaWYgKHdoaXRlbGlzdEtleXMuaW5kZXhPZihlbC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSA9PT0gLTEpIHsKICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTsKICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgfQoKICAgICAgdmFyIGF0dHJpYnV0ZUxpc3QgPSBbXS5zbGljZS5jYWxsKGVsLmF0dHJpYnV0ZXMpOwogICAgICB2YXIgd2hpdGVsaXN0ZWRBdHRyaWJ1dGVzID0gW10uY29uY2F0KHdoaXRlTGlzdFsnKiddIHx8IFtdLCB3aGl0ZUxpc3RbZWxOYW1lXSB8fCBbXSk7CiAgICAgIGF0dHJpYnV0ZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoYXR0cikgewogICAgICAgIGlmICghYWxsb3dlZEF0dHJpYnV0ZShhdHRyLCB3aGl0ZWxpc3RlZEF0dHJpYnV0ZXMpKSB7CiAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5ub2RlTmFtZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIHZhciBfcmV0ID0gX2xvb3AoaSk7CgogICAgICBpZiAoX3JldCA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICB9CgogICAgcmV0dXJuIGNyZWF0ZWREb2N1bWVudC5ib2R5LmlubmVySFRNTDsKICB9CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogQ29uc3RhbnRzCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgoKICB2YXIgTkFNRSQ2ID0gJ3Rvb2x0aXAnOwogIHZhciBWRVJTSU9OJDYgPSAnNC40LjEnOwogIHZhciBEQVRBX0tFWSQ2ID0gJ2JzLnRvb2x0aXAnOwogIHZhciBFVkVOVF9LRVkkNiA9ICIuIiArIERBVEFfS0VZJDY7CiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCQ2ID0gJC5mbltOQU1FJDZdOwogIHZhciBDTEFTU19QUkVGSVggPSAnYnMtdG9vbHRpcCc7CiAgdmFyIEJTQ0xTX1BSRUZJWF9SRUdFWCA9IG5ldyBSZWdFeHAoIihefFxccykiICsgQ0xBU1NfUFJFRklYICsgIlxcUysiLCAnZycpOwogIHZhciBESVNBTExPV0VEX0FUVFJJQlVURVMgPSBbJ3Nhbml0aXplJywgJ3doaXRlTGlzdCcsICdzYW5pdGl6ZUZuJ107CiAgdmFyIERlZmF1bHRUeXBlJDQgPSB7CiAgICBhbmltYXRpb246ICdib29sZWFuJywKICAgIHRlbXBsYXRlOiAnc3RyaW5nJywKICAgIHRpdGxlOiAnKHN0cmluZ3xlbGVtZW50fGZ1bmN0aW9uKScsCiAgICB0cmlnZ2VyOiAnc3RyaW5nJywKICAgIGRlbGF5OiAnKG51bWJlcnxvYmplY3QpJywKICAgIGh0bWw6ICdib29sZWFuJywKICAgIHNlbGVjdG9yOiAnKHN0cmluZ3xib29sZWFuKScsCiAgICBwbGFjZW1lbnQ6ICcoc3RyaW5nfGZ1bmN0aW9uKScsCiAgICBvZmZzZXQ6ICcobnVtYmVyfHN0cmluZ3xmdW5jdGlvbiknLAogICAgY29udGFpbmVyOiAnKHN0cmluZ3xlbGVtZW50fGJvb2xlYW4pJywKICAgIGZhbGxiYWNrUGxhY2VtZW50OiAnKHN0cmluZ3xhcnJheSknLAogICAgYm91bmRhcnk6ICcoc3RyaW5nfGVsZW1lbnQpJywKICAgIHNhbml0aXplOiAnYm9vbGVhbicsCiAgICBzYW5pdGl6ZUZuOiAnKG51bGx8ZnVuY3Rpb24pJywKICAgIHdoaXRlTGlzdDogJ29iamVjdCcsCiAgICBwb3BwZXJDb25maWc6ICcobnVsbHxvYmplY3QpJwogIH07CiAgdmFyIEF0dGFjaG1lbnRNYXAkMSA9IHsKICAgIEFVVE86ICdhdXRvJywKICAgIFRPUDogJ3RvcCcsCiAgICBSSUdIVDogJ3JpZ2h0JywKICAgIEJPVFRPTTogJ2JvdHRvbScsCiAgICBMRUZUOiAnbGVmdCcKICB9OwogIHZhciBEZWZhdWx0JDQgPSB7CiAgICBhbmltYXRpb246IHRydWUsCiAgICB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9InRvb2x0aXAiIHJvbGU9InRvb2x0aXAiPicgKyAnPGRpdiBjbGFzcz0iYXJyb3ciPjwvZGl2PicgKyAnPGRpdiBjbGFzcz0idG9vbHRpcC1pbm5lciI+PC9kaXY+PC9kaXY+JywKICAgIHRyaWdnZXI6ICdob3ZlciBmb2N1cycsCiAgICB0aXRsZTogJycsCiAgICBkZWxheTogMCwKICAgIGh0bWw6IGZhbHNlLAogICAgc2VsZWN0b3I6IGZhbHNlLAogICAgcGxhY2VtZW50OiAndG9wJywKICAgIG9mZnNldDogMCwKICAgIGNvbnRhaW5lcjogZmFsc2UsCiAgICBmYWxsYmFja1BsYWNlbWVudDogJ2ZsaXAnLAogICAgYm91bmRhcnk6ICdzY3JvbGxQYXJlbnQnLAogICAgc2FuaXRpemU6IHRydWUsCiAgICBzYW5pdGl6ZUZuOiBudWxsLAogICAgd2hpdGVMaXN0OiBEZWZhdWx0V2hpdGVsaXN0LAogICAgcG9wcGVyQ29uZmlnOiBudWxsCiAgfTsKICB2YXIgSG92ZXJTdGF0ZSA9IHsKICAgIFNIT1c6ICdzaG93JywKICAgIE9VVDogJ291dCcKICB9OwogIHZhciBFdmVudCQ2ID0gewogICAgSElERTogImhpZGUiICsgRVZFTlRfS0VZJDYsCiAgICBISURERU46ICJoaWRkZW4iICsgRVZFTlRfS0VZJDYsCiAgICBTSE9XOiAic2hvdyIgKyBFVkVOVF9LRVkkNiwKICAgIFNIT1dOOiAic2hvd24iICsgRVZFTlRfS0VZJDYsCiAgICBJTlNFUlRFRDogImluc2VydGVkIiArIEVWRU5UX0tFWSQ2LAogICAgQ0xJQ0s6ICJjbGljayIgKyBFVkVOVF9LRVkkNiwKICAgIEZPQ1VTSU46ICJmb2N1c2luIiArIEVWRU5UX0tFWSQ2LAogICAgRk9DVVNPVVQ6ICJmb2N1c291dCIgKyBFVkVOVF9LRVkkNiwKICAgIE1PVVNFRU5URVI6ICJtb3VzZWVudGVyIiArIEVWRU5UX0tFWSQ2LAogICAgTU9VU0VMRUFWRTogIm1vdXNlbGVhdmUiICsgRVZFTlRfS0VZJDYKICB9OwogIHZhciBDbGFzc05hbWUkNiA9IHsKICAgIEZBREU6ICdmYWRlJywKICAgIFNIT1c6ICdzaG93JwogIH07CiAgdmFyIFNlbGVjdG9yJDYgPSB7CiAgICBUT09MVElQOiAnLnRvb2x0aXAnLAogICAgVE9PTFRJUF9JTk5FUjogJy50b29sdGlwLWlubmVyJywKICAgIEFSUk9XOiAnLmFycm93JwogIH07CiAgdmFyIFRyaWdnZXIgPSB7CiAgICBIT1ZFUjogJ2hvdmVyJywKICAgIEZPQ1VTOiAnZm9jdXMnLAogICAgQ0xJQ0s6ICdjbGljaycsCiAgICBNQU5VQUw6ICdtYW51YWwnCiAgfTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBDbGFzcyBEZWZpbml0aW9uCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgogIHZhciBUb29sdGlwID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFRvb2x0aXAoZWxlbWVudCwgY29uZmlnKSB7CiAgICAgIGlmICh0eXBlb2YgUG9wcGVyID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Jvb3RzdHJhcFwncyB0b29sdGlwcyByZXF1aXJlIFBvcHBlci5qcyAoaHR0cHM6Ly9wb3BwZXIuanMub3JnLyknKTsKICAgICAgfSAvLyBwcml2YXRlCgoKICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5fdGltZW91dCA9IDA7CiAgICAgIHRoaXMuX2hvdmVyU3RhdGUgPSAnJzsKICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlciA9IHt9OwogICAgICB0aGlzLl9wb3BwZXIgPSBudWxsOyAvLyBQcm90ZWN0ZWQKCiAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7CiAgICAgIHRoaXMuY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7CiAgICAgIHRoaXMudGlwID0gbnVsbDsKCiAgICAgIHRoaXMuX3NldExpc3RlbmVycygpOwogICAgfSAvLyBHZXR0ZXJzCgoKICAgIHZhciBfcHJvdG8gPSBUb29sdGlwLnByb3RvdHlwZTsgLy8gUHVibGljCgogICAgX3Byb3RvLmVuYWJsZSA9IGZ1bmN0aW9uIGVuYWJsZSgpIHsKICAgICAgdGhpcy5faXNFbmFibGVkID0gdHJ1ZTsKICAgIH07CgogICAgX3Byb3RvLmRpc2FibGUgPSBmdW5jdGlvbiBkaXNhYmxlKCkgewogICAgICB0aGlzLl9pc0VuYWJsZWQgPSBmYWxzZTsKICAgIH07CgogICAgX3Byb3RvLnRvZ2dsZUVuYWJsZWQgPSBmdW5jdGlvbiB0b2dnbGVFbmFibGVkKCkgewogICAgICB0aGlzLl9pc0VuYWJsZWQgPSAhdGhpcy5faXNFbmFibGVkOwogICAgfTsKCiAgICBfcHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKGV2ZW50KSB7CiAgICAgIGlmICghdGhpcy5faXNFbmFibGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoZXZlbnQpIHsKICAgICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7CiAgICAgICAgdmFyIGNvbnRleHQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSk7CgogICAgICAgIGlmICghY29udGV4dCkgewogICAgICAgICAgY29udGV4dCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGV2ZW50LmN1cnJlbnRUYXJnZXQsIHRoaXMuX2dldERlbGVnYXRlQ29uZmlnKCkpOwogICAgICAgICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKGRhdGFLZXksIGNvbnRleHQpOwogICAgICAgIH0KCiAgICAgICAgY29udGV4dC5fYWN0aXZlVHJpZ2dlci5jbGljayA9ICFjb250ZXh0Ll9hY3RpdmVUcmlnZ2VyLmNsaWNrOwoKICAgICAgICBpZiAoY29udGV4dC5faXNXaXRoQWN0aXZlVHJpZ2dlcigpKSB7CiAgICAgICAgICBjb250ZXh0Ll9lbnRlcihudWxsLCBjb250ZXh0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29udGV4dC5fbGVhdmUobnVsbCwgY29udGV4dCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmICgkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKS5oYXNDbGFzcyhDbGFzc05hbWUkNi5TSE9XKSkgewogICAgICAgICAgdGhpcy5fbGVhdmUobnVsbCwgdGhpcyk7CgogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5fZW50ZXIobnVsbCwgdGhpcyk7CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7CiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsIHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVkpOwogICAgICAkKHRoaXMuZWxlbWVudCkub2ZmKHRoaXMuY29uc3RydWN0b3IuRVZFTlRfS0VZKTsKICAgICAgJCh0aGlzLmVsZW1lbnQpLmNsb3Nlc3QoJy5tb2RhbCcpLm9mZignaGlkZS5icy5tb2RhbCcsIHRoaXMuX2hpZGVNb2RhbEhhbmRsZXIpOwoKICAgICAgaWYgKHRoaXMudGlwKSB7CiAgICAgICAgJCh0aGlzLnRpcCkucmVtb3ZlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuX2lzRW5hYmxlZCA9IG51bGw7CiAgICAgIHRoaXMuX3RpbWVvdXQgPSBudWxsOwogICAgICB0aGlzLl9ob3ZlclN0YXRlID0gbnVsbDsKICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlciA9IG51bGw7CgogICAgICBpZiAodGhpcy5fcG9wcGVyKSB7CiAgICAgICAgdGhpcy5fcG9wcGVyLmRlc3Ryb3koKTsKICAgICAgfQoKICAgICAgdGhpcy5fcG9wcGVyID0gbnVsbDsKICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDsKICAgICAgdGhpcy5jb25maWcgPSBudWxsOwogICAgICB0aGlzLnRpcCA9IG51bGw7CiAgICB9OwoKICAgIF9wcm90by5zaG93ID0gZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICgkKHRoaXMuZWxlbWVudCkuY3NzKCdkaXNwbGF5JykgPT09ICdub25lJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIHVzZSBzaG93IG9uIHZpc2libGUgZWxlbWVudHMnKTsKICAgICAgfQoKICAgICAgdmFyIHNob3dFdmVudCA9ICQuRXZlbnQodGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5TSE9XKTsKCiAgICAgIGlmICh0aGlzLmlzV2l0aENvbnRlbnQoKSAmJiB0aGlzLl9pc0VuYWJsZWQpIHsKICAgICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcihzaG93RXZlbnQpOwogICAgICAgIHZhciBzaGFkb3dSb290ID0gVXRpbC5maW5kU2hhZG93Um9vdCh0aGlzLmVsZW1lbnQpOwogICAgICAgIHZhciBpc0luVGhlRG9tID0gJC5jb250YWlucyhzaGFkb3dSb290ICE9PSBudWxsID8gc2hhZG93Um9vdCA6IHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgdGhpcy5lbGVtZW50KTsKCiAgICAgICAgaWYgKHNob3dFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fCAhaXNJblRoZURvbSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpOwogICAgICAgIHZhciB0aXBJZCA9IFV0aWwuZ2V0VUlEKHRoaXMuY29uc3RydWN0b3IuTkFNRSk7CiAgICAgICAgdGlwLnNldEF0dHJpYnV0ZSgnaWQnLCB0aXBJZCk7CiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsIHRpcElkKTsKICAgICAgICB0aGlzLnNldENvbnRlbnQoKTsKCiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmFuaW1hdGlvbikgewogICAgICAgICAgJCh0aXApLmFkZENsYXNzKENsYXNzTmFtZSQ2LkZBREUpOwogICAgICAgIH0KCiAgICAgICAgdmFyIHBsYWNlbWVudCA9IHR5cGVvZiB0aGlzLmNvbmZpZy5wbGFjZW1lbnQgPT09ICdmdW5jdGlvbicgPyB0aGlzLmNvbmZpZy5wbGFjZW1lbnQuY2FsbCh0aGlzLCB0aXAsIHRoaXMuZWxlbWVudCkgOiB0aGlzLmNvbmZpZy5wbGFjZW1lbnQ7CgogICAgICAgIHZhciBhdHRhY2htZW50ID0gdGhpcy5fZ2V0QXR0YWNobWVudChwbGFjZW1lbnQpOwoKICAgICAgICB0aGlzLmFkZEF0dGFjaG1lbnRDbGFzcyhhdHRhY2htZW50KTsKCiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuX2dldENvbnRhaW5lcigpOwoKICAgICAgICAkKHRpcCkuZGF0YSh0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZLCB0aGlzKTsKCiAgICAgICAgaWYgKCEkLmNvbnRhaW5zKHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgdGhpcy50aXApKSB7CiAgICAgICAgICAkKHRpcCkuYXBwZW5kVG8oY29udGFpbmVyKTsKICAgICAgICB9CgogICAgICAgICQodGhpcy5lbGVtZW50KS50cmlnZ2VyKHRoaXMuY29uc3RydWN0b3IuRXZlbnQuSU5TRVJURUQpOwogICAgICAgIHRoaXMuX3BvcHBlciA9IG5ldyBQb3BwZXIodGhpcy5lbGVtZW50LCB0aXAsIHRoaXMuX2dldFBvcHBlckNvbmZpZyhhdHRhY2htZW50KSk7CiAgICAgICAgJCh0aXApLmFkZENsYXNzKENsYXNzTmFtZSQ2LlNIT1cpOyAvLyBJZiB0aGlzIGlzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2Ugd2UgYWRkIGV4dHJhCiAgICAgICAgLy8gZW1wdHkgbW91c2VvdmVyIGxpc3RlbmVycyB0byB0aGUgYm9keSdzIGltbWVkaWF0ZSBjaGlsZHJlbjsKICAgICAgICAvLyBvbmx5IG5lZWRlZCBiZWNhdXNlIG9mIGJyb2tlbiBldmVudCBkZWxlZ2F0aW9uIG9uIGlPUwogICAgICAgIC8vIGh0dHBzOi8vd3d3LnF1aXJrc21vZGUub3JnL2Jsb2cvYXJjaGl2ZXMvMjAxNC8wMi9tb3VzZV9ldmVudF9idWIuaHRtbAoKICAgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLmNoaWxkcmVuKCkub24oJ21vdXNlb3ZlcicsIG51bGwsICQubm9vcCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHsKICAgICAgICAgIGlmIChfdGhpcy5jb25maWcuYW5pbWF0aW9uKSB7CiAgICAgICAgICAgIF90aGlzLl9maXhUcmFuc2l0aW9uKCk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIHByZXZIb3ZlclN0YXRlID0gX3RoaXMuX2hvdmVyU3RhdGU7CiAgICAgICAgICBfdGhpcy5faG92ZXJTdGF0ZSA9IG51bGw7CiAgICAgICAgICAkKF90aGlzLmVsZW1lbnQpLnRyaWdnZXIoX3RoaXMuY29uc3RydWN0b3IuRXZlbnQuU0hPV04pOwoKICAgICAgICAgIGlmIChwcmV2SG92ZXJTdGF0ZSA9PT0gSG92ZXJTdGF0ZS5PVVQpIHsKICAgICAgICAgICAgX3RoaXMuX2xlYXZlKG51bGwsIF90aGlzKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBpZiAoJCh0aGlzLnRpcCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDYuRkFERSkpIHsKICAgICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMudGlwKTsKICAgICAgICAgICQodGhpcy50aXApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29tcGxldGUoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLmhpZGUgPSBmdW5jdGlvbiBoaWRlKGNhbGxiYWNrKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHRpcCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpOwogICAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudCh0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkhJREUpOwoKICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7CiAgICAgICAgaWYgKF90aGlzMi5faG92ZXJTdGF0ZSAhPT0gSG92ZXJTdGF0ZS5TSE9XICYmIHRpcC5wYXJlbnROb2RlKSB7CiAgICAgICAgICB0aXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aXApOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLl9jbGVhblRpcENsYXNzKCk7CgogICAgICAgIF90aGlzMi5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpOwoKICAgICAgICAkKF90aGlzMi5lbGVtZW50KS50cmlnZ2VyKF90aGlzMi5jb25zdHJ1Y3Rvci5FdmVudC5ISURERU4pOwoKICAgICAgICBpZiAoX3RoaXMyLl9wb3BwZXIgIT09IG51bGwpIHsKICAgICAgICAgIF90aGlzMi5fcG9wcGVyLmRlc3Ryb3koKTsKICAgICAgICB9CgogICAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcihoaWRlRXZlbnQpOwoKICAgICAgaWYgKGhpZGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgJCh0aXApLnJlbW92ZUNsYXNzKENsYXNzTmFtZSQ2LlNIT1cpOyAvLyBJZiB0aGlzIGlzIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2Ugd2UgcmVtb3ZlIHRoZSBleHRyYQogICAgICAvLyBlbXB0eSBtb3VzZW92ZXIgbGlzdGVuZXJzIHdlIGFkZGVkIGZvciBpT1Mgc3VwcG9ydAoKICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgewogICAgICAgICQoZG9jdW1lbnQuYm9keSkuY2hpbGRyZW4oKS5vZmYoJ21vdXNlb3ZlcicsIG51bGwsICQubm9vcCk7CiAgICAgIH0KCiAgICAgIHRoaXMuX2FjdGl2ZVRyaWdnZXJbVHJpZ2dlci5DTElDS10gPSBmYWxzZTsKICAgICAgdGhpcy5fYWN0aXZlVHJpZ2dlcltUcmlnZ2VyLkZPQ1VTXSA9IGZhbHNlOwogICAgICB0aGlzLl9hY3RpdmVUcmlnZ2VyW1RyaWdnZXIuSE9WRVJdID0gZmFsc2U7CgogICAgICBpZiAoJCh0aGlzLnRpcCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDYuRkFERSkpIHsKICAgICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aXApOwogICAgICAgICQodGlwKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29tcGxldGUoKTsKICAgICAgfQoKICAgICAgdGhpcy5faG92ZXJTdGF0ZSA9ICcnOwogICAgfTsKCiAgICBfcHJvdG8udXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICBpZiAodGhpcy5fcG9wcGVyICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy5fcG9wcGVyLnNjaGVkdWxlVXBkYXRlKCk7CiAgICAgIH0KICAgIH0gLy8gUHJvdGVjdGVkCiAgICA7CgogICAgX3Byb3RvLmlzV2l0aENvbnRlbnQgPSBmdW5jdGlvbiBpc1dpdGhDb250ZW50KCkgewogICAgICByZXR1cm4gQm9vbGVhbih0aGlzLmdldFRpdGxlKCkpOwogICAgfTsKCiAgICBfcHJvdG8uYWRkQXR0YWNobWVudENsYXNzID0gZnVuY3Rpb24gYWRkQXR0YWNobWVudENsYXNzKGF0dGFjaG1lbnQpIHsKICAgICAgJCh0aGlzLmdldFRpcEVsZW1lbnQoKSkuYWRkQ2xhc3MoQ0xBU1NfUFJFRklYICsgIi0iICsgYXR0YWNobWVudCk7CiAgICB9OwoKICAgIF9wcm90by5nZXRUaXBFbGVtZW50ID0gZnVuY3Rpb24gZ2V0VGlwRWxlbWVudCgpIHsKICAgICAgdGhpcy50aXAgPSB0aGlzLnRpcCB8fCAkKHRoaXMuY29uZmlnLnRlbXBsYXRlKVswXTsKICAgICAgcmV0dXJuIHRoaXMudGlwOwogICAgfTsKCiAgICBfcHJvdG8uc2V0Q29udGVudCA9IGZ1bmN0aW9uIHNldENvbnRlbnQoKSB7CiAgICAgIHZhciB0aXAgPSB0aGlzLmdldFRpcEVsZW1lbnQoKTsKICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkKHRpcC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yJDYuVE9PTFRJUF9JTk5FUikpLCB0aGlzLmdldFRpdGxlKCkpOwogICAgICAkKHRpcCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lJDYuRkFERSArICIgIiArIENsYXNzTmFtZSQ2LlNIT1cpOwogICAgfTsKCiAgICBfcHJvdG8uc2V0RWxlbWVudENvbnRlbnQgPSBmdW5jdGlvbiBzZXRFbGVtZW50Q29udGVudCgkZWxlbWVudCwgY29udGVudCkgewogICAgICBpZiAoX3R5cGVvZihjb250ZW50KSA9PT0gJ29iamVjdCcgJiYgKGNvbnRlbnQubm9kZVR5cGUgfHwgY29udGVudC5qcXVlcnkpKSB7CiAgICAgICAgLy8gQ29udGVudCBpcyBhIERPTSBub2RlIG9yIGEgalF1ZXJ5CiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmh0bWwpIHsKICAgICAgICAgIGlmICghJChjb250ZW50KS5wYXJlbnQoKS5pcygkZWxlbWVudCkpIHsKICAgICAgICAgICAgJGVsZW1lbnQuZW1wdHkoKS5hcHBlbmQoY29udGVudCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICRlbGVtZW50LnRleHQoJChjb250ZW50KS50ZXh0KCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5jb25maWcuaHRtbCkgewogICAgICAgIGlmICh0aGlzLmNvbmZpZy5zYW5pdGl6ZSkgewogICAgICAgICAgY29udGVudCA9IHNhbml0aXplSHRtbChjb250ZW50LCB0aGlzLmNvbmZpZy53aGl0ZUxpc3QsIHRoaXMuY29uZmlnLnNhbml0aXplRm4pOwogICAgICAgIH0KCiAgICAgICAgJGVsZW1lbnQuaHRtbChjb250ZW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkZWxlbWVudC50ZXh0KGNvbnRlbnQpOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5nZXRUaXRsZSA9IGZ1bmN0aW9uIGdldFRpdGxlKCkgewogICAgICB2YXIgdGl0bGUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJyk7CgogICAgICBpZiAoIXRpdGxlKSB7CiAgICAgICAgdGl0bGUgPSB0eXBlb2YgdGhpcy5jb25maWcudGl0bGUgPT09ICdmdW5jdGlvbicgPyB0aGlzLmNvbmZpZy50aXRsZS5jYWxsKHRoaXMuZWxlbWVudCkgOiB0aGlzLmNvbmZpZy50aXRsZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRpdGxlOwogICAgfSAvLyBQcml2YXRlCiAgICA7CgogICAgX3Byb3RvLl9nZXRQb3BwZXJDb25maWcgPSBmdW5jdGlvbiBfZ2V0UG9wcGVyQ29uZmlnKGF0dGFjaG1lbnQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgZGVmYXVsdEJzQ29uZmlnID0gewogICAgICAgIHBsYWNlbWVudDogYXR0YWNobWVudCwKICAgICAgICBtb2RpZmllcnM6IHsKICAgICAgICAgIG9mZnNldDogdGhpcy5fZ2V0T2Zmc2V0KCksCiAgICAgICAgICBmbGlwOiB7CiAgICAgICAgICAgIGJlaGF2aW9yOiB0aGlzLmNvbmZpZy5mYWxsYmFja1BsYWNlbWVudAogICAgICAgICAgfSwKICAgICAgICAgIGFycm93OiB7CiAgICAgICAgICAgIGVsZW1lbnQ6IFNlbGVjdG9yJDYuQVJST1cKICAgICAgICAgIH0sCiAgICAgICAgICBwcmV2ZW50T3ZlcmZsb3c6IHsKICAgICAgICAgICAgYm91bmRhcmllc0VsZW1lbnQ6IHRoaXMuY29uZmlnLmJvdW5kYXJ5CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvbkNyZWF0ZTogZnVuY3Rpb24gb25DcmVhdGUoZGF0YSkgewogICAgICAgICAgaWYgKGRhdGEub3JpZ2luYWxQbGFjZW1lbnQgIT09IGRhdGEucGxhY2VtZW50KSB7CiAgICAgICAgICAgIF90aGlzMy5faGFuZGxlUG9wcGVyUGxhY2VtZW50Q2hhbmdlKGRhdGEpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uIG9uVXBkYXRlKGRhdGEpIHsKICAgICAgICAgIHJldHVybiBfdGhpczMuX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZShkYXRhKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkMih7fSwgZGVmYXVsdEJzQ29uZmlnLCB7fSwgdGhpcy5jb25maWcucG9wcGVyQ29uZmlnKTsKICAgIH07CgogICAgX3Byb3RvLl9nZXRPZmZzZXQgPSBmdW5jdGlvbiBfZ2V0T2Zmc2V0KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBvZmZzZXQgPSB7fTsKCiAgICAgIGlmICh0eXBlb2YgdGhpcy5jb25maWcub2Zmc2V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgb2Zmc2V0LmZuID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGRhdGEub2Zmc2V0cyA9IF9vYmplY3RTcHJlYWQyKHt9LCBkYXRhLm9mZnNldHMsIHt9LCBfdGhpczQuY29uZmlnLm9mZnNldChkYXRhLm9mZnNldHMsIF90aGlzNC5lbGVtZW50KSB8fCB7fSk7CiAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIG9mZnNldC5vZmZzZXQgPSB0aGlzLmNvbmZpZy5vZmZzZXQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBvZmZzZXQ7CiAgICB9OwoKICAgIF9wcm90by5fZ2V0Q29udGFpbmVyID0gZnVuY3Rpb24gX2dldENvbnRhaW5lcigpIHsKICAgICAgaWYgKHRoaXMuY29uZmlnLmNvbnRhaW5lciA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keTsKICAgICAgfQoKICAgICAgaWYgKFV0aWwuaXNFbGVtZW50KHRoaXMuY29uZmlnLmNvbnRhaW5lcikpIHsKICAgICAgICByZXR1cm4gJCh0aGlzLmNvbmZpZy5jb250YWluZXIpOwogICAgICB9CgogICAgICByZXR1cm4gJChkb2N1bWVudCkuZmluZCh0aGlzLmNvbmZpZy5jb250YWluZXIpOwogICAgfTsKCiAgICBfcHJvdG8uX2dldEF0dGFjaG1lbnQgPSBmdW5jdGlvbiBfZ2V0QXR0YWNobWVudChwbGFjZW1lbnQpIHsKICAgICAgcmV0dXJuIEF0dGFjaG1lbnRNYXAkMVtwbGFjZW1lbnQudG9VcHBlckNhc2UoKV07CiAgICB9OwoKICAgIF9wcm90by5fc2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gX3NldExpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgdHJpZ2dlcnMgPSB0aGlzLmNvbmZpZy50cmlnZ2VyLnNwbGl0KCcgJyk7CiAgICAgIHRyaWdnZXJzLmZvckVhY2goZnVuY3Rpb24gKHRyaWdnZXIpIHsKICAgICAgICBpZiAodHJpZ2dlciA9PT0gJ2NsaWNrJykgewogICAgICAgICAgJChfdGhpczUuZWxlbWVudCkub24oX3RoaXM1LmNvbnN0cnVjdG9yLkV2ZW50LkNMSUNLLCBfdGhpczUuY29uZmlnLnNlbGVjdG9yLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzNS50b2dnbGUoZXZlbnQpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmICh0cmlnZ2VyICE9PSBUcmlnZ2VyLk1BTlVBTCkgewogICAgICAgICAgdmFyIGV2ZW50SW4gPSB0cmlnZ2VyID09PSBUcmlnZ2VyLkhPVkVSID8gX3RoaXM1LmNvbnN0cnVjdG9yLkV2ZW50Lk1PVVNFRU5URVIgOiBfdGhpczUuY29uc3RydWN0b3IuRXZlbnQuRk9DVVNJTjsKICAgICAgICAgIHZhciBldmVudE91dCA9IHRyaWdnZXIgPT09IFRyaWdnZXIuSE9WRVIgPyBfdGhpczUuY29uc3RydWN0b3IuRXZlbnQuTU9VU0VMRUFWRSA6IF90aGlzNS5jb25zdHJ1Y3Rvci5FdmVudC5GT0NVU09VVDsKICAgICAgICAgICQoX3RoaXM1LmVsZW1lbnQpLm9uKGV2ZW50SW4sIF90aGlzNS5jb25maWcuc2VsZWN0b3IsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXM1Ll9lbnRlcihldmVudCk7CiAgICAgICAgICB9KS5vbihldmVudE91dCwgX3RoaXM1LmNvbmZpZy5zZWxlY3RvciwgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIHJldHVybiBfdGhpczUuX2xlYXZlKGV2ZW50KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICB0aGlzLl9oaWRlTW9kYWxIYW5kbGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpczUuZWxlbWVudCkgewogICAgICAgICAgX3RoaXM1LmhpZGUoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAkKHRoaXMuZWxlbWVudCkuY2xvc2VzdCgnLm1vZGFsJykub24oJ2hpZGUuYnMubW9kYWwnLCB0aGlzLl9oaWRlTW9kYWxIYW5kbGVyKTsKCiAgICAgIGlmICh0aGlzLmNvbmZpZy5zZWxlY3RvcikgewogICAgICAgIHRoaXMuY29uZmlnID0gX29iamVjdFNwcmVhZDIoe30sIHRoaXMuY29uZmlnLCB7CiAgICAgICAgICB0cmlnZ2VyOiAnbWFudWFsJywKICAgICAgICAgIHNlbGVjdG9yOiAnJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2ZpeFRpdGxlKCk7CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLl9maXhUaXRsZSA9IGZ1bmN0aW9uIF9maXhUaXRsZSgpIHsKICAgICAgdmFyIHRpdGxlVHlwZSA9IF90eXBlb2YodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1vcmlnaW5hbC10aXRsZScpKTsKCiAgICAgIGlmICh0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IHRpdGxlVHlwZSAhPT0gJ3N0cmluZycpIHsKICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJywgdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKSB8fCAnJyk7CiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnJyk7CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLl9lbnRlciA9IGZ1bmN0aW9uIF9lbnRlcihldmVudCwgY29udGV4dCkgewogICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7CiAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTsKCiAgICAgIGlmICghY29udGV4dCkgewogICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTsKICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSwgY29udGV4dCk7CiAgICAgIH0KCiAgICAgIGlmIChldmVudCkgewogICAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXJbZXZlbnQudHlwZSA9PT0gJ2ZvY3VzaW4nID8gVHJpZ2dlci5GT0NVUyA6IFRyaWdnZXIuSE9WRVJdID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKCQoY29udGV4dC5nZXRUaXBFbGVtZW50KCkpLmhhc0NsYXNzKENsYXNzTmFtZSQ2LlNIT1cpIHx8IGNvbnRleHQuX2hvdmVyU3RhdGUgPT09IEhvdmVyU3RhdGUuU0hPVykgewogICAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLlNIT1c7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjbGVhclRpbWVvdXQoY29udGV4dC5fdGltZW91dCk7CiAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLlNIT1c7CgogICAgICBpZiAoIWNvbnRleHQuY29uZmlnLmRlbGF5IHx8ICFjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KSB7CiAgICAgICAgY29udGV4dC5zaG93KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb250ZXh0Ll90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGNvbnRleHQuX2hvdmVyU3RhdGUgPT09IEhvdmVyU3RhdGUuU0hPVykgewogICAgICAgICAgY29udGV4dC5zaG93KCk7CiAgICAgICAgfQogICAgICB9LCBjb250ZXh0LmNvbmZpZy5kZWxheS5zaG93KTsKICAgIH07CgogICAgX3Byb3RvLl9sZWF2ZSA9IGZ1bmN0aW9uIF9sZWF2ZShldmVudCwgY29udGV4dCkgewogICAgICB2YXIgZGF0YUtleSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7CiAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShkYXRhS2V5KTsKCiAgICAgIGlmICghY29udGV4dCkgewogICAgICAgIGNvbnRleHQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihldmVudC5jdXJyZW50VGFyZ2V0LCB0aGlzLl9nZXREZWxlZ2F0ZUNvbmZpZygpKTsKICAgICAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoZGF0YUtleSwgY29udGV4dCk7CiAgICAgIH0KCiAgICAgIGlmIChldmVudCkgewogICAgICAgIGNvbnRleHQuX2FjdGl2ZVRyaWdnZXJbZXZlbnQudHlwZSA9PT0gJ2ZvY3Vzb3V0JyA/IFRyaWdnZXIuRk9DVVMgOiBUcmlnZ2VyLkhPVkVSXSA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAoY29udGV4dC5faXNXaXRoQWN0aXZlVHJpZ2dlcigpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjbGVhclRpbWVvdXQoY29udGV4dC5fdGltZW91dCk7CiAgICAgIGNvbnRleHQuX2hvdmVyU3RhdGUgPSBIb3ZlclN0YXRlLk9VVDsKCiAgICAgIGlmICghY29udGV4dC5jb25maWcuZGVsYXkgfHwgIWNvbnRleHQuY29uZmlnLmRlbGF5LmhpZGUpIHsKICAgICAgICBjb250ZXh0LmhpZGUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnRleHQuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoY29udGV4dC5faG92ZXJTdGF0ZSA9PT0gSG92ZXJTdGF0ZS5PVVQpIHsKICAgICAgICAgIGNvbnRleHQuaGlkZSgpOwogICAgICAgIH0KICAgICAgfSwgY29udGV4dC5jb25maWcuZGVsYXkuaGlkZSk7CiAgICB9OwoKICAgIF9wcm90by5faXNXaXRoQWN0aXZlVHJpZ2dlciA9IGZ1bmN0aW9uIF9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkgewogICAgICBmb3IgKHZhciB0cmlnZ2VyIGluIHRoaXMuX2FjdGl2ZVRyaWdnZXIpIHsKICAgICAgICBpZiAodGhpcy5fYWN0aXZlVHJpZ2dlclt0cmlnZ2VyXSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwoKICAgIF9wcm90by5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHsKICAgICAgdmFyIGRhdGFBdHRyaWJ1dGVzID0gJCh0aGlzLmVsZW1lbnQpLmRhdGEoKTsKICAgICAgT2JqZWN0LmtleXMoZGF0YUF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGRhdGFBdHRyKSB7CiAgICAgICAgaWYgKERJU0FMTE9XRURfQVRUUklCVVRFUy5pbmRleE9mKGRhdGFBdHRyKSAhPT0gLTEpIHsKICAgICAgICAgIGRlbGV0ZSBkYXRhQXR0cmlidXRlc1tkYXRhQXR0cl07CiAgICAgICAgfQogICAgICB9KTsKICAgICAgY29uZmlnID0gX29iamVjdFNwcmVhZDIoe30sIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCwge30sIGRhdGFBdHRyaWJ1dGVzLCB7fSwgX3R5cGVvZihjb25maWcpID09PSAnb2JqZWN0JyAmJiBjb25maWcgPyBjb25maWcgOiB7fSk7CgogICAgICBpZiAodHlwZW9mIGNvbmZpZy5kZWxheSA9PT0gJ251bWJlcicpIHsKICAgICAgICBjb25maWcuZGVsYXkgPSB7CiAgICAgICAgICBzaG93OiBjb25maWcuZGVsYXksCiAgICAgICAgICBoaWRlOiBjb25maWcuZGVsYXkKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAodHlwZW9mIGNvbmZpZy50aXRsZSA9PT0gJ251bWJlcicpIHsKICAgICAgICBjb25maWcudGl0bGUgPSBjb25maWcudGl0bGUudG9TdHJpbmcoKTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBjb25maWcuY29udGVudCA9PT0gJ251bWJlcicpIHsKICAgICAgICBjb25maWcuY29udGVudCA9IGNvbmZpZy5jb250ZW50LnRvU3RyaW5nKCk7CiAgICAgIH0KCiAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUkNiwgY29uZmlnLCB0aGlzLmNvbnN0cnVjdG9yLkRlZmF1bHRUeXBlKTsKCiAgICAgIGlmIChjb25maWcuc2FuaXRpemUpIHsKICAgICAgICBjb25maWcudGVtcGxhdGUgPSBzYW5pdGl6ZUh0bWwoY29uZmlnLnRlbXBsYXRlLCBjb25maWcud2hpdGVMaXN0LCBjb25maWcuc2FuaXRpemVGbik7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb25maWc7CiAgICB9OwoKICAgIF9wcm90by5fZ2V0RGVsZWdhdGVDb25maWcgPSBmdW5jdGlvbiBfZ2V0RGVsZWdhdGVDb25maWcoKSB7CiAgICAgIHZhciBjb25maWcgPSB7fTsKCiAgICAgIGlmICh0aGlzLmNvbmZpZykgewogICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNvbmZpZykgewogICAgICAgICAgaWYgKHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFtrZXldICE9PSB0aGlzLmNvbmZpZ1trZXldKSB7CiAgICAgICAgICAgIGNvbmZpZ1trZXldID0gdGhpcy5jb25maWdba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBjb25maWc7CiAgICB9OwoKICAgIF9wcm90by5fY2xlYW5UaXBDbGFzcyA9IGZ1bmN0aW9uIF9jbGVhblRpcENsYXNzKCkgewogICAgICB2YXIgJHRpcCA9ICQodGhpcy5nZXRUaXBFbGVtZW50KCkpOwogICAgICB2YXIgdGFiQ2xhc3MgPSAkdGlwLmF0dHIoJ2NsYXNzJykubWF0Y2goQlNDTFNfUFJFRklYX1JFR0VYKTsKCiAgICAgIGlmICh0YWJDbGFzcyAhPT0gbnVsbCAmJiB0YWJDbGFzcy5sZW5ndGgpIHsKICAgICAgICAkdGlwLnJlbW92ZUNsYXNzKHRhYkNsYXNzLmpvaW4oJycpKTsKICAgICAgfQogICAgfTsKCiAgICBfcHJvdG8uX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZSA9IGZ1bmN0aW9uIF9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UocG9wcGVyRGF0YSkgewogICAgICB2YXIgcG9wcGVySW5zdGFuY2UgPSBwb3BwZXJEYXRhLmluc3RhbmNlOwogICAgICB0aGlzLnRpcCA9IHBvcHBlckluc3RhbmNlLnBvcHBlcjsKCiAgICAgIHRoaXMuX2NsZWFuVGlwQ2xhc3MoKTsKCiAgICAgIHRoaXMuYWRkQXR0YWNobWVudENsYXNzKHRoaXMuX2dldEF0dGFjaG1lbnQocG9wcGVyRGF0YS5wbGFjZW1lbnQpKTsKICAgIH07CgogICAgX3Byb3RvLl9maXhUcmFuc2l0aW9uID0gZnVuY3Rpb24gX2ZpeFRyYW5zaXRpb24oKSB7CiAgICAgIHZhciB0aXAgPSB0aGlzLmdldFRpcEVsZW1lbnQoKTsKICAgICAgdmFyIGluaXRDb25maWdBbmltYXRpb24gPSB0aGlzLmNvbmZpZy5hbmltYXRpb247CgogICAgICBpZiAodGlwLmdldEF0dHJpYnV0ZSgneC1wbGFjZW1lbnQnKSAhPT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgJCh0aXApLnJlbW92ZUNsYXNzKENsYXNzTmFtZSQ2LkZBREUpOwogICAgICB0aGlzLmNvbmZpZy5hbmltYXRpb24gPSBmYWxzZTsKICAgICAgdGhpcy5oaWRlKCk7CiAgICAgIHRoaXMuc2hvdygpOwogICAgICB0aGlzLmNvbmZpZy5hbmltYXRpb24gPSBpbml0Q29uZmlnQW5pbWF0aW9uOwogICAgfSAvLyBTdGF0aWMKICAgIDsKCiAgICBUb29sdGlwLl9qUXVlcnlJbnRlcmZhY2UgPSBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykgewogICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSQ2KTsKCiAgICAgICAgdmFyIF9jb25maWcgPSBfdHlwZW9mKGNvbmZpZykgPT09ICdvYmplY3QnICYmIGNvbmZpZzsKCiAgICAgICAgaWYgKCFkYXRhICYmIC9kaXNwb3NlfGhpZGUvLnRlc3QoY29uZmlnKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICBkYXRhID0gbmV3IFRvb2x0aXAodGhpcywgX2NvbmZpZyk7CiAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVkkNiwgZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiICsgY29uZmlnICsgIlwiIik7CiAgICAgICAgICB9CgogICAgICAgICAgZGF0YVtjb25maWddKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH07CgogICAgX2NyZWF0ZUNsYXNzKFRvb2x0aXAsIG51bGwsIFt7CiAgICAgIGtleTogIlZFUlNJT04iLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gVkVSU0lPTiQ2OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIkRlZmF1bHQiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRGVmYXVsdCQ0OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIk5BTUUiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gTkFNRSQ2OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIkRBVEFfS0VZIiwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIERBVEFfS0VZJDY7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiRXZlbnQiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRXZlbnQkNjsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJFVkVOVF9LRVkiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRVZFTlRfS0VZJDY7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiRGVmYXVsdFR5cGUiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRGVmYXVsdFR5cGUkNDsKICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBUb29sdGlwOwogIH0oKTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBqUXVlcnkKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCgogICQuZm5bTkFNRSQ2XSA9IFRvb2x0aXAuX2pRdWVyeUludGVyZmFjZTsKICAkLmZuW05BTUUkNl0uQ29uc3RydWN0b3IgPSBUb29sdGlwOwoKICAkLmZuW05BTUUkNl0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm5bTkFNRSQ2XSA9IEpRVUVSWV9OT19DT05GTElDVCQ2OwogICAgcmV0dXJuIFRvb2x0aXAuX2pRdWVyeUludGVyZmFjZTsKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENvbnN0YW50cwogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKCiAgdmFyIE5BTUUkNyA9ICdwb3BvdmVyJzsKICB2YXIgVkVSU0lPTiQ3ID0gJzQuNC4xJzsKICB2YXIgREFUQV9LRVkkNyA9ICdicy5wb3BvdmVyJzsKICB2YXIgRVZFTlRfS0VZJDcgPSAiLiIgKyBEQVRBX0tFWSQ3OwogIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QkNyA9ICQuZm5bTkFNRSQ3XTsKICB2YXIgQ0xBU1NfUFJFRklYJDEgPSAnYnMtcG9wb3Zlcic7CiAgdmFyIEJTQ0xTX1BSRUZJWF9SRUdFWCQxID0gbmV3IFJlZ0V4cCgiKF58XFxzKSIgKyBDTEFTU19QUkVGSVgkMSArICJcXFMrIiwgJ2cnKTsKCiAgdmFyIERlZmF1bHQkNSA9IF9vYmplY3RTcHJlYWQyKHt9LCBUb29sdGlwLkRlZmF1bHQsIHsKICAgIHBsYWNlbWVudDogJ3JpZ2h0JywKICAgIHRyaWdnZXI6ICdjbGljaycsCiAgICBjb250ZW50OiAnJywKICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz0icG9wb3ZlciIgcm9sZT0idG9vbHRpcCI+JyArICc8ZGl2IGNsYXNzPSJhcnJvdyI+PC9kaXY+JyArICc8aDMgY2xhc3M9InBvcG92ZXItaGVhZGVyIj48L2gzPicgKyAnPGRpdiBjbGFzcz0icG9wb3Zlci1ib2R5Ij48L2Rpdj48L2Rpdj4nCiAgfSk7CgogIHZhciBEZWZhdWx0VHlwZSQ1ID0gX29iamVjdFNwcmVhZDIoe30sIFRvb2x0aXAuRGVmYXVsdFR5cGUsIHsKICAgIGNvbnRlbnQ6ICcoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pJwogIH0pOwoKICB2YXIgQ2xhc3NOYW1lJDcgPSB7CiAgICBGQURFOiAnZmFkZScsCiAgICBTSE9XOiAnc2hvdycKICB9OwogIHZhciBTZWxlY3RvciQ3ID0gewogICAgVElUTEU6ICcucG9wb3Zlci1oZWFkZXInLAogICAgQ09OVEVOVDogJy5wb3BvdmVyLWJvZHknCiAgfTsKICB2YXIgRXZlbnQkNyA9IHsKICAgIEhJREU6ICJoaWRlIiArIEVWRU5UX0tFWSQ3LAogICAgSElEREVOOiAiaGlkZGVuIiArIEVWRU5UX0tFWSQ3LAogICAgU0hPVzogInNob3ciICsgRVZFTlRfS0VZJDcsCiAgICBTSE9XTjogInNob3duIiArIEVWRU5UX0tFWSQ3LAogICAgSU5TRVJURUQ6ICJpbnNlcnRlZCIgKyBFVkVOVF9LRVkkNywKICAgIENMSUNLOiAiY2xpY2siICsgRVZFTlRfS0VZJDcsCiAgICBGT0NVU0lOOiAiZm9jdXNpbiIgKyBFVkVOVF9LRVkkNywKICAgIEZPQ1VTT1VUOiAiZm9jdXNvdXQiICsgRVZFTlRfS0VZJDcsCiAgICBNT1VTRUVOVEVSOiAibW91c2VlbnRlciIgKyBFVkVOVF9LRVkkNywKICAgIE1PVVNFTEVBVkU6ICJtb3VzZWxlYXZlIiArIEVWRU5UX0tFWSQ3CiAgfTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBDbGFzcyBEZWZpbml0aW9uCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgogIHZhciBQb3BvdmVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVG9vbHRpcCkgewogICAgX2luaGVyaXRzTG9vc2UoUG9wb3ZlciwgX1Rvb2x0aXApOwoKICAgIGZ1bmN0aW9uIFBvcG92ZXIoKSB7CiAgICAgIHJldHVybiBfVG9vbHRpcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CiAgICB9CgogICAgdmFyIF9wcm90byA9IFBvcG92ZXIucHJvdG90eXBlOyAvLyBPdmVycmlkZXMKCiAgICBfcHJvdG8uaXNXaXRoQ29udGVudCA9IGZ1bmN0aW9uIGlzV2l0aENvbnRlbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldFRpdGxlKCkgfHwgdGhpcy5fZ2V0Q29udGVudCgpOwogICAgfTsKCiAgICBfcHJvdG8uYWRkQXR0YWNobWVudENsYXNzID0gZnVuY3Rpb24gYWRkQXR0YWNobWVudENsYXNzKGF0dGFjaG1lbnQpIHsKICAgICAgJCh0aGlzLmdldFRpcEVsZW1lbnQoKSkuYWRkQ2xhc3MoQ0xBU1NfUFJFRklYJDEgKyAiLSIgKyBhdHRhY2htZW50KTsKICAgIH07CgogICAgX3Byb3RvLmdldFRpcEVsZW1lbnQgPSBmdW5jdGlvbiBnZXRUaXBFbGVtZW50KCkgewogICAgICB0aGlzLnRpcCA9IHRoaXMudGlwIHx8ICQodGhpcy5jb25maWcudGVtcGxhdGUpWzBdOwogICAgICByZXR1cm4gdGhpcy50aXA7CiAgICB9OwoKICAgIF9wcm90by5zZXRDb250ZW50ID0gZnVuY3Rpb24gc2V0Q29udGVudCgpIHsKICAgICAgdmFyICR0aXAgPSAkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKTsgLy8gV2UgdXNlIGFwcGVuZCBmb3IgaHRtbCBvYmplY3RzIHRvIG1haW50YWluIGpzIGV2ZW50cwoKICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IkNy5USVRMRSksIHRoaXMuZ2V0VGl0bGUoKSk7CgogICAgICB2YXIgY29udGVudCA9IHRoaXMuX2dldENvbnRlbnQoKTsKCiAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGNvbnRlbnQgPSBjb250ZW50LmNhbGwodGhpcy5lbGVtZW50KTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRFbGVtZW50Q29udGVudCgkdGlwLmZpbmQoU2VsZWN0b3IkNy5DT05URU5UKSwgY29udGVudCk7CiAgICAgICR0aXAucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lJDcuRkFERSArICIgIiArIENsYXNzTmFtZSQ3LlNIT1cpOwogICAgfSAvLyBQcml2YXRlCiAgICA7CgogICAgX3Byb3RvLl9nZXRDb250ZW50ID0gZnVuY3Rpb24gX2dldENvbnRlbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnKSB8fCB0aGlzLmNvbmZpZy5jb250ZW50OwogICAgfTsKCiAgICBfcHJvdG8uX2NsZWFuVGlwQ2xhc3MgPSBmdW5jdGlvbiBfY2xlYW5UaXBDbGFzcygpIHsKICAgICAgdmFyICR0aXAgPSAkKHRoaXMuZ2V0VGlwRWxlbWVudCgpKTsKICAgICAgdmFyIHRhYkNsYXNzID0gJHRpcC5hdHRyKCdjbGFzcycpLm1hdGNoKEJTQ0xTX1BSRUZJWF9SRUdFWCQxKTsKCiAgICAgIGlmICh0YWJDbGFzcyAhPT0gbnVsbCAmJiB0YWJDbGFzcy5sZW5ndGggPiAwKSB7CiAgICAgICAgJHRpcC5yZW1vdmVDbGFzcyh0YWJDbGFzcy5qb2luKCcnKSk7CiAgICAgIH0KICAgIH0gLy8gU3RhdGljCiAgICA7CgogICAgUG9wb3Zlci5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHsKICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoREFUQV9LRVkkNyk7CgogICAgICAgIHZhciBfY29uZmlnID0gX3R5cGVvZihjb25maWcpID09PSAnb2JqZWN0JyA/IGNvbmZpZyA6IG51bGw7CgogICAgICAgIGlmICghZGF0YSAmJiAvZGlzcG9zZXxoaWRlLy50ZXN0KGNvbmZpZykpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgZGF0YSA9IG5ldyBQb3BvdmVyKHRoaXMsIF9jb25maWcpOwogICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZJDcsIGRhdGEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiTm8gbWV0aG9kIG5hbWVkIFwiIiArIGNvbmZpZyArICJcIiIpOwogICAgICAgICAgfQoKICAgICAgICAgIGRhdGFbY29uZmlnXSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIF9jcmVhdGVDbGFzcyhQb3BvdmVyLCBudWxsLCBbewogICAgICBrZXk6ICJWRVJTSU9OIiwKICAgICAgLy8gR2V0dGVycwogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gVkVSU0lPTiQ3OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIkRlZmF1bHQiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRGVmYXVsdCQ1OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIk5BTUUiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gTkFNRSQ3OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIkRBVEFfS0VZIiwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIERBVEFfS0VZJDc7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiRXZlbnQiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRXZlbnQkNzsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJFVkVOVF9LRVkiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRVZFTlRfS0VZJDc7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiRGVmYXVsdFR5cGUiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRGVmYXVsdFR5cGUkNTsKICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBQb3BvdmVyOwogIH0oVG9vbHRpcCk7CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogalF1ZXJ5CiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgoKICAkLmZuW05BTUUkN10gPSBQb3BvdmVyLl9qUXVlcnlJbnRlcmZhY2U7CiAgJC5mbltOQU1FJDddLkNvbnN0cnVjdG9yID0gUG9wb3ZlcjsKCiAgJC5mbltOQU1FJDddLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuW05BTUUkN10gPSBKUVVFUllfTk9fQ09ORkxJQ1QkNzsKICAgIHJldHVybiBQb3BvdmVyLl9qUXVlcnlJbnRlcmZhY2U7CiAgfTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBDb25zdGFudHMKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCgogIHZhciBOQU1FJDggPSAnc2Nyb2xsc3B5JzsKICB2YXIgVkVSU0lPTiQ4ID0gJzQuNC4xJzsKICB2YXIgREFUQV9LRVkkOCA9ICdicy5zY3JvbGxzcHknOwogIHZhciBFVkVOVF9LRVkkOCA9ICIuIiArIERBVEFfS0VZJDg7CiAgdmFyIERBVEFfQVBJX0tFWSQ2ID0gJy5kYXRhLWFwaSc7CiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCQ4ID0gJC5mbltOQU1FJDhdOwogIHZhciBEZWZhdWx0JDYgPSB7CiAgICBvZmZzZXQ6IDEwLAogICAgbWV0aG9kOiAnYXV0bycsCiAgICB0YXJnZXQ6ICcnCiAgfTsKICB2YXIgRGVmYXVsdFR5cGUkNiA9IHsKICAgIG9mZnNldDogJ251bWJlcicsCiAgICBtZXRob2Q6ICdzdHJpbmcnLAogICAgdGFyZ2V0OiAnKHN0cmluZ3xlbGVtZW50KScKICB9OwogIHZhciBFdmVudCQ4ID0gewogICAgQUNUSVZBVEU6ICJhY3RpdmF0ZSIgKyBFVkVOVF9LRVkkOCwKICAgIFNDUk9MTDogInNjcm9sbCIgKyBFVkVOVF9LRVkkOCwKICAgIExPQURfREFUQV9BUEk6ICJsb2FkIiArIEVWRU5UX0tFWSQ4ICsgREFUQV9BUElfS0VZJDYKICB9OwogIHZhciBDbGFzc05hbWUkOCA9IHsKICAgIERST1BET1dOX0lURU06ICdkcm9wZG93bi1pdGVtJywKICAgIERST1BET1dOX01FTlU6ICdkcm9wZG93bi1tZW51JywKICAgIEFDVElWRTogJ2FjdGl2ZScKICB9OwogIHZhciBTZWxlY3RvciQ4ID0gewogICAgREFUQV9TUFk6ICdbZGF0YS1zcHk9InNjcm9sbCJdJywKICAgIEFDVElWRTogJy5hY3RpdmUnLAogICAgTkFWX0xJU1RfR1JPVVA6ICcubmF2LCAubGlzdC1ncm91cCcsCiAgICBOQVZfTElOS1M6ICcubmF2LWxpbmsnLAogICAgTkFWX0lURU1TOiAnLm5hdi1pdGVtJywKICAgIExJU1RfSVRFTVM6ICcubGlzdC1ncm91cC1pdGVtJywKICAgIERST1BET1dOOiAnLmRyb3Bkb3duJywKICAgIERST1BET1dOX0lURU1TOiAnLmRyb3Bkb3duLWl0ZW0nLAogICAgRFJPUERPV05fVE9HR0xFOiAnLmRyb3Bkb3duLXRvZ2dsZScKICB9OwogIHZhciBPZmZzZXRNZXRob2QgPSB7CiAgICBPRkZTRVQ6ICdvZmZzZXQnLAogICAgUE9TSVRJT046ICdwb3NpdGlvbicKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENsYXNzIERlZmluaXRpb24KICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCiAgdmFyIFNjcm9sbFNweSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBTY3JvbGxTcHkoZWxlbWVudCwgY29uZmlnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDsKICAgICAgdGhpcy5fc2Nyb2xsRWxlbWVudCA9IGVsZW1lbnQudGFnTmFtZSA9PT0gJ0JPRFknID8gd2luZG93IDogZWxlbWVudDsKICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7CiAgICAgIHRoaXMuX3NlbGVjdG9yID0gdGhpcy5fY29uZmlnLnRhcmdldCArICIgIiArIFNlbGVjdG9yJDguTkFWX0xJTktTICsgIiwiICsgKHRoaXMuX2NvbmZpZy50YXJnZXQgKyAiICIgKyBTZWxlY3RvciQ4LkxJU1RfSVRFTVMgKyAiLCIpICsgKHRoaXMuX2NvbmZpZy50YXJnZXQgKyAiICIgKyBTZWxlY3RvciQ4LkRST1BET1dOX0lURU1TKTsKICAgICAgdGhpcy5fb2Zmc2V0cyA9IFtdOwogICAgICB0aGlzLl90YXJnZXRzID0gW107CiAgICAgIHRoaXMuX2FjdGl2ZVRhcmdldCA9IG51bGw7CiAgICAgIHRoaXMuX3Njcm9sbEhlaWdodCA9IDA7CiAgICAgICQodGhpcy5fc2Nyb2xsRWxlbWVudCkub24oRXZlbnQkOC5TQ1JPTEwsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHJldHVybiBfdGhpcy5fcHJvY2VzcyhldmVudCk7CiAgICAgIH0pOwogICAgICB0aGlzLnJlZnJlc2goKTsKCiAgICAgIHRoaXMuX3Byb2Nlc3MoKTsKICAgIH0gLy8gR2V0dGVycwoKCiAgICB2YXIgX3Byb3RvID0gU2Nyb2xsU3B5LnByb3RvdHlwZTsgLy8gUHVibGljCgogICAgX3Byb3RvLnJlZnJlc2ggPSBmdW5jdGlvbiByZWZyZXNoKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBhdXRvTWV0aG9kID0gdGhpcy5fc2Nyb2xsRWxlbWVudCA9PT0gdGhpcy5fc2Nyb2xsRWxlbWVudC53aW5kb3cgPyBPZmZzZXRNZXRob2QuT0ZGU0VUIDogT2Zmc2V0TWV0aG9kLlBPU0lUSU9OOwogICAgICB2YXIgb2Zmc2V0TWV0aG9kID0gdGhpcy5fY29uZmlnLm1ldGhvZCA9PT0gJ2F1dG8nID8gYXV0b01ldGhvZCA6IHRoaXMuX2NvbmZpZy5tZXRob2Q7CiAgICAgIHZhciBvZmZzZXRCYXNlID0gb2Zmc2V0TWV0aG9kID09PSBPZmZzZXRNZXRob2QuUE9TSVRJT04gPyB0aGlzLl9nZXRTY3JvbGxUb3AoKSA6IDA7CiAgICAgIHRoaXMuX29mZnNldHMgPSBbXTsKICAgICAgdGhpcy5fdGFyZ2V0cyA9IFtdOwogICAgICB0aGlzLl9zY3JvbGxIZWlnaHQgPSB0aGlzLl9nZXRTY3JvbGxIZWlnaHQoKTsKICAgICAgdmFyIHRhcmdldHMgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2VsZWN0b3IpKTsKICAgICAgdGFyZ2V0cy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICB2YXIgdGFyZ2V0OwogICAgICAgIHZhciB0YXJnZXRTZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KTsKCiAgICAgICAgaWYgKHRhcmdldFNlbGVjdG9yKSB7CiAgICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldFNlbGVjdG9yKTsKICAgICAgICB9CgogICAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICAgIHZhciB0YXJnZXRCQ1IgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CgogICAgICAgICAgaWYgKHRhcmdldEJDUi53aWR0aCB8fCB0YXJnZXRCQ1IuaGVpZ2h0KSB7CiAgICAgICAgICAgIC8vIFRPRE8gKGZhdCk6IHJlbW92ZSBza2V0Y2ggcmVsaWFuY2Ugb24galF1ZXJ5IHBvc2l0aW9uL29mZnNldAogICAgICAgICAgICByZXR1cm4gWyQodGFyZ2V0KVtvZmZzZXRNZXRob2RdKCkudG9wICsgb2Zmc2V0QmFzZSwgdGFyZ2V0U2VsZWN0b3JdOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9KS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGFbMF0gLSBiWzBdOwogICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgX3RoaXMyLl9vZmZzZXRzLnB1c2goaXRlbVswXSk7CgogICAgICAgIF90aGlzMi5fdGFyZ2V0cy5wdXNoKGl0ZW1bMV0pOwogICAgICB9KTsKICAgIH07CgogICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkgewogICAgICAkLnJlbW92ZURhdGEodGhpcy5fZWxlbWVudCwgREFUQV9LRVkkOCk7CiAgICAgICQodGhpcy5fc2Nyb2xsRWxlbWVudCkub2ZmKEVWRU5UX0tFWSQ4KTsKICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7CiAgICAgIHRoaXMuX3Njcm9sbEVsZW1lbnQgPSBudWxsOwogICAgICB0aGlzLl9jb25maWcgPSBudWxsOwogICAgICB0aGlzLl9zZWxlY3RvciA9IG51bGw7CiAgICAgIHRoaXMuX29mZnNldHMgPSBudWxsOwogICAgICB0aGlzLl90YXJnZXRzID0gbnVsbDsKICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gbnVsbDsKICAgICAgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gbnVsbDsKICAgIH0gLy8gUHJpdmF0ZQogICAgOwoKICAgIF9wcm90by5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHsKICAgICAgY29uZmlnID0gX29iamVjdFNwcmVhZDIoe30sIERlZmF1bHQkNiwge30sIF90eXBlb2YoY29uZmlnKSA9PT0gJ29iamVjdCcgJiYgY29uZmlnID8gY29uZmlnIDoge30pOwoKICAgICAgaWYgKHR5cGVvZiBjb25maWcudGFyZ2V0ICE9PSAnc3RyaW5nJykgewogICAgICAgIHZhciBpZCA9ICQoY29uZmlnLnRhcmdldCkuYXR0cignaWQnKTsKCiAgICAgICAgaWYgKCFpZCkgewogICAgICAgICAgaWQgPSBVdGlsLmdldFVJRChOQU1FJDgpOwogICAgICAgICAgJChjb25maWcudGFyZ2V0KS5hdHRyKCdpZCcsIGlkKTsKICAgICAgICB9CgogICAgICAgIGNvbmZpZy50YXJnZXQgPSAiIyIgKyBpZDsKICAgICAgfQoKICAgICAgVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSQ4LCBjb25maWcsIERlZmF1bHRUeXBlJDYpOwogICAgICByZXR1cm4gY29uZmlnOwogICAgfTsKCiAgICBfcHJvdG8uX2dldFNjcm9sbFRvcCA9IGZ1bmN0aW9uIF9nZXRTY3JvbGxUb3AoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxFbGVtZW50ID09PSB3aW5kb3cgPyB0aGlzLl9zY3JvbGxFbGVtZW50LnBhZ2VZT2Zmc2V0IDogdGhpcy5fc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3A7CiAgICB9OwoKICAgIF9wcm90by5fZ2V0U2Nyb2xsSGVpZ2h0ID0gZnVuY3Rpb24gX2dldFNjcm9sbEhlaWdodCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IHx8IE1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KTsKICAgIH07CgogICAgX3Byb3RvLl9nZXRPZmZzZXRIZWlnaHQgPSBmdW5jdGlvbiBfZ2V0T2Zmc2V0SGVpZ2h0KCkgewogICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudCA9PT0gd2luZG93ID8gd2luZG93LmlubmVySGVpZ2h0IDogdGhpcy5fc2Nyb2xsRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQ7CiAgICB9OwoKICAgIF9wcm90by5fcHJvY2VzcyA9IGZ1bmN0aW9uIF9wcm9jZXNzKCkgewogICAgICB2YXIgc2Nyb2xsVG9wID0gdGhpcy5fZ2V0U2Nyb2xsVG9wKCkgKyB0aGlzLl9jb25maWcub2Zmc2V0OwoKICAgICAgdmFyIHNjcm9sbEhlaWdodCA9IHRoaXMuX2dldFNjcm9sbEhlaWdodCgpOwoKICAgICAgdmFyIG1heFNjcm9sbCA9IHRoaXMuX2NvbmZpZy5vZmZzZXQgKyBzY3JvbGxIZWlnaHQgLSB0aGlzLl9nZXRPZmZzZXRIZWlnaHQoKTsKCiAgICAgIGlmICh0aGlzLl9zY3JvbGxIZWlnaHQgIT09IHNjcm9sbEhlaWdodCkgewogICAgICAgIHRoaXMucmVmcmVzaCgpOwogICAgICB9CgogICAgICBpZiAoc2Nyb2xsVG9wID49IG1heFNjcm9sbCkgewogICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLl90YXJnZXRzW3RoaXMuX3RhcmdldHMubGVuZ3RoIC0gMV07CgogICAgICAgIGlmICh0aGlzLl9hY3RpdmVUYXJnZXQgIT09IHRhcmdldCkgewogICAgICAgICAgdGhpcy5fYWN0aXZhdGUodGFyZ2V0KTsKICAgICAgICB9CgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuX2FjdGl2ZVRhcmdldCAmJiBzY3JvbGxUb3AgPCB0aGlzLl9vZmZzZXRzWzBdICYmIHRoaXMuX29mZnNldHNbMF0gPiAwKSB7CiAgICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gbnVsbDsKCiAgICAgICAgdGhpcy5fY2xlYXIoKTsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgb2Zmc2V0TGVuZ3RoID0gdGhpcy5fb2Zmc2V0cy5sZW5ndGg7CgogICAgICBmb3IgKHZhciBpID0gb2Zmc2V0TGVuZ3RoOyBpLS07KSB7CiAgICAgICAgdmFyIGlzQWN0aXZlVGFyZ2V0ID0gdGhpcy5fYWN0aXZlVGFyZ2V0ICE9PSB0aGlzLl90YXJnZXRzW2ldICYmIHNjcm9sbFRvcCA+PSB0aGlzLl9vZmZzZXRzW2ldICYmICh0eXBlb2YgdGhpcy5fb2Zmc2V0c1tpICsgMV0gPT09ICd1bmRlZmluZWQnIHx8IHNjcm9sbFRvcCA8IHRoaXMuX29mZnNldHNbaSArIDFdKTsKCiAgICAgICAgaWYgKGlzQWN0aXZlVGFyZ2V0KSB7CiAgICAgICAgICB0aGlzLl9hY3RpdmF0ZSh0aGlzLl90YXJnZXRzW2ldKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgX3Byb3RvLl9hY3RpdmF0ZSA9IGZ1bmN0aW9uIF9hY3RpdmF0ZSh0YXJnZXQpIHsKICAgICAgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gdGFyZ2V0OwoKICAgICAgdGhpcy5fY2xlYXIoKTsKCiAgICAgIHZhciBxdWVyaWVzID0gdGhpcy5fc2VsZWN0b3Iuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7CiAgICAgICAgcmV0dXJuIHNlbGVjdG9yICsgIltkYXRhLXRhcmdldD1cIiIgKyB0YXJnZXQgKyAiXCJdLCIgKyBzZWxlY3RvciArICJbaHJlZj1cIiIgKyB0YXJnZXQgKyAiXCJdIjsKICAgICAgfSk7CgogICAgICB2YXIgJGxpbmsgPSAkKFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChxdWVyaWVzLmpvaW4oJywnKSkpKTsKCiAgICAgIGlmICgkbGluay5oYXNDbGFzcyhDbGFzc05hbWUkOC5EUk9QRE9XTl9JVEVNKSkgewogICAgICAgICRsaW5rLmNsb3Nlc3QoU2VsZWN0b3IkOC5EUk9QRE9XTikuZmluZChTZWxlY3RvciQ4LkRST1BET1dOX1RPR0dMRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lJDguQUNUSVZFKTsKICAgICAgICAkbGluay5hZGRDbGFzcyhDbGFzc05hbWUkOC5BQ1RJVkUpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB0cmlnZ2VyZWQgbGluayBhcyBhY3RpdmUKICAgICAgICAkbGluay5hZGRDbGFzcyhDbGFzc05hbWUkOC5BQ1RJVkUpOyAvLyBTZXQgdHJpZ2dlcmVkIGxpbmtzIHBhcmVudHMgYXMgYWN0aXZlCiAgICAgICAgLy8gV2l0aCBib3RoIDx1bD4gYW5kIDxuYXY+IG1hcmt1cCBhIHBhcmVudCBpcyB0aGUgcHJldmlvdXMgc2libGluZyBvZiBhbnkgbmF2IGFuY2VzdG9yCgogICAgICAgICRsaW5rLnBhcmVudHMoU2VsZWN0b3IkOC5OQVZfTElTVF9HUk9VUCkucHJldihTZWxlY3RvciQ4Lk5BVl9MSU5LUyArICIsICIgKyBTZWxlY3RvciQ4LkxJU1RfSVRFTVMpLmFkZENsYXNzKENsYXNzTmFtZSQ4LkFDVElWRSk7IC8vIEhhbmRsZSBzcGVjaWFsIGNhc2Ugd2hlbiAubmF2LWxpbmsgaXMgaW5zaWRlIC5uYXYtaXRlbQoKICAgICAgICAkbGluay5wYXJlbnRzKFNlbGVjdG9yJDguTkFWX0xJU1RfR1JPVVApLnByZXYoU2VsZWN0b3IkOC5OQVZfSVRFTVMpLmNoaWxkcmVuKFNlbGVjdG9yJDguTkFWX0xJTktTKS5hZGRDbGFzcyhDbGFzc05hbWUkOC5BQ1RJVkUpOwogICAgICB9CgogICAgICAkKHRoaXMuX3Njcm9sbEVsZW1lbnQpLnRyaWdnZXIoRXZlbnQkOC5BQ1RJVkFURSwgewogICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRhcmdldAogICAgICB9KTsKICAgIH07CgogICAgX3Byb3RvLl9jbGVhciA9IGZ1bmN0aW9uIF9jbGVhcigpIHsKICAgICAgW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NlbGVjdG9yKSkuZmlsdGVyKGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgcmV0dXJuIG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKENsYXNzTmFtZSQ4LkFDVElWRSk7CiAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICByZXR1cm4gbm9kZS5jbGFzc0xpc3QucmVtb3ZlKENsYXNzTmFtZSQ4LkFDVElWRSk7CiAgICAgIH0pOwogICAgfSAvLyBTdGF0aWMKICAgIDsKCiAgICBTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7CiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKERBVEFfS0VZJDgpOwoKICAgICAgICB2YXIgX2NvbmZpZyA9IF90eXBlb2YoY29uZmlnKSA9PT0gJ29iamVjdCcgJiYgY29uZmlnOwoKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIGRhdGEgPSBuZXcgU2Nyb2xsU3B5KHRoaXMsIF9jb25maWcpOwogICAgICAgICAgJCh0aGlzKS5kYXRhKERBVEFfS0VZJDgsIGRhdGEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICBpZiAodHlwZW9mIGRhdGFbY29uZmlnXSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiTm8gbWV0aG9kIG5hbWVkIFwiIiArIGNvbmZpZyArICJcIiIpOwogICAgICAgICAgfQoKICAgICAgICAgIGRhdGFbY29uZmlnXSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIF9jcmVhdGVDbGFzcyhTY3JvbGxTcHksIG51bGwsIFt7CiAgICAgIGtleTogIlZFUlNJT04iLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gVkVSU0lPTiQ4OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogIkRlZmF1bHQiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRGVmYXVsdCQ2OwogICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIFNjcm9sbFNweTsKICB9KCk7CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogRGF0YSBBcGkgaW1wbGVtZW50YXRpb24KICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCgogICQod2luZG93KS5vbihFdmVudCQ4LkxPQURfREFUQV9BUEksIGZ1bmN0aW9uICgpIHsKICAgIHZhciBzY3JvbGxTcHlzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFNlbGVjdG9yJDguREFUQV9TUFkpKTsKICAgIHZhciBzY3JvbGxTcHlzTGVuZ3RoID0gc2Nyb2xsU3B5cy5sZW5ndGg7CgogICAgZm9yICh2YXIgaSA9IHNjcm9sbFNweXNMZW5ndGg7IGktLTspIHsKICAgICAgdmFyICRzcHkgPSAkKHNjcm9sbFNweXNbaV0pOwoKICAgICAgU2Nyb2xsU3B5Ll9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkc3B5LCAkc3B5LmRhdGEoKSk7CiAgICB9CiAgfSk7CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogalF1ZXJ5CiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgogICQuZm5bTkFNRSQ4XSA9IFNjcm9sbFNweS5falF1ZXJ5SW50ZXJmYWNlOwogICQuZm5bTkFNRSQ4XS5Db25zdHJ1Y3RvciA9IFNjcm9sbFNweTsKCiAgJC5mbltOQU1FJDhdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICAkLmZuW05BTUUkOF0gPSBKUVVFUllfTk9fQ09ORkxJQ1QkODsKICAgIHJldHVybiBTY3JvbGxTcHkuX2pRdWVyeUludGVyZmFjZTsKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENvbnN0YW50cwogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKCiAgdmFyIE5BTUUkOSA9ICd0YWInOwogIHZhciBWRVJTSU9OJDkgPSAnNC40LjEnOwogIHZhciBEQVRBX0tFWSQ5ID0gJ2JzLnRhYic7CiAgdmFyIEVWRU5UX0tFWSQ5ID0gIi4iICsgREFUQV9LRVkkOTsKICB2YXIgREFUQV9BUElfS0VZJDcgPSAnLmRhdGEtYXBpJzsKICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUJDkgPSAkLmZuW05BTUUkOV07CiAgdmFyIEV2ZW50JDkgPSB7CiAgICBISURFOiAiaGlkZSIgKyBFVkVOVF9LRVkkOSwKICAgIEhJRERFTjogImhpZGRlbiIgKyBFVkVOVF9LRVkkOSwKICAgIFNIT1c6ICJzaG93IiArIEVWRU5UX0tFWSQ5LAogICAgU0hPV046ICJzaG93biIgKyBFVkVOVF9LRVkkOSwKICAgIENMSUNLX0RBVEFfQVBJOiAiY2xpY2siICsgRVZFTlRfS0VZJDkgKyBEQVRBX0FQSV9LRVkkNwogIH07CiAgdmFyIENsYXNzTmFtZSQ5ID0gewogICAgRFJPUERPV05fTUVOVTogJ2Ryb3Bkb3duLW1lbnUnLAogICAgQUNUSVZFOiAnYWN0aXZlJywKICAgIERJU0FCTEVEOiAnZGlzYWJsZWQnLAogICAgRkFERTogJ2ZhZGUnLAogICAgU0hPVzogJ3Nob3cnCiAgfTsKICB2YXIgU2VsZWN0b3IkOSA9IHsKICAgIERST1BET1dOOiAnLmRyb3Bkb3duJywKICAgIE5BVl9MSVNUX0dST1VQOiAnLm5hdiwgLmxpc3QtZ3JvdXAnLAogICAgQUNUSVZFOiAnLmFjdGl2ZScsCiAgICBBQ1RJVkVfVUw6ICc+IGxpID4gLmFjdGl2ZScsCiAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT0idGFiIl0sIFtkYXRhLXRvZ2dsZT0icGlsbCJdLCBbZGF0YS10b2dnbGU9Imxpc3QiXScsCiAgICBEUk9QRE9XTl9UT0dHTEU6ICcuZHJvcGRvd24tdG9nZ2xlJywKICAgIERST1BET1dOX0FDVElWRV9DSElMRDogJz4gLmRyb3Bkb3duLW1lbnUgLmFjdGl2ZScKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENsYXNzIERlZmluaXRpb24KICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCiAgdmFyIFRhYiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBUYWIoZWxlbWVudCkgewogICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDsKICAgIH0gLy8gR2V0dGVycwoKCiAgICB2YXIgX3Byb3RvID0gVGFiLnByb3RvdHlwZTsgLy8gUHVibGljCgogICAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSAmJiB0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lJDkuQUNUSVZFKSB8fCAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZSQ5LkRJU0FCTEVEKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHRhcmdldDsKICAgICAgdmFyIHByZXZpb3VzOwogICAgICB2YXIgbGlzdEVsZW1lbnQgPSAkKHRoaXMuX2VsZW1lbnQpLmNsb3Nlc3QoU2VsZWN0b3IkOS5OQVZfTElTVF9HUk9VUClbMF07CiAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTsKCiAgICAgIGlmIChsaXN0RWxlbWVudCkgewogICAgICAgIHZhciBpdGVtU2VsZWN0b3IgPSBsaXN0RWxlbWVudC5ub2RlTmFtZSA9PT0gJ1VMJyB8fCBsaXN0RWxlbWVudC5ub2RlTmFtZSA9PT0gJ09MJyA/IFNlbGVjdG9yJDkuQUNUSVZFX1VMIDogU2VsZWN0b3IkOS5BQ1RJVkU7CiAgICAgICAgcHJldmlvdXMgPSAkLm1ha2VBcnJheSgkKGxpc3RFbGVtZW50KS5maW5kKGl0ZW1TZWxlY3RvcikpOwogICAgICAgIHByZXZpb3VzID0gcHJldmlvdXNbcHJldmlvdXMubGVuZ3RoIC0gMV07CiAgICAgIH0KCiAgICAgIHZhciBoaWRlRXZlbnQgPSAkLkV2ZW50KEV2ZW50JDkuSElERSwgewogICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnQKICAgICAgfSk7CiAgICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KEV2ZW50JDkuU0hPVywgewogICAgICAgIHJlbGF0ZWRUYXJnZXQ6IHByZXZpb3VzCiAgICAgIH0pOwoKICAgICAgaWYgKHByZXZpb3VzKSB7CiAgICAgICAgJChwcmV2aW91cykudHJpZ2dlcihoaWRlRXZlbnQpOwogICAgICB9CgogICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTsKCiAgICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoc2VsZWN0b3IpIHsKICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTsKICAgICAgfQoKICAgICAgdGhpcy5fYWN0aXZhdGUodGhpcy5fZWxlbWVudCwgbGlzdEVsZW1lbnQpOwoKICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7CiAgICAgICAgdmFyIGhpZGRlbkV2ZW50ID0gJC5FdmVudChFdmVudCQ5LkhJRERFTiwgewogICAgICAgICAgcmVsYXRlZFRhcmdldDogX3RoaXMuX2VsZW1lbnQKICAgICAgICB9KTsKICAgICAgICB2YXIgc2hvd25FdmVudCA9ICQuRXZlbnQoRXZlbnQkOS5TSE9XTiwgewogICAgICAgICAgcmVsYXRlZFRhcmdldDogcHJldmlvdXMKICAgICAgICB9KTsKICAgICAgICAkKHByZXZpb3VzKS50cmlnZ2VyKGhpZGRlbkV2ZW50KTsKICAgICAgICAkKF90aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3duRXZlbnQpOwogICAgICB9OwoKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRoaXMuX2FjdGl2YXRlKHRhcmdldCwgdGFyZ2V0LnBhcmVudE5vZGUsIGNvbXBsZXRlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb21wbGV0ZSgpOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZJDkpOwogICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDsKICAgIH0gLy8gUHJpdmF0ZQogICAgOwoKICAgIF9wcm90by5fYWN0aXZhdGUgPSBmdW5jdGlvbiBfYWN0aXZhdGUoZWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBhY3RpdmVFbGVtZW50cyA9IGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVOYW1lID09PSAnVUwnIHx8IGNvbnRhaW5lci5ub2RlTmFtZSA9PT0gJ09MJykgPyAkKGNvbnRhaW5lcikuZmluZChTZWxlY3RvciQ5LkFDVElWRV9VTCkgOiAkKGNvbnRhaW5lcikuY2hpbGRyZW4oU2VsZWN0b3IkOS5BQ1RJVkUpOwogICAgICB2YXIgYWN0aXZlID0gYWN0aXZlRWxlbWVudHNbMF07CiAgICAgIHZhciBpc1RyYW5zaXRpb25pbmcgPSBjYWxsYmFjayAmJiBhY3RpdmUgJiYgJChhY3RpdmUpLmhhc0NsYXNzKENsYXNzTmFtZSQ5LkZBREUpOwoKICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5fdHJhbnNpdGlvbkNvbXBsZXRlKGVsZW1lbnQsIGFjdGl2ZSwgY2FsbGJhY2spOwogICAgICB9OwoKICAgICAgaWYgKGFjdGl2ZSAmJiBpc1RyYW5zaXRpb25pbmcpIHsKICAgICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudChhY3RpdmUpOwogICAgICAgICQoYWN0aXZlKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUkOS5TSE9XKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29tcGxldGUoKTsKICAgICAgfQogICAgfTsKCiAgICBfcHJvdG8uX3RyYW5zaXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uIF90cmFuc2l0aW9uQ29tcGxldGUoZWxlbWVudCwgYWN0aXZlLCBjYWxsYmFjaykgewogICAgICBpZiAoYWN0aXZlKSB7CiAgICAgICAgJChhY3RpdmUpLnJlbW92ZUNsYXNzKENsYXNzTmFtZSQ5LkFDVElWRSk7CiAgICAgICAgdmFyIGRyb3Bkb3duQ2hpbGQgPSAkKGFjdGl2ZS5wYXJlbnROb2RlKS5maW5kKFNlbGVjdG9yJDkuRFJPUERPV05fQUNUSVZFX0NISUxEKVswXTsKCiAgICAgICAgaWYgKGRyb3Bkb3duQ2hpbGQpIHsKICAgICAgICAgICQoZHJvcGRvd25DaGlsZCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lJDkuQUNUSVZFKTsKICAgICAgICB9CgogICAgICAgIGlmIChhY3RpdmUuZ2V0QXR0cmlidXRlKCdyb2xlJykgPT09ICd0YWInKSB7CiAgICAgICAgICBhY3RpdmUuc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgJChlbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUkOS5BQ1RJVkUpOwoKICAgICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdyb2xlJykgPT09ICd0YWInKSB7CiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLCB0cnVlKTsKICAgICAgfQoKICAgICAgVXRpbC5yZWZsb3coZWxlbWVudCk7CgogICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lJDkuRkFERSkpIHsKICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lJDkuU0hPVyk7CiAgICAgIH0KCiAgICAgIGlmIChlbGVtZW50LnBhcmVudE5vZGUgJiYgJChlbGVtZW50LnBhcmVudE5vZGUpLmhhc0NsYXNzKENsYXNzTmFtZSQ5LkRST1BET1dOX01FTlUpKSB7CiAgICAgICAgdmFyIGRyb3Bkb3duRWxlbWVudCA9ICQoZWxlbWVudCkuY2xvc2VzdChTZWxlY3RvciQ5LkRST1BET1dOKVswXTsKCiAgICAgICAgaWYgKGRyb3Bkb3duRWxlbWVudCkgewogICAgICAgICAgdmFyIGRyb3Bkb3duVG9nZ2xlTGlzdCA9IFtdLnNsaWNlLmNhbGwoZHJvcGRvd25FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU2VsZWN0b3IkOS5EUk9QRE9XTl9UT0dHTEUpKTsKICAgICAgICAgICQoZHJvcGRvd25Ub2dnbGVMaXN0KS5hZGRDbGFzcyhDbGFzc05hbWUkOS5BQ1RJVkUpOwogICAgICAgIH0KCiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTsKICAgICAgfQoKICAgICAgaWYgKGNhbGxiYWNrKSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfSAvLyBTdGF0aWMKICAgIDsKCiAgICBUYWIuX2pRdWVyeUludGVyZmFjZSA9IGZ1bmN0aW9uIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7CiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7CiAgICAgICAgdmFyIGRhdGEgPSAkdGhpcy5kYXRhKERBVEFfS0VZJDkpOwoKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIGRhdGEgPSBuZXcgVGFiKHRoaXMpOwogICAgICAgICAgJHRoaXMuZGF0YShEQVRBX0tFWSQ5LCBkYXRhKTsKICAgICAgICB9CgogICAgICAgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykgewogICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIk5vIG1ldGhvZCBuYW1lZCBcIiIgKyBjb25maWcgKyAiXCIiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfTsKCiAgICBfY3JlYXRlQ2xhc3MoVGFiLCBudWxsLCBbewogICAgICBrZXk6ICJWRVJTSU9OIiwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIFZFUlNJT04kOTsKICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBUYWI7CiAgfSgpOwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgoKICAkKGRvY3VtZW50KS5vbihFdmVudCQ5LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3RvciQ5LkRBVEFfVE9HR0xFLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgVGFiLl9qUXVlcnlJbnRlcmZhY2UuY2FsbCgkKHRoaXMpLCAnc2hvdycpOwogIH0pOwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIGpRdWVyeQogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqLwoKICAkLmZuW05BTUUkOV0gPSBUYWIuX2pRdWVyeUludGVyZmFjZTsKICAkLmZuW05BTUUkOV0uQ29uc3RydWN0b3IgPSBUYWI7CgogICQuZm5bTkFNRSQ5XS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgewogICAgJC5mbltOQU1FJDldID0gSlFVRVJZX05PX0NPTkZMSUNUJDk7CiAgICByZXR1cm4gVGFiLl9qUXVlcnlJbnRlcmZhY2U7CiAgfTsKICAvKioKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKiBDb25zdGFudHMKICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCgogIHZhciBOQU1FJGEgPSAndG9hc3QnOwogIHZhciBWRVJTSU9OJGEgPSAnNC40LjEnOwogIHZhciBEQVRBX0tFWSRhID0gJ2JzLnRvYXN0JzsKICB2YXIgRVZFTlRfS0VZJGEgPSAiLiIgKyBEQVRBX0tFWSRhOwogIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QkYSA9ICQuZm5bTkFNRSRhXTsKICB2YXIgRXZlbnQkYSA9IHsKICAgIENMSUNLX0RJU01JU1M6ICJjbGljay5kaXNtaXNzIiArIEVWRU5UX0tFWSRhLAogICAgSElERTogImhpZGUiICsgRVZFTlRfS0VZJGEsCiAgICBISURERU46ICJoaWRkZW4iICsgRVZFTlRfS0VZJGEsCiAgICBTSE9XOiAic2hvdyIgKyBFVkVOVF9LRVkkYSwKICAgIFNIT1dOOiAic2hvd24iICsgRVZFTlRfS0VZJGEKICB9OwogIHZhciBDbGFzc05hbWUkYSA9IHsKICAgIEZBREU6ICdmYWRlJywKICAgIEhJREU6ICdoaWRlJywKICAgIFNIT1c6ICdzaG93JywKICAgIFNIT1dJTkc6ICdzaG93aW5nJwogIH07CiAgdmFyIERlZmF1bHRUeXBlJDcgPSB7CiAgICBhbmltYXRpb246ICdib29sZWFuJywKICAgIGF1dG9oaWRlOiAnYm9vbGVhbicsCiAgICBkZWxheTogJ251bWJlcicKICB9OwogIHZhciBEZWZhdWx0JDcgPSB7CiAgICBhbmltYXRpb246IHRydWUsCiAgICBhdXRvaGlkZTogdHJ1ZSwKICAgIGRlbGF5OiA1MDAKICB9OwogIHZhciBTZWxlY3RvciRhID0gewogICAgREFUQV9ESVNNSVNTOiAnW2RhdGEtZGlzbWlzcz0idG9hc3QiXScKICB9OwogIC8qKgogICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAqIENsYXNzIERlZmluaXRpb24KICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgKi8KCiAgdmFyIFRvYXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFRvYXN0KGVsZW1lbnQsIGNvbmZpZykgewogICAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDsKICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7CiAgICAgIHRoaXMuX3RpbWVvdXQgPSBudWxsOwoKICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7CiAgICB9IC8vIEdldHRlcnMKCgogICAgdmFyIF9wcm90byA9IFRvYXN0LnByb3RvdHlwZTsgLy8gUHVibGljCgogICAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHNob3dFdmVudCA9ICQuRXZlbnQoRXZlbnQkYS5TSE9XKTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKHNob3dFdmVudCk7CgogICAgICBpZiAoc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5fY29uZmlnLmFuaW1hdGlvbikgewogICAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDbGFzc05hbWUkYS5GQURFKTsKICAgICAgfQoKICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7CiAgICAgICAgX3RoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDbGFzc05hbWUkYS5TSE9XSU5HKTsKCiAgICAgICAgX3RoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChDbGFzc05hbWUkYS5TSE9XKTsKCiAgICAgICAgJChfdGhpcy5fZWxlbWVudCkudHJpZ2dlcihFdmVudCRhLlNIT1dOKTsKCiAgICAgICAgaWYgKF90aGlzLl9jb25maWcuYXV0b2hpZGUpIHsKICAgICAgICAgIF90aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLmhpZGUoKTsKICAgICAgICAgIH0sIF90aGlzLl9jb25maWcuZGVsYXkpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDbGFzc05hbWUkYS5ISURFKTsKCiAgICAgIFV0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpOwoKICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKENsYXNzTmFtZSRhLlNIT1dJTkcpOwoKICAgICAgaWYgKHRoaXMuX2NvbmZpZy5hbmltYXRpb24pIHsKICAgICAgICB2YXIgdHJhbnNpdGlvbkR1cmF0aW9uID0gVXRpbC5nZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudCh0aGlzLl9lbGVtZW50KTsKICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb21wbGV0ZSgpOwogICAgICB9CiAgICB9OwoKICAgIF9wcm90by5oaWRlID0gZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgaWYgKCF0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDbGFzc05hbWUkYS5TSE9XKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGhpZGVFdmVudCA9ICQuRXZlbnQoRXZlbnQkYS5ISURFKTsKICAgICAgJCh0aGlzLl9lbGVtZW50KS50cmlnZ2VyKGhpZGVFdmVudCk7CgogICAgICBpZiAoaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLl9jbG9zZSgpOwogICAgfTsKCiAgICBfcHJvdG8uZGlzcG9zZSA9IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTsKICAgICAgdGhpcy5fdGltZW91dCA9IG51bGw7CgogICAgICBpZiAodGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ2xhc3NOYW1lJGEuU0hPVykpIHsKICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ2xhc3NOYW1lJGEuU0hPVyk7CiAgICAgIH0KCiAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEV2ZW50JGEuQ0xJQ0tfRElTTUlTUyk7CiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSRhKTsKICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7CiAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7CiAgICB9IC8vIFByaXZhdGUKICAgIDsKCiAgICBfcHJvdG8uX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7CiAgICAgIGNvbmZpZyA9IF9vYmplY3RTcHJlYWQyKHt9LCBEZWZhdWx0JDcsIHt9LCAkKHRoaXMuX2VsZW1lbnQpLmRhdGEoKSwge30sIF90eXBlb2YoY29uZmlnKSA9PT0gJ29iamVjdCcgJiYgY29uZmlnID8gY29uZmlnIDoge30pOwogICAgICBVdGlsLnR5cGVDaGVja0NvbmZpZyhOQU1FJGEsIGNvbmZpZywgdGhpcy5jb25zdHJ1Y3Rvci5EZWZhdWx0VHlwZSk7CiAgICAgIHJldHVybiBjb25maWc7CiAgICB9OwoKICAgIF9wcm90by5fc2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gX3NldExpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50JGEuQ0xJQ0tfRElTTUlTUywgU2VsZWN0b3IkYS5EQVRBX0RJU01JU1MsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLmhpZGUoKTsKICAgICAgfSk7CiAgICB9OwoKICAgIF9wcm90by5fY2xvc2UgPSBmdW5jdGlvbiBfY2xvc2UoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGNvbXBsZXRlID0gZnVuY3Rpb24gY29tcGxldGUoKSB7CiAgICAgICAgX3RoaXMzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ2xhc3NOYW1lJGEuSElERSk7CgogICAgICAgICQoX3RoaXMzLl9lbGVtZW50KS50cmlnZ2VyKEV2ZW50JGEuSElEREVOKTsKICAgICAgfTsKCiAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDbGFzc05hbWUkYS5TSE9XKTsKCiAgICAgIGlmICh0aGlzLl9jb25maWcuYW5pbWF0aW9uKSB7CiAgICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7CiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29tcGxldGUoKTsKICAgICAgfQogICAgfSAvLyBTdGF0aWMKICAgIDsKCiAgICBUb2FzdC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHsKICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyICRlbGVtZW50ID0gJCh0aGlzKTsKICAgICAgICB2YXIgZGF0YSA9ICRlbGVtZW50LmRhdGEoREFUQV9LRVkkYSk7CgogICAgICAgIHZhciBfY29uZmlnID0gX3R5cGVvZihjb25maWcpID09PSAnb2JqZWN0JyAmJiBjb25maWc7CgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgZGF0YSA9IG5ldyBUb2FzdCh0aGlzLCBfY29uZmlnKTsKICAgICAgICAgICRlbGVtZW50LmRhdGEoREFUQV9LRVkkYSwgZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVtjb25maWddID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJObyBtZXRob2QgbmFtZWQgXCIiICsgY29uZmlnICsgIlwiIik7CiAgICAgICAgICB9CgogICAgICAgICAgZGF0YVtjb25maWddKHRoaXMpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIF9jcmVhdGVDbGFzcyhUb2FzdCwgbnVsbCwgW3sKICAgICAga2V5OiAiVkVSU0lPTiIsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiBWRVJTSU9OJGE7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiRGVmYXVsdFR5cGUiLAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gRGVmYXVsdFR5cGUkNzsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJEZWZhdWx0IiwKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIERlZmF1bHQkNzsKICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBUb2FzdDsKICB9KCk7CiAgLyoqCiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICogalF1ZXJ5CiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICovCgoKICAkLmZuW05BTUUkYV0gPSBUb2FzdC5falF1ZXJ5SW50ZXJmYWNlOwogICQuZm5bTkFNRSRhXS5Db25zdHJ1Y3RvciA9IFRvYXN0OwoKICAkLmZuW05BTUUkYV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgICQuZm5bTkFNRSRhXSA9IEpRVUVSWV9OT19DT05GTElDVCRhOwogICAgcmV0dXJuIFRvYXN0Ll9qUXVlcnlJbnRlcmZhY2U7CiAgfTsKCiAgZXhwb3J0cy5BbGVydCA9IEFsZXJ0OwogIGV4cG9ydHMuQnV0dG9uID0gQnV0dG9uOwogIGV4cG9ydHMuQ2Fyb3VzZWwgPSBDYXJvdXNlbDsKICBleHBvcnRzLkNvbGxhcHNlID0gQ29sbGFwc2U7CiAgZXhwb3J0cy5Ecm9wZG93biA9IERyb3Bkb3duOwogIGV4cG9ydHMuTW9kYWwgPSBNb2RhbDsKICBleHBvcnRzLlBvcG92ZXIgPSBQb3BvdmVyOwogIGV4cG9ydHMuU2Nyb2xsc3B5ID0gU2Nyb2xsU3B5OwogIGV4cG9ydHMuVGFiID0gVGFiOwogIGV4cG9ydHMuVG9hc3QgPSBUb2FzdDsKICBleHBvcnRzLlRvb2x0aXAgPSBUb29sdGlwOwogIGV4cG9ydHMuVXRpbCA9IFV0aWw7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgewogICAgdmFsdWU6IHRydWUKICB9KTsKfSk7"},{"version":3,"sources":["../../js/src/util.js","../../js/src/alert.js","../../js/src/button.js","../../js/src/carousel.js","../../js/src/collapse.js","../../js/src/dropdown.js","../../js/src/modal.js","../../js/src/tools/sanitizer.js","../../js/src/tooltip.js","../../js/src/popover.js","../../js/src/scrollspy.js","../../js/src/tab.js","../../js/src/toast.js"],"names":["TRANSITION_END","MAX_UID","MILLISECONDS_MULTIPLIER","bindType","delegateType","handle","$","event","called","Util","setTimeout","getSpecialTransitionEndEvent","getUID","prefix","Math","document","getSelectorFromElement","selector","element","hrefAttr","getTransitionDurationFromElement","transitionDuration","transitionDelay","floatTransitionDuration","parseFloat","floatTransitionDelay","reflow","triggerTransitionEnd","supportsTransitionEnd","Boolean","isElement","obj","typeCheckConfig","Object","expectedTypes","configTypes","value","config","valueType","toType","componentName","findShadowRoot","root","jQueryDetection","version","minMajor","ltMajor","minMinor","minPatch","maxMajor","setTransitionEndSupport","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","Selector","DISMISS","Event","CLOSE","CLOSED","CLICK_DATA_API","ClassName","ALERT","FADE","SHOW","Alert","close","rootElement","customEvent","dispose","_getRootElement","parent","_triggerCloseEvent","closeEvent","_removeElement","_destroyElement","_jQueryInterface","$element","data","_handleDismiss","alertInstance","ACTIVE","BUTTON","FOCUS","DATA_TOGGLE_CARROT","DATA_TOGGLES","DATA_TOGGLE","DATA_TOGGLES_BUTTONS","INPUT","FOCUS_BLUR_DATA_API","LOAD_DATA_API","Button","toggle","triggerChangeEvent","addAriaPressed","input","activeElement","button","inputBtn","buttons","i","len","ARROW_LEFT_KEYCODE","ARROW_RIGHT_KEYCODE","TOUCHEVENT_COMPAT_WAIT","SWIPE_THRESHOLD","Default","interval","keyboard","slide","pause","wrap","touch","DefaultType","Direction","NEXT","PREV","LEFT","RIGHT","SLIDE","SLID","KEYDOWN","MOUSEENTER","MOUSELEAVE","TOUCHSTART","TOUCHMOVE","TOUCHEND","POINTERDOWN","POINTERUP","DRAG_START","CAROUSEL","ITEM","POINTER_EVENT","ACTIVE_ITEM","ITEM_IMG","NEXT_PREV","INDICATORS","DATA_SLIDE","DATA_RIDE","PointerType","TOUCH","PEN","Carousel","navigator","window","next","nextWhenVisible","prev","clearInterval","cycle","setInterval","to","activeIndex","index","direction","_getConfig","_handleSwipe","absDeltax","_addEventListeners","_addTouchEventListeners","start","move","end","clearTimeout","e","_keydown","_getItemIndex","_getItemByDirection","isNextDirection","isPrevDirection","lastItemIndex","isGoingToWrap","delta","itemIndex","_triggerSlideEvent","targetIndex","fromIndex","slideEvent","relatedTarget","from","_setActiveIndicatorElement","indicators","nextIndicator","_slide","activeElementIndex","nextElement","nextElementIndex","isCycling","directionalClassName","orderClassName","eventDirectionName","slidEvent","nextElementInterval","parseInt","_config","action","_dataApiClickHandler","target","slideIndex","carousels","$carousel","SHOWN","HIDE","HIDDEN","COLLAPSE","COLLAPSING","COLLAPSED","Dimension","WIDTH","HEIGHT","ACTIVES","Collapse","toggleList","elem","filterElement","foundElem","show","actives","activesData","startEvent","dimension","complete","capitalizedDimension","scrollSize","hide","triggerArrayLength","trigger","$elem","setTransitioning","_getDimension","hasWidth","_getParent","children","_addAriaAndCollapsedClass","isOpen","triggerArray","_getTargetFromElement","$this","$trigger","selectors","$target","ESCAPE_KEYCODE","SPACE_KEYCODE","TAB_KEYCODE","ARROW_UP_KEYCODE","ARROW_DOWN_KEYCODE","RIGHT_MOUSE_BUTTON_WHICH","REGEXP_KEYDOWN","CLICK","KEYDOWN_DATA_API","KEYUP_DATA_API","DISABLED","DROPUP","DROPRIGHT","DROPLEFT","MENURIGHT","MENULEFT","POSITION_STATIC","FORM_CHILD","MENU","NAVBAR_NAV","VISIBLE_ITEMS","AttachmentMap","TOP","TOPEND","BOTTOM","BOTTOMEND","RIGHTEND","LEFTEND","offset","flip","boundary","reference","display","popperConfig","Dropdown","isActive","usePopper","_element","showEvent","referenceElement","hideEvent","update","_getMenuElement","_getPlacement","$parentDropdown","placement","_detectNavbar","_getOffset","_getPopperConfig","modifiers","enabled","preventOverflow","boundariesElement","_clearMenus","toggles","context","dropdownMenu","_getParentFromElement","_dataApiKeydownHandler","items","backdrop","focus","HIDE_PREVENTED","FOCUSIN","RESIZE","CLICK_DISMISS","KEYDOWN_DISMISS","MOUSEUP_DISMISS","MOUSEDOWN_DISMISS","SCROLLABLE","SCROLLBAR_MEASURER","BACKDROP","OPEN","STATIC","DIALOG","MODAL_BODY","DATA_DISMISS","FIXED_CONTENT","STICKY_CONTENT","Modal","transition","handleUpdate","_triggerBackdropTransition","hideEventPrevented","modalTransitionDuration","_showElement","modalBody","Node","shownEvent","transitionComplete","_enforceFocus","_setEscapeEvent","_setResizeEvent","_hideModal","_removeBackdrop","_showBackdrop","animate","callback","backdropTransitionDuration","callbackRemove","_adjustDialog","isModalOverflowing","_resetAdjustments","_checkScrollbar","rect","_setScrollbar","fixedContent","stickyContent","actualPadding","calculatedPadding","actualMargin","calculatedMargin","_resetScrollbar","padding","elements","margin","_getScrollbarWidth","scrollDiv","scrollbarWidth","uriAttrs","ARIA_ATTRIBUTE_PATTERN","DefaultWhitelist","a","area","b","br","col","code","div","em","hr","h1","h2","h3","h4","h5","h6","img","li","ol","p","pre","s","small","span","sub","sup","strong","u","ul","SAFE_URL_PATTERN","DATA_URL_PATTERN","attrName","attr","allowedAttributeList","regExp","attrRegex","l","unsafeHtml","sanitizeFn","domParser","createdDocument","whitelistKeys","el","elName","attributeList","whitelistedAttributes","whiteList","allowedAttribute","CLASS_PREFIX","BSCLS_PREFIX_REGEX","DISALLOWED_ATTRIBUTES","animation","template","title","delay","html","container","fallbackPlacement","sanitize","AUTO","HoverState","OUT","INSERTED","FOCUSOUT","TOOLTIP","TOOLTIP_INNER","ARROW","Trigger","HOVER","MANUAL","Tooltip","enable","disable","toggleEnabled","dataKey","shadowRoot","isInTheDom","tip","tipId","attachment","prevHoverState","isWithContent","addAttachmentClass","getTipElement","setContent","setElementContent","content","sanitizeHtml","getTitle","defaultBsConfig","behavior","arrow","onCreate","onUpdate","_getContainer","_getAttachment","_setListeners","triggers","eventIn","eventOut","_fixTitle","titleType","_enter","_leave","_isWithActiveTrigger","dataAttributes","_getDelegateConfig","_cleanTipClass","$tip","tabClass","_handlePopperPlacementChange","popperInstance","popperData","_fixTransition","initConfigAnimation","TITLE","CONTENT","Popover","_getContent","method","ACTIVATE","SCROLL","DROPDOWN_ITEM","DROPDOWN_MENU","DATA_SPY","NAV_LIST_GROUP","NAV_LINKS","NAV_ITEMS","LIST_ITEMS","DROPDOWN","DROPDOWN_ITEMS","DROPDOWN_TOGGLE","OffsetMethod","OFFSET","POSITION","ScrollSpy","refresh","autoMethod","offsetMethod","offsetBase","targets","targetSelector","targetBCR","item","id","_getScrollTop","_getScrollHeight","_getOffsetHeight","_process","scrollTop","scrollHeight","maxScroll","offsetLength","isActiveTarget","_activate","queries","$link","_clear","node","scrollSpys","scrollSpysLength","$spy","ACTIVE_UL","DROPDOWN_ACTIVE_CHILD","Tab","listElement","itemSelector","previous","hiddenEvent","activeElements","active","isTransitioning","_transitionComplete","dropdownChild","dropdownElement","dropdownToggleList","SHOWING","autohide","Toast","_close"],"mappings":"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","sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): util.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Private TransitionEnd Helpers\n * ------------------------------------------------------------------------\n */\n\nconst TRANSITION_END = 'transitionend'\nconst MAX_UID = 1000000\nconst MILLISECONDS_MULTIPLIER = 1000\n\n// Shoutout AngusCroll (https://goo.gl/pxwQGp)\nfunction toType(obj) {\n  return {}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\nfunction getSpecialTransitionEndEvent() {\n  return {\n    bindType: TRANSITION_END,\n    delegateType: TRANSITION_END,\n    handle(event) {\n      if ($(event.target).is(this)) {\n        return event.handleObj.handler.apply(this, arguments) // eslint-disable-line prefer-rest-params\n      }\n      return undefined // eslint-disable-line no-undefined\n    }\n  }\n}\n\nfunction transitionEndEmulator(duration) {\n  let called = false\n\n  $(this).one(Util.TRANSITION_END, () => {\n    called = true\n  })\n\n  setTimeout(() => {\n    if (!called) {\n      Util.triggerTransitionEnd(this)\n    }\n  }, duration)\n\n  return this\n}\n\nfunction setTransitionEndSupport() {\n  $.fn.emulateTransitionEnd = transitionEndEmulator\n  $.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent()\n}\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\n\nconst Util = {\n\n  TRANSITION_END: 'bsTransitionEnd',\n\n  getUID(prefix) {\n    do {\n      // eslint-disable-next-line no-bitwise\n      prefix += ~~(Math.random() * MAX_UID) // \"~~\" acts like a faster Math.floor() here\n    } while (document.getElementById(prefix))\n    return prefix\n  },\n\n  getSelectorFromElement(element) {\n    let selector = element.getAttribute('data-target')\n\n    if (!selector || selector === '#') {\n      const hrefAttr = element.getAttribute('href')\n      selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : ''\n    }\n\n    try {\n      return document.querySelector(selector) ? selector : null\n    } catch (err) {\n      return null\n    }\n  },\n\n  getTransitionDurationFromElement(element) {\n    if (!element) {\n      return 0\n    }\n\n    // Get transition-duration of the element\n    let transitionDuration = $(element).css('transition-duration')\n    let transitionDelay = $(element).css('transition-delay')\n\n    const floatTransitionDuration = parseFloat(transitionDuration)\n    const floatTransitionDelay = parseFloat(transitionDelay)\n\n    // Return 0 if element or transition duration is not found\n    if (!floatTransitionDuration && !floatTransitionDelay) {\n      return 0\n    }\n\n    // If multiple durations are defined, take the first\n    transitionDuration = transitionDuration.split(',')[0]\n    transitionDelay = transitionDelay.split(',')[0]\n\n    return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n  },\n\n  reflow(element) {\n    return element.offsetHeight\n  },\n\n  triggerTransitionEnd(element) {\n    $(element).trigger(TRANSITION_END)\n  },\n\n  // TODO: Remove in v5\n  supportsTransitionEnd() {\n    return Boolean(TRANSITION_END)\n  },\n\n  isElement(obj) {\n    return (obj[0] || obj).nodeType\n  },\n\n  typeCheckConfig(componentName, config, configTypes) {\n    for (const property in configTypes) {\n      if (Object.prototype.hasOwnProperty.call(configTypes, property)) {\n        const expectedTypes = configTypes[property]\n        const value         = config[property]\n        const valueType     = value && Util.isElement(value)\n          ? 'element' : toType(value)\n\n        if (!new RegExp(expectedTypes).test(valueType)) {\n          throw new Error(\n            `${componentName.toUpperCase()}: ` +\n            `Option \"${property}\" provided type \"${valueType}\" ` +\n            `but expected type \"${expectedTypes}\".`)\n        }\n      }\n    }\n  },\n\n  findShadowRoot(element) {\n    if (!document.documentElement.attachShadow) {\n      return null\n    }\n\n    // Can find the shadow root otherwise it'll return the document\n    if (typeof element.getRootNode === 'function') {\n      const root = element.getRootNode()\n      return root instanceof ShadowRoot ? root : null\n    }\n\n    if (element instanceof ShadowRoot) {\n      return element\n    }\n\n    // when we don't find a shadow root\n    if (!element.parentNode) {\n      return null\n    }\n\n    return Util.findShadowRoot(element.parentNode)\n  },\n\n  jQueryDetection() {\n    if (typeof $ === 'undefined') {\n      throw new TypeError('Bootstrap\\'s JavaScript requires jQuery. jQuery must be included before Bootstrap\\'s JavaScript.')\n    }\n\n    const version = $.fn.jquery.split(' ')[0].split('.')\n    const minMajor = 1\n    const ltMajor = 2\n    const minMinor = 9\n    const minPatch = 1\n    const maxMajor = 4\n\n    if (version[0] < ltMajor && version[1] < minMinor || version[0] === minMajor && version[1] === minMinor && version[2] < minPatch || version[0] >= maxMajor) {\n      throw new Error('Bootstrap\\'s JavaScript requires at least jQuery v1.9.1 but less than v4.0.0')\n    }\n  }\n}\n\nUtil.jQueryDetection()\nsetTransitionEndSupport()\n\nexport default Util\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'alert'\nconst VERSION             = '4.4.1'\nconst DATA_KEY            = 'bs.alert'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\n\nconst Selector = {\n  DISMISS : '[data-dismiss=\"alert\"]'\n}\n\nconst Event = {\n  CLOSE          : `close${EVENT_KEY}`,\n  CLOSED         : `closed${EVENT_KEY}`,\n  CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  ALERT : 'alert',\n  FADE  : 'fade',\n  SHOW  : 'show'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Alert {\n  constructor(element) {\n    this._element = element\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n\n  close(element) {\n    let rootElement = this._element\n    if (element) {\n      rootElement = this._getRootElement(element)\n    }\n\n    const customEvent = this._triggerCloseEvent(rootElement)\n\n    if (customEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._removeElement(rootElement)\n  }\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    this._element = null\n  }\n\n  // Private\n\n  _getRootElement(element) {\n    const selector = Util.getSelectorFromElement(element)\n    let parent     = false\n\n    if (selector) {\n      parent = document.querySelector(selector)\n    }\n\n    if (!parent) {\n      parent = $(element).closest(`.${ClassName.ALERT}`)[0]\n    }\n\n    return parent\n  }\n\n  _triggerCloseEvent(element) {\n    const closeEvent = $.Event(Event.CLOSE)\n\n    $(element).trigger(closeEvent)\n    return closeEvent\n  }\n\n  _removeElement(element) {\n    $(element).removeClass(ClassName.SHOW)\n\n    if (!$(element).hasClass(ClassName.FADE)) {\n      this._destroyElement(element)\n      return\n    }\n\n    const transitionDuration = Util.getTransitionDurationFromElement(element)\n\n    $(element)\n      .one(Util.TRANSITION_END, (event) => this._destroyElement(element, event))\n      .emulateTransitionEnd(transitionDuration)\n  }\n\n  _destroyElement(element) {\n    $(element)\n      .detach()\n      .trigger(Event.CLOSED)\n      .remove()\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      const $element = $(this)\n      let data       = $element.data(DATA_KEY)\n\n      if (!data) {\n        data = new Alert(this)\n        $element.data(DATA_KEY, data)\n      }\n\n      if (config === 'close') {\n        data[config](this)\n      }\n    })\n  }\n\n  static _handleDismiss(alertInstance) {\n    return function (event) {\n      if (event) {\n        event.preventDefault()\n      }\n\n      alertInstance.close(this)\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document).on(\n  Event.CLICK_DATA_API,\n  Selector.DISMISS,\n  Alert._handleDismiss(new Alert())\n)\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME]             = Alert._jQueryInterface\n$.fn[NAME].Constructor = Alert\n$.fn[NAME].noConflict  = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Alert._jQueryInterface\n}\n\nexport default Alert\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): button.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'button'\nconst VERSION             = '4.4.1'\nconst DATA_KEY            = 'bs.button'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\n\nconst ClassName = {\n  ACTIVE : 'active',\n  BUTTON : 'btn',\n  FOCUS  : 'focus'\n}\n\nconst Selector = {\n  DATA_TOGGLE_CARROT   : '[data-toggle^=\"button\"]',\n  DATA_TOGGLES         : '[data-toggle=\"buttons\"]',\n  DATA_TOGGLE          : '[data-toggle=\"button\"]',\n  DATA_TOGGLES_BUTTONS : '[data-toggle=\"buttons\"] .btn',\n  INPUT                : 'input:not([type=\"hidden\"])',\n  ACTIVE               : '.active',\n  BUTTON               : '.btn'\n}\n\nconst Event = {\n  CLICK_DATA_API      : `click${EVENT_KEY}${DATA_API_KEY}`,\n  FOCUS_BLUR_DATA_API : `focus${EVENT_KEY}${DATA_API_KEY} ` +\n                          `blur${EVENT_KEY}${DATA_API_KEY}`,\n  LOAD_DATA_API       : `load${EVENT_KEY}${DATA_API_KEY}`\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Button {\n  constructor(element) {\n    this._element = element\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n\n  toggle() {\n    let triggerChangeEvent = true\n    let addAriaPressed = true\n    const rootElement = $(this._element).closest(\n      Selector.DATA_TOGGLES\n    )[0]\n\n    if (rootElement) {\n      const input = this._element.querySelector(Selector.INPUT)\n\n      if (input) {\n        if (input.type === 'radio') {\n          if (input.checked &&\n            this._element.classList.contains(ClassName.ACTIVE)) {\n            triggerChangeEvent = false\n          } else {\n            const activeElement = rootElement.querySelector(Selector.ACTIVE)\n\n            if (activeElement) {\n              $(activeElement).removeClass(ClassName.ACTIVE)\n            }\n          }\n        } else if (input.type === 'checkbox') {\n          if (this._element.tagName === 'LABEL' && input.checked === this._element.classList.contains(ClassName.ACTIVE)) {\n            triggerChangeEvent = false\n          }\n        } else {\n          // if it's not a radio button or checkbox don't add a pointless/invalid checked property to the input\n          triggerChangeEvent = false\n        }\n\n        if (triggerChangeEvent) {\n          input.checked = !this._element.classList.contains(ClassName.ACTIVE)\n          $(input).trigger('change')\n        }\n\n        input.focus()\n        addAriaPressed = false\n      }\n    }\n\n    if (!(this._element.hasAttribute('disabled') || this._element.classList.contains('disabled'))) {\n      if (addAriaPressed) {\n        this._element.setAttribute('aria-pressed',\n          !this._element.classList.contains(ClassName.ACTIVE))\n      }\n\n      if (triggerChangeEvent) {\n        $(this._element).toggleClass(ClassName.ACTIVE)\n      }\n    }\n  }\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    this._element = null\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n\n      if (!data) {\n        data = new Button(this)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (config === 'toggle') {\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE_CARROT, (event) => {\n    let button = event.target\n\n    if (!$(button).hasClass(ClassName.BUTTON)) {\n      button = $(button).closest(Selector.BUTTON)[0]\n    }\n\n    if (!button || button.hasAttribute('disabled') || button.classList.contains('disabled')) {\n      event.preventDefault() // work around Firefox bug #1540995\n    } else {\n      const inputBtn = button.querySelector(Selector.INPUT)\n\n      if (inputBtn && (inputBtn.hasAttribute('disabled') || inputBtn.classList.contains('disabled'))) {\n        event.preventDefault() // work around Firefox bug #1540995\n        return\n      }\n\n      Button._jQueryInterface.call($(button), 'toggle')\n    }\n  })\n  .on(Event.FOCUS_BLUR_DATA_API, Selector.DATA_TOGGLE_CARROT, (event) => {\n    const button = $(event.target).closest(Selector.BUTTON)[0]\n    $(button).toggleClass(ClassName.FOCUS, /^focus(in)?$/.test(event.type))\n  })\n\n$(window).on(Event.LOAD_DATA_API, () => {\n  // ensure correct active class is set to match the controls' actual values/states\n\n  // find all checkboxes/readio buttons inside data-toggle groups\n  let buttons = [].slice.call(document.querySelectorAll(Selector.DATA_TOGGLES_BUTTONS))\n  for (let i = 0, len = buttons.length; i < len; i++) {\n    const button = buttons[i]\n    const input = button.querySelector(Selector.INPUT)\n    if (input.checked || input.hasAttribute('checked')) {\n      button.classList.add(ClassName.ACTIVE)\n    } else {\n      button.classList.remove(ClassName.ACTIVE)\n    }\n  }\n\n  // find all button toggles\n  buttons = [].slice.call(document.querySelectorAll(Selector.DATA_TOGGLE))\n  for (let i = 0, len = buttons.length; i < len; i++) {\n    const button = buttons[i]\n    if (button.getAttribute('aria-pressed') === 'true') {\n      button.classList.add(ClassName.ACTIVE)\n    } else {\n      button.classList.remove(ClassName.ACTIVE)\n    }\n  }\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Button._jQueryInterface\n$.fn[NAME].Constructor = Button\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Button._jQueryInterface\n}\n\nexport default Button\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): carousel.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                   = 'carousel'\nconst VERSION                = '4.4.1'\nconst DATA_KEY               = 'bs.carousel'\nconst EVENT_KEY              = `.${DATA_KEY}`\nconst DATA_API_KEY           = '.data-api'\nconst JQUERY_NO_CONFLICT     = $.fn[NAME]\nconst ARROW_LEFT_KEYCODE     = 37 // KeyboardEvent.which value for left arrow key\nconst ARROW_RIGHT_KEYCODE    = 39 // KeyboardEvent.which value for right arrow key\nconst TOUCHEVENT_COMPAT_WAIT = 500 // Time for mouse compat events to fire after touch\nconst SWIPE_THRESHOLD        = 40\n\nconst Default = {\n  interval : 5000,\n  keyboard : true,\n  slide    : false,\n  pause    : 'hover',\n  wrap     : true,\n  touch    : true\n}\n\nconst DefaultType = {\n  interval : '(number|boolean)',\n  keyboard : 'boolean',\n  slide    : '(boolean|string)',\n  pause    : '(string|boolean)',\n  wrap     : 'boolean',\n  touch    : 'boolean'\n}\n\nconst Direction = {\n  NEXT     : 'next',\n  PREV     : 'prev',\n  LEFT     : 'left',\n  RIGHT    : 'right'\n}\n\nconst Event = {\n  SLIDE          : `slide${EVENT_KEY}`,\n  SLID           : `slid${EVENT_KEY}`,\n  KEYDOWN        : `keydown${EVENT_KEY}`,\n  MOUSEENTER     : `mouseenter${EVENT_KEY}`,\n  MOUSELEAVE     : `mouseleave${EVENT_KEY}`,\n  TOUCHSTART     : `touchstart${EVENT_KEY}`,\n  TOUCHMOVE      : `touchmove${EVENT_KEY}`,\n  TOUCHEND       : `touchend${EVENT_KEY}`,\n  POINTERDOWN    : `pointerdown${EVENT_KEY}`,\n  POINTERUP      : `pointerup${EVENT_KEY}`,\n  DRAG_START     : `dragstart${EVENT_KEY}`,\n  LOAD_DATA_API  : `load${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  CAROUSEL      : 'carousel',\n  ACTIVE        : 'active',\n  SLIDE         : 'slide',\n  RIGHT         : 'carousel-item-right',\n  LEFT          : 'carousel-item-left',\n  NEXT          : 'carousel-item-next',\n  PREV          : 'carousel-item-prev',\n  ITEM          : 'carousel-item',\n  POINTER_EVENT : 'pointer-event'\n}\n\nconst Selector = {\n  ACTIVE      : '.active',\n  ACTIVE_ITEM : '.active.carousel-item',\n  ITEM        : '.carousel-item',\n  ITEM_IMG    : '.carousel-item img',\n  NEXT_PREV   : '.carousel-item-next, .carousel-item-prev',\n  INDICATORS  : '.carousel-indicators',\n  DATA_SLIDE  : '[data-slide], [data-slide-to]',\n  DATA_RIDE   : '[data-ride=\"carousel\"]'\n}\n\nconst PointerType = {\n  TOUCH : 'touch',\n  PEN   : 'pen'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nclass Carousel {\n  constructor(element, config) {\n    this._items         = null\n    this._interval      = null\n    this._activeElement = null\n    this._isPaused      = false\n    this._isSliding     = false\n    this.touchTimeout   = null\n    this.touchStartX    = 0\n    this.touchDeltaX    = 0\n\n    this._config            = this._getConfig(config)\n    this._element           = element\n    this._indicatorsElement = this._element.querySelector(Selector.INDICATORS)\n    this._touchSupported    = 'ontouchstart' in document.documentElement || navigator.maxTouchPoints > 0\n    this._pointerEvent      = Boolean(window.PointerEvent || window.MSPointerEvent)\n\n    this._addEventListeners()\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  // Public\n\n  next() {\n    if (!this._isSliding) {\n      this._slide(Direction.NEXT)\n    }\n  }\n\n  nextWhenVisible() {\n    // Don't call next when the page isn't visible\n    // or the carousel or its parent isn't visible\n    if (!document.hidden &&\n      ($(this._element).is(':visible') && $(this._element).css('visibility') !== 'hidden')) {\n      this.next()\n    }\n  }\n\n  prev() {\n    if (!this._isSliding) {\n      this._slide(Direction.PREV)\n    }\n  }\n\n  pause(event) {\n    if (!event) {\n      this._isPaused = true\n    }\n\n    if (this._element.querySelector(Selector.NEXT_PREV)) {\n      Util.triggerTransitionEnd(this._element)\n      this.cycle(true)\n    }\n\n    clearInterval(this._interval)\n    this._interval = null\n  }\n\n  cycle(event) {\n    if (!event) {\n      this._isPaused = false\n    }\n\n    if (this._interval) {\n      clearInterval(this._interval)\n      this._interval = null\n    }\n\n    if (this._config.interval && !this._isPaused) {\n      this._interval = setInterval(\n        (document.visibilityState ? this.nextWhenVisible : this.next).bind(this),\n        this._config.interval\n      )\n    }\n  }\n\n  to(index) {\n    this._activeElement = this._element.querySelector(Selector.ACTIVE_ITEM)\n\n    const activeIndex = this._getItemIndex(this._activeElement)\n\n    if (index > this._items.length - 1 || index < 0) {\n      return\n    }\n\n    if (this._isSliding) {\n      $(this._element).one(Event.SLID, () => this.to(index))\n      return\n    }\n\n    if (activeIndex === index) {\n      this.pause()\n      this.cycle()\n      return\n    }\n\n    const direction = index > activeIndex\n      ? Direction.NEXT\n      : Direction.PREV\n\n    this._slide(direction, this._items[index])\n  }\n\n  dispose() {\n    $(this._element).off(EVENT_KEY)\n    $.removeData(this._element, DATA_KEY)\n\n    this._items             = null\n    this._config            = null\n    this._element           = null\n    this._interval          = null\n    this._isPaused          = null\n    this._isSliding         = null\n    this._activeElement     = null\n    this._indicatorsElement = null\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...config\n    }\n    Util.typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _handleSwipe() {\n    const absDeltax = Math.abs(this.touchDeltaX)\n\n    if (absDeltax <= SWIPE_THRESHOLD) {\n      return\n    }\n\n    const direction = absDeltax / this.touchDeltaX\n\n    this.touchDeltaX = 0\n\n    // swipe left\n    if (direction > 0) {\n      this.prev()\n    }\n\n    // swipe right\n    if (direction < 0) {\n      this.next()\n    }\n  }\n\n  _addEventListeners() {\n    if (this._config.keyboard) {\n      $(this._element)\n        .on(Event.KEYDOWN, (event) => this._keydown(event))\n    }\n\n    if (this._config.pause === 'hover') {\n      $(this._element)\n        .on(Event.MOUSEENTER, (event) => this.pause(event))\n        .on(Event.MOUSELEAVE, (event) => this.cycle(event))\n    }\n\n    if (this._config.touch) {\n      this._addTouchEventListeners()\n    }\n  }\n\n  _addTouchEventListeners() {\n    if (!this._touchSupported) {\n      return\n    }\n\n    const start = (event) => {\n      if (this._pointerEvent && PointerType[event.originalEvent.pointerType.toUpperCase()]) {\n        this.touchStartX = event.originalEvent.clientX\n      } else if (!this._pointerEvent) {\n        this.touchStartX = event.originalEvent.touches[0].clientX\n      }\n    }\n\n    const move = (event) => {\n      // ensure swiping with one touch and not pinching\n      if (event.originalEvent.touches && event.originalEvent.touches.length > 1) {\n        this.touchDeltaX = 0\n      } else {\n        this.touchDeltaX = event.originalEvent.touches[0].clientX - this.touchStartX\n      }\n    }\n\n    const end = (event) => {\n      if (this._pointerEvent && PointerType[event.originalEvent.pointerType.toUpperCase()]) {\n        this.touchDeltaX = event.originalEvent.clientX - this.touchStartX\n      }\n\n      this._handleSwipe()\n      if (this._config.pause === 'hover') {\n        // If it's a touch-enabled device, mouseenter/leave are fired as\n        // part of the mouse compatibility events on first tap - the carousel\n        // would stop cycling until user tapped out of it;\n        // here, we listen for touchend, explicitly pause the carousel\n        // (as if it's the second time we tap on it, mouseenter compat event\n        // is NOT fired) and after a timeout (to allow for mouse compatibility\n        // events to fire) we explicitly restart cycling\n\n        this.pause()\n        if (this.touchTimeout) {\n          clearTimeout(this.touchTimeout)\n        }\n        this.touchTimeout = setTimeout((event) => this.cycle(event), TOUCHEVENT_COMPAT_WAIT + this._config.interval)\n      }\n    }\n\n    $(this._element.querySelectorAll(Selector.ITEM_IMG)).on(Event.DRAG_START, (e) => e.preventDefault())\n    if (this._pointerEvent) {\n      $(this._element).on(Event.POINTERDOWN, (event) => start(event))\n      $(this._element).on(Event.POINTERUP, (event) => end(event))\n\n      this._element.classList.add(ClassName.POINTER_EVENT)\n    } else {\n      $(this._element).on(Event.TOUCHSTART, (event) => start(event))\n      $(this._element).on(Event.TOUCHMOVE, (event) => move(event))\n      $(this._element).on(Event.TOUCHEND, (event) => end(event))\n    }\n  }\n\n  _keydown(event) {\n    if (/input|textarea/i.test(event.target.tagName)) {\n      return\n    }\n\n    switch (event.which) {\n      case ARROW_LEFT_KEYCODE:\n        event.preventDefault()\n        this.prev()\n        break\n      case ARROW_RIGHT_KEYCODE:\n        event.preventDefault()\n        this.next()\n        break\n      default:\n    }\n  }\n\n  _getItemIndex(element) {\n    this._items = element && element.parentNode\n      ? [].slice.call(element.parentNode.querySelectorAll(Selector.ITEM))\n      : []\n    return this._items.indexOf(element)\n  }\n\n  _getItemByDirection(direction, activeElement) {\n    const isNextDirection = direction === Direction.NEXT\n    const isPrevDirection = direction === Direction.PREV\n    const activeIndex     = this._getItemIndex(activeElement)\n    const lastItemIndex   = this._items.length - 1\n    const isGoingToWrap   = isPrevDirection && activeIndex === 0 ||\n                            isNextDirection && activeIndex === lastItemIndex\n\n    if (isGoingToWrap && !this._config.wrap) {\n      return activeElement\n    }\n\n    const delta     = direction === Direction.PREV ? -1 : 1\n    const itemIndex = (activeIndex + delta) % this._items.length\n\n    return itemIndex === -1\n      ? this._items[this._items.length - 1] : this._items[itemIndex]\n  }\n\n  _triggerSlideEvent(relatedTarget, eventDirectionName) {\n    const targetIndex = this._getItemIndex(relatedTarget)\n    const fromIndex = this._getItemIndex(this._element.querySelector(Selector.ACTIVE_ITEM))\n    const slideEvent = $.Event(Event.SLIDE, {\n      relatedTarget,\n      direction: eventDirectionName,\n      from: fromIndex,\n      to: targetIndex\n    })\n\n    $(this._element).trigger(slideEvent)\n\n    return slideEvent\n  }\n\n  _setActiveIndicatorElement(element) {\n    if (this._indicatorsElement) {\n      const indicators = [].slice.call(this._indicatorsElement.querySelectorAll(Selector.ACTIVE))\n      $(indicators)\n        .removeClass(ClassName.ACTIVE)\n\n      const nextIndicator = this._indicatorsElement.children[\n        this._getItemIndex(element)\n      ]\n\n      if (nextIndicator) {\n        $(nextIndicator).addClass(ClassName.ACTIVE)\n      }\n    }\n  }\n\n  _slide(direction, element) {\n    const activeElement = this._element.querySelector(Selector.ACTIVE_ITEM)\n    const activeElementIndex = this._getItemIndex(activeElement)\n    const nextElement   = element || activeElement &&\n      this._getItemByDirection(direction, activeElement)\n    const nextElementIndex = this._getItemIndex(nextElement)\n    const isCycling = Boolean(this._interval)\n\n    let directionalClassName\n    let orderClassName\n    let eventDirectionName\n\n    if (direction === Direction.NEXT) {\n      directionalClassName = ClassName.LEFT\n      orderClassName = ClassName.NEXT\n      eventDirectionName = Direction.LEFT\n    } else {\n      directionalClassName = ClassName.RIGHT\n      orderClassName = ClassName.PREV\n      eventDirectionName = Direction.RIGHT\n    }\n\n    if (nextElement && $(nextElement).hasClass(ClassName.ACTIVE)) {\n      this._isSliding = false\n      return\n    }\n\n    const slideEvent = this._triggerSlideEvent(nextElement, eventDirectionName)\n    if (slideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    if (!activeElement || !nextElement) {\n      // Some weirdness is happening, so we bail\n      return\n    }\n\n    this._isSliding = true\n\n    if (isCycling) {\n      this.pause()\n    }\n\n    this._setActiveIndicatorElement(nextElement)\n\n    const slidEvent = $.Event(Event.SLID, {\n      relatedTarget: nextElement,\n      direction: eventDirectionName,\n      from: activeElementIndex,\n      to: nextElementIndex\n    })\n\n    if ($(this._element).hasClass(ClassName.SLIDE)) {\n      $(nextElement).addClass(orderClassName)\n\n      Util.reflow(nextElement)\n\n      $(activeElement).addClass(directionalClassName)\n      $(nextElement).addClass(directionalClassName)\n\n      const nextElementInterval = parseInt(nextElement.getAttribute('data-interval'), 10)\n      if (nextElementInterval) {\n        this._config.defaultInterval = this._config.defaultInterval || this._config.interval\n        this._config.interval = nextElementInterval\n      } else {\n        this._config.interval = this._config.defaultInterval || this._config.interval\n      }\n\n      const transitionDuration = Util.getTransitionDurationFromElement(activeElement)\n\n      $(activeElement)\n        .one(Util.TRANSITION_END, () => {\n          $(nextElement)\n            .removeClass(`${directionalClassName} ${orderClassName}`)\n            .addClass(ClassName.ACTIVE)\n\n          $(activeElement).removeClass(`${ClassName.ACTIVE} ${orderClassName} ${directionalClassName}`)\n\n          this._isSliding = false\n\n          setTimeout(() => $(this._element).trigger(slidEvent), 0)\n        })\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      $(activeElement).removeClass(ClassName.ACTIVE)\n      $(nextElement).addClass(ClassName.ACTIVE)\n\n      this._isSliding = false\n      $(this._element).trigger(slidEvent)\n    }\n\n    if (isCycling) {\n      this.cycle()\n    }\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      let _config = {\n        ...Default,\n        ...$(this).data()\n      }\n\n      if (typeof config === 'object') {\n        _config = {\n          ..._config,\n          ...config\n        }\n      }\n\n      const action = typeof config === 'string' ? config : _config.slide\n\n      if (!data) {\n        data = new Carousel(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'number') {\n        data.to(config)\n      } else if (typeof action === 'string') {\n        if (typeof data[action] === 'undefined') {\n          throw new TypeError(`No method named \"${action}\"`)\n        }\n        data[action]()\n      } else if (_config.interval && _config.ride) {\n        data.pause()\n        data.cycle()\n      }\n    })\n  }\n\n  static _dataApiClickHandler(event) {\n    const selector = Util.getSelectorFromElement(this)\n\n    if (!selector) {\n      return\n    }\n\n    const target = $(selector)[0]\n\n    if (!target || !$(target).hasClass(ClassName.CAROUSEL)) {\n      return\n    }\n\n    const config = {\n      ...$(target).data(),\n      ...$(this).data()\n    }\n    const slideIndex = this.getAttribute('data-slide-to')\n\n    if (slideIndex) {\n      config.interval = false\n    }\n\n    Carousel._jQueryInterface.call($(target), config)\n\n    if (slideIndex) {\n      $(target).data(DATA_KEY).to(slideIndex)\n    }\n\n    event.preventDefault()\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on(Event.CLICK_DATA_API, Selector.DATA_SLIDE, Carousel._dataApiClickHandler)\n\n$(window).on(Event.LOAD_DATA_API, () => {\n  const carousels = [].slice.call(document.querySelectorAll(Selector.DATA_RIDE))\n  for (let i = 0, len = carousels.length; i < len; i++) {\n    const $carousel = $(carousels[i])\n    Carousel._jQueryInterface.call($carousel, $carousel.data())\n  }\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Carousel._jQueryInterface\n$.fn[NAME].Constructor = Carousel\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Carousel._jQueryInterface\n}\n\nexport default Carousel\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): collapse.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'collapse'\nconst VERSION             = '4.4.1'\nconst DATA_KEY            = 'bs.collapse'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\n\nconst Default = {\n  toggle : true,\n  parent : ''\n}\n\nconst DefaultType = {\n  toggle : 'boolean',\n  parent : '(string|element)'\n}\n\nconst Event = {\n  SHOW           : `show${EVENT_KEY}`,\n  SHOWN          : `shown${EVENT_KEY}`,\n  HIDE           : `hide${EVENT_KEY}`,\n  HIDDEN         : `hidden${EVENT_KEY}`,\n  CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  SHOW       : 'show',\n  COLLAPSE   : 'collapse',\n  COLLAPSING : 'collapsing',\n  COLLAPSED  : 'collapsed'\n}\n\nconst Dimension = {\n  WIDTH  : 'width',\n  HEIGHT : 'height'\n}\n\nconst Selector = {\n  ACTIVES     : '.show, .collapsing',\n  DATA_TOGGLE : '[data-toggle=\"collapse\"]'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Collapse {\n  constructor(element, config) {\n    this._isTransitioning = false\n    this._element         = element\n    this._config          = this._getConfig(config)\n    this._triggerArray    = [].slice.call(document.querySelectorAll(\n      `[data-toggle=\"collapse\"][href=\"#${element.id}\"],` +\n      `[data-toggle=\"collapse\"][data-target=\"#${element.id}\"]`\n    ))\n\n    const toggleList = [].slice.call(document.querySelectorAll(Selector.DATA_TOGGLE))\n    for (let i = 0, len = toggleList.length; i < len; i++) {\n      const elem = toggleList[i]\n      const selector = Util.getSelectorFromElement(elem)\n      const filterElement = [].slice.call(document.querySelectorAll(selector))\n        .filter((foundElem) => foundElem === element)\n\n      if (selector !== null && filterElement.length > 0) {\n        this._selector = selector\n        this._triggerArray.push(elem)\n      }\n    }\n\n    this._parent = this._config.parent ? this._getParent() : null\n\n    if (!this._config.parent) {\n      this._addAriaAndCollapsedClass(this._element, this._triggerArray)\n    }\n\n    if (this._config.toggle) {\n      this.toggle()\n    }\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  // Public\n\n  toggle() {\n    if ($(this._element).hasClass(ClassName.SHOW)) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  show() {\n    if (this._isTransitioning ||\n      $(this._element).hasClass(ClassName.SHOW)) {\n      return\n    }\n\n    let actives\n    let activesData\n\n    if (this._parent) {\n      actives = [].slice.call(this._parent.querySelectorAll(Selector.ACTIVES))\n        .filter((elem) => {\n          if (typeof this._config.parent === 'string') {\n            return elem.getAttribute('data-parent') === this._config.parent\n          }\n\n          return elem.classList.contains(ClassName.COLLAPSE)\n        })\n\n      if (actives.length === 0) {\n        actives = null\n      }\n    }\n\n    if (actives) {\n      activesData = $(actives).not(this._selector).data(DATA_KEY)\n      if (activesData && activesData._isTransitioning) {\n        return\n      }\n    }\n\n    const startEvent = $.Event(Event.SHOW)\n    $(this._element).trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) {\n      return\n    }\n\n    if (actives) {\n      Collapse._jQueryInterface.call($(actives).not(this._selector), 'hide')\n      if (!activesData) {\n        $(actives).data(DATA_KEY, null)\n      }\n    }\n\n    const dimension = this._getDimension()\n\n    $(this._element)\n      .removeClass(ClassName.COLLAPSE)\n      .addClass(ClassName.COLLAPSING)\n\n    this._element.style[dimension] = 0\n\n    if (this._triggerArray.length) {\n      $(this._triggerArray)\n        .removeClass(ClassName.COLLAPSED)\n        .attr('aria-expanded', true)\n    }\n\n    this.setTransitioning(true)\n\n    const complete = () => {\n      $(this._element)\n        .removeClass(ClassName.COLLAPSING)\n        .addClass(ClassName.COLLAPSE)\n        .addClass(ClassName.SHOW)\n\n      this._element.style[dimension] = ''\n\n      this.setTransitioning(false)\n\n      $(this._element).trigger(Event.SHOWN)\n    }\n\n    const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1)\n    const scrollSize = `scroll${capitalizedDimension}`\n    const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n    $(this._element)\n      .one(Util.TRANSITION_END, complete)\n      .emulateTransitionEnd(transitionDuration)\n\n    this._element.style[dimension] = `${this._element[scrollSize]}px`\n  }\n\n  hide() {\n    if (this._isTransitioning ||\n      !$(this._element).hasClass(ClassName.SHOW)) {\n      return\n    }\n\n    const startEvent = $.Event(Event.HIDE)\n    $(this._element).trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) {\n      return\n    }\n\n    const dimension = this._getDimension()\n\n    this._element.style[dimension] = `${this._element.getBoundingClientRect()[dimension]}px`\n\n    Util.reflow(this._element)\n\n    $(this._element)\n      .addClass(ClassName.COLLAPSING)\n      .removeClass(ClassName.COLLAPSE)\n      .removeClass(ClassName.SHOW)\n\n    const triggerArrayLength = this._triggerArray.length\n    if (triggerArrayLength > 0) {\n      for (let i = 0; i < triggerArrayLength; i++) {\n        const trigger = this._triggerArray[i]\n        const selector = Util.getSelectorFromElement(trigger)\n\n        if (selector !== null) {\n          const $elem = $([].slice.call(document.querySelectorAll(selector)))\n          if (!$elem.hasClass(ClassName.SHOW)) {\n            $(trigger).addClass(ClassName.COLLAPSED)\n              .attr('aria-expanded', false)\n          }\n        }\n      }\n    }\n\n    this.setTransitioning(true)\n\n    const complete = () => {\n      this.setTransitioning(false)\n      $(this._element)\n        .removeClass(ClassName.COLLAPSING)\n        .addClass(ClassName.COLLAPSE)\n        .trigger(Event.HIDDEN)\n    }\n\n    this._element.style[dimension] = ''\n    const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n    $(this._element)\n      .one(Util.TRANSITION_END, complete)\n      .emulateTransitionEnd(transitionDuration)\n  }\n\n  setTransitioning(isTransitioning) {\n    this._isTransitioning = isTransitioning\n  }\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n\n    this._config          = null\n    this._parent          = null\n    this._element         = null\n    this._triggerArray    = null\n    this._isTransitioning = null\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...config\n    }\n    config.toggle = Boolean(config.toggle) // Coerce string values\n    Util.typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _getDimension() {\n    const hasWidth = $(this._element).hasClass(Dimension.WIDTH)\n    return hasWidth ? Dimension.WIDTH : Dimension.HEIGHT\n  }\n\n  _getParent() {\n    let parent\n\n    if (Util.isElement(this._config.parent)) {\n      parent = this._config.parent\n\n      // It's a jQuery object\n      if (typeof this._config.parent.jquery !== 'undefined') {\n        parent = this._config.parent[0]\n      }\n    } else {\n      parent = document.querySelector(this._config.parent)\n    }\n\n    const selector =\n      `[data-toggle=\"collapse\"][data-parent=\"${this._config.parent}\"]`\n\n    const children = [].slice.call(parent.querySelectorAll(selector))\n    $(children).each((i, element) => {\n      this._addAriaAndCollapsedClass(\n        Collapse._getTargetFromElement(element),\n        [element]\n      )\n    })\n\n    return parent\n  }\n\n  _addAriaAndCollapsedClass(element, triggerArray) {\n    const isOpen = $(element).hasClass(ClassName.SHOW)\n\n    if (triggerArray.length) {\n      $(triggerArray)\n        .toggleClass(ClassName.COLLAPSED, !isOpen)\n        .attr('aria-expanded', isOpen)\n    }\n  }\n\n  // Static\n\n  static _getTargetFromElement(element) {\n    const selector = Util.getSelectorFromElement(element)\n    return selector ? document.querySelector(selector) : null\n  }\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      const $this   = $(this)\n      let data      = $this.data(DATA_KEY)\n      const _config = {\n        ...Default,\n        ...$this.data(),\n        ...typeof config === 'object' && config ? config : {}\n      }\n\n      if (!data && _config.toggle && /show|hide/.test(config)) {\n        _config.toggle = false\n      }\n\n      if (!data) {\n        data = new Collapse(this, _config)\n        $this.data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function (event) {\n  // preventDefault only for <a> elements (which change the URL) not inside the collapsible element\n  if (event.currentTarget.tagName === 'A') {\n    event.preventDefault()\n  }\n\n  const $trigger = $(this)\n  const selector = Util.getSelectorFromElement(this)\n  const selectors = [].slice.call(document.querySelectorAll(selector))\n\n  $(selectors).each(function () {\n    const $target = $(this)\n    const data    = $target.data(DATA_KEY)\n    const config  = data ? 'toggle' : $trigger.data()\n    Collapse._jQueryInterface.call($target, config)\n  })\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Collapse._jQueryInterface\n$.fn[NAME].Constructor = Collapse\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Collapse._jQueryInterface\n}\n\nexport default Collapse\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): dropdown.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Popper from 'popper.js'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                     = 'dropdown'\nconst VERSION                  = '4.4.1'\nconst DATA_KEY                 = 'bs.dropdown'\nconst EVENT_KEY                = `.${DATA_KEY}`\nconst DATA_API_KEY             = '.data-api'\nconst JQUERY_NO_CONFLICT       = $.fn[NAME]\nconst ESCAPE_KEYCODE           = 27 // KeyboardEvent.which value for Escape (Esc) key\nconst SPACE_KEYCODE            = 32 // KeyboardEvent.which value for space key\nconst TAB_KEYCODE              = 9 // KeyboardEvent.which value for tab key\nconst ARROW_UP_KEYCODE         = 38 // KeyboardEvent.which value for up arrow key\nconst ARROW_DOWN_KEYCODE       = 40 // KeyboardEvent.which value for down arrow key\nconst RIGHT_MOUSE_BUTTON_WHICH = 3 // MouseEvent.which value for the right button (assuming a right-handed mouse)\nconst REGEXP_KEYDOWN           = new RegExp(`${ARROW_UP_KEYCODE}|${ARROW_DOWN_KEYCODE}|${ESCAPE_KEYCODE}`)\n\nconst Event = {\n  HIDE             : `hide${EVENT_KEY}`,\n  HIDDEN           : `hidden${EVENT_KEY}`,\n  SHOW             : `show${EVENT_KEY}`,\n  SHOWN            : `shown${EVENT_KEY}`,\n  CLICK            : `click${EVENT_KEY}`,\n  CLICK_DATA_API   : `click${EVENT_KEY}${DATA_API_KEY}`,\n  KEYDOWN_DATA_API : `keydown${EVENT_KEY}${DATA_API_KEY}`,\n  KEYUP_DATA_API   : `keyup${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  DISABLED        : 'disabled',\n  SHOW            : 'show',\n  DROPUP          : 'dropup',\n  DROPRIGHT       : 'dropright',\n  DROPLEFT        : 'dropleft',\n  MENURIGHT       : 'dropdown-menu-right',\n  MENULEFT        : 'dropdown-menu-left',\n  POSITION_STATIC : 'position-static'\n}\n\nconst Selector = {\n  DATA_TOGGLE   : '[data-toggle=\"dropdown\"]',\n  FORM_CHILD    : '.dropdown form',\n  MENU          : '.dropdown-menu',\n  NAVBAR_NAV    : '.navbar-nav',\n  VISIBLE_ITEMS : '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)'\n}\n\nconst AttachmentMap = {\n  TOP       : 'top-start',\n  TOPEND    : 'top-end',\n  BOTTOM    : 'bottom-start',\n  BOTTOMEND : 'bottom-end',\n  RIGHT     : 'right-start',\n  RIGHTEND  : 'right-end',\n  LEFT      : 'left-start',\n  LEFTEND   : 'left-end'\n}\n\nconst Default = {\n  offset       : 0,\n  flip         : true,\n  boundary     : 'scrollParent',\n  reference    : 'toggle',\n  display      : 'dynamic',\n  popperConfig : null\n}\n\nconst DefaultType = {\n  offset       : '(number|string|function)',\n  flip         : 'boolean',\n  boundary     : '(string|element)',\n  reference    : '(string|element)',\n  display      : 'string',\n  popperConfig : '(null|object)'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Dropdown {\n  constructor(element, config) {\n    this._element  = element\n    this._popper   = null\n    this._config   = this._getConfig(config)\n    this._menu     = this._getMenuElement()\n    this._inNavbar = this._detectNavbar()\n\n    this._addEventListeners()\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  // Public\n\n  toggle() {\n    if (this._element.disabled || $(this._element).hasClass(ClassName.DISABLED)) {\n      return\n    }\n\n    const isActive = $(this._menu).hasClass(ClassName.SHOW)\n\n    Dropdown._clearMenus()\n\n    if (isActive) {\n      return\n    }\n\n    this.show(true)\n  }\n\n  show(usePopper = false) {\n    if (this._element.disabled || $(this._element).hasClass(ClassName.DISABLED) || $(this._menu).hasClass(ClassName.SHOW)) {\n      return\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    }\n    const showEvent = $.Event(Event.SHOW, relatedTarget)\n    const parent = Dropdown._getParentFromElement(this._element)\n\n    $(parent).trigger(showEvent)\n\n    if (showEvent.isDefaultPrevented()) {\n      return\n    }\n\n    // Disable totally Popper.js for Dropdown in Navbar\n    if (!this._inNavbar && usePopper) {\n      /**\n       * Check for Popper dependency\n       * Popper - https://popper.js.org\n       */\n      if (typeof Popper === 'undefined') {\n        throw new TypeError('Bootstrap\\'s dropdowns require Popper.js (https://popper.js.org/)')\n      }\n\n      let referenceElement = this._element\n\n      if (this._config.reference === 'parent') {\n        referenceElement = parent\n      } else if (Util.isElement(this._config.reference)) {\n        referenceElement = this._config.reference\n\n        // Check if it's jQuery element\n        if (typeof this._config.reference.jquery !== 'undefined') {\n          referenceElement = this._config.reference[0]\n        }\n      }\n\n      // If boundary is not `scrollParent`, then set position to `static`\n      // to allow the menu to \"escape\" the scroll parent's boundaries\n      // https://github.com/twbs/bootstrap/issues/24251\n      if (this._config.boundary !== 'scrollParent') {\n        $(parent).addClass(ClassName.POSITION_STATIC)\n      }\n      this._popper = new Popper(referenceElement, this._menu, this._getPopperConfig())\n    }\n\n    // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n    if ('ontouchstart' in document.documentElement &&\n        $(parent).closest(Selector.NAVBAR_NAV).length === 0) {\n      $(document.body).children().on('mouseover', null, $.noop)\n    }\n\n    this._element.focus()\n    this._element.setAttribute('aria-expanded', true)\n\n    $(this._menu).toggleClass(ClassName.SHOW)\n    $(parent)\n      .toggleClass(ClassName.SHOW)\n      .trigger($.Event(Event.SHOWN, relatedTarget))\n  }\n\n  hide() {\n    if (this._element.disabled || $(this._element).hasClass(ClassName.DISABLED) || !$(this._menu).hasClass(ClassName.SHOW)) {\n      return\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    }\n    const hideEvent = $.Event(Event.HIDE, relatedTarget)\n    const parent = Dropdown._getParentFromElement(this._element)\n\n    $(parent).trigger(hideEvent)\n\n    if (hideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    $(this._menu).toggleClass(ClassName.SHOW)\n    $(parent)\n      .toggleClass(ClassName.SHOW)\n      .trigger($.Event(Event.HIDDEN, relatedTarget))\n  }\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    $(this._element).off(EVENT_KEY)\n    this._element = null\n    this._menu = null\n    if (this._popper !== null) {\n      this._popper.destroy()\n      this._popper = null\n    }\n  }\n\n  update() {\n    this._inNavbar = this._detectNavbar()\n    if (this._popper !== null) {\n      this._popper.scheduleUpdate()\n    }\n  }\n\n  // Private\n\n  _addEventListeners() {\n    $(this._element).on(Event.CLICK, (event) => {\n      event.preventDefault()\n      event.stopPropagation()\n      this.toggle()\n    })\n  }\n\n  _getConfig(config) {\n    config = {\n      ...this.constructor.Default,\n      ...$(this._element).data(),\n      ...config\n    }\n\n    Util.typeCheckConfig(\n      NAME,\n      config,\n      this.constructor.DefaultType\n    )\n\n    return config\n  }\n\n  _getMenuElement() {\n    if (!this._menu) {\n      const parent = Dropdown._getParentFromElement(this._element)\n\n      if (parent) {\n        this._menu = parent.querySelector(Selector.MENU)\n      }\n    }\n    return this._menu\n  }\n\n  _getPlacement() {\n    const $parentDropdown = $(this._element.parentNode)\n    let placement = AttachmentMap.BOTTOM\n\n    // Handle dropup\n    if ($parentDropdown.hasClass(ClassName.DROPUP)) {\n      placement = AttachmentMap.TOP\n      if ($(this._menu).hasClass(ClassName.MENURIGHT)) {\n        placement = AttachmentMap.TOPEND\n      }\n    } else if ($parentDropdown.hasClass(ClassName.DROPRIGHT)) {\n      placement = AttachmentMap.RIGHT\n    } else if ($parentDropdown.hasClass(ClassName.DROPLEFT)) {\n      placement = AttachmentMap.LEFT\n    } else if ($(this._menu).hasClass(ClassName.MENURIGHT)) {\n      placement = AttachmentMap.BOTTOMEND\n    }\n    return placement\n  }\n\n  _detectNavbar() {\n    return $(this._element).closest('.navbar').length > 0\n  }\n\n  _getOffset() {\n    const offset = {}\n\n    if (typeof this._config.offset === 'function') {\n      offset.fn = (data) => {\n        data.offsets = {\n          ...data.offsets,\n          ...this._config.offset(data.offsets, this._element) || {}\n        }\n\n        return data\n      }\n    } else {\n      offset.offset = this._config.offset\n    }\n\n    return offset\n  }\n\n  _getPopperConfig() {\n    const popperConfig = {\n      placement: this._getPlacement(),\n      modifiers: {\n        offset: this._getOffset(),\n        flip: {\n          enabled: this._config.flip\n        },\n        preventOverflow: {\n          boundariesElement: this._config.boundary\n        }\n      }\n    }\n\n    // Disable Popper.js if we have a static display\n    if (this._config.display === 'static') {\n      popperConfig.modifiers.applyStyle = {\n        enabled: false\n      }\n    }\n\n    return {\n      ...popperConfig,\n      ...this._config.popperConfig\n    }\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = typeof config === 'object' ? config : null\n\n      if (!data) {\n        data = new Dropdown(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n\n  static _clearMenus(event) {\n    if (event && (event.which === RIGHT_MOUSE_BUTTON_WHICH ||\n      event.type === 'keyup' && event.which !== TAB_KEYCODE)) {\n      return\n    }\n\n    const toggles = [].slice.call(document.querySelectorAll(Selector.DATA_TOGGLE))\n\n    for (let i = 0, len = toggles.length; i < len; i++) {\n      const parent = Dropdown._getParentFromElement(toggles[i])\n      const context = $(toggles[i]).data(DATA_KEY)\n      const relatedTarget = {\n        relatedTarget: toggles[i]\n      }\n\n      if (event && event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      if (!context) {\n        continue\n      }\n\n      const dropdownMenu = context._menu\n      if (!$(parent).hasClass(ClassName.SHOW)) {\n        continue\n      }\n\n      if (event && (event.type === 'click' &&\n          /input|textarea/i.test(event.target.tagName) || event.type === 'keyup' && event.which === TAB_KEYCODE) &&\n          $.contains(parent, event.target)) {\n        continue\n      }\n\n      const hideEvent = $.Event(Event.HIDE, relatedTarget)\n      $(parent).trigger(hideEvent)\n      if (hideEvent.isDefaultPrevented()) {\n        continue\n      }\n\n      // If this is a touch-enabled device we remove the extra\n      // empty mouseover listeners we added for iOS support\n      if ('ontouchstart' in document.documentElement) {\n        $(document.body).children().off('mouseover', null, $.noop)\n      }\n\n      toggles[i].setAttribute('aria-expanded', 'false')\n\n      if (context._popper) {\n        context._popper.destroy()\n      }\n\n      $(dropdownMenu).removeClass(ClassName.SHOW)\n      $(parent)\n        .removeClass(ClassName.SHOW)\n        .trigger($.Event(Event.HIDDEN, relatedTarget))\n    }\n  }\n\n  static _getParentFromElement(element) {\n    let parent\n    const selector = Util.getSelectorFromElement(element)\n\n    if (selector) {\n      parent = document.querySelector(selector)\n    }\n\n    return parent || element.parentNode\n  }\n\n  // eslint-disable-next-line complexity\n  static _dataApiKeydownHandler(event) {\n    // If not input/textarea:\n    //  - And not a key in REGEXP_KEYDOWN => not a dropdown command\n    // If input/textarea:\n    //  - If space key => not a dropdown command\n    //  - If key is other than escape\n    //    - If key is not up or down => not a dropdown command\n    //    - If trigger inside the menu => not a dropdown command\n    if (/input|textarea/i.test(event.target.tagName)\n      ? event.which === SPACE_KEYCODE || event.which !== ESCAPE_KEYCODE &&\n      (event.which !== ARROW_DOWN_KEYCODE && event.which !== ARROW_UP_KEYCODE ||\n        $(event.target).closest(Selector.MENU).length) : !REGEXP_KEYDOWN.test(event.which)) {\n      return\n    }\n\n    event.preventDefault()\n    event.stopPropagation()\n\n    if (this.disabled || $(this).hasClass(ClassName.DISABLED)) {\n      return\n    }\n\n    const parent   = Dropdown._getParentFromElement(this)\n    const isActive = $(parent).hasClass(ClassName.SHOW)\n\n    if (!isActive && event.which === ESCAPE_KEYCODE) {\n      return\n    }\n\n    if (!isActive || isActive && (event.which === ESCAPE_KEYCODE || event.which === SPACE_KEYCODE)) {\n      if (event.which === ESCAPE_KEYCODE) {\n        const toggle = parent.querySelector(Selector.DATA_TOGGLE)\n        $(toggle).trigger('focus')\n      }\n\n      $(this).trigger('click')\n      return\n    }\n\n    const items = [].slice.call(parent.querySelectorAll(Selector.VISIBLE_ITEMS))\n      .filter((item) => $(item).is(':visible'))\n\n    if (items.length === 0) {\n      return\n    }\n\n    let index = items.indexOf(event.target)\n\n    if (event.which === ARROW_UP_KEYCODE && index > 0) { // Up\n      index--\n    }\n\n    if (event.which === ARROW_DOWN_KEYCODE && index < items.length - 1) { // Down\n      index++\n    }\n\n    if (index < 0) {\n      index = 0\n    }\n\n    items[index].focus()\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on(Event.KEYDOWN_DATA_API, Selector.DATA_TOGGLE, Dropdown._dataApiKeydownHandler)\n  .on(Event.KEYDOWN_DATA_API, Selector.MENU, Dropdown._dataApiKeydownHandler)\n  .on(`${Event.CLICK_DATA_API} ${Event.KEYUP_DATA_API}`, Dropdown._clearMenus)\n  .on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function (event) {\n    event.preventDefault()\n    event.stopPropagation()\n    Dropdown._jQueryInterface.call($(this), 'toggle')\n  })\n  .on(Event.CLICK_DATA_API, Selector.FORM_CHILD, (e) => {\n    e.stopPropagation()\n  })\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Dropdown._jQueryInterface\n$.fn[NAME].Constructor = Dropdown\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Dropdown._jQueryInterface\n}\n\n\nexport default Dropdown\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'modal'\nconst VERSION            = '4.4.1'\nconst DATA_KEY           = 'bs.modal'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst DATA_API_KEY       = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\nconst ESCAPE_KEYCODE     = 27 // KeyboardEvent.which value for Escape (Esc) key\n\nconst Default = {\n  backdrop : true,\n  keyboard : true,\n  focus    : true,\n  show     : true\n}\n\nconst DefaultType = {\n  backdrop : '(boolean|string)',\n  keyboard : 'boolean',\n  focus    : 'boolean',\n  show     : 'boolean'\n}\n\nconst Event = {\n  HIDE              : `hide${EVENT_KEY}`,\n  HIDE_PREVENTED    : `hidePrevented${EVENT_KEY}`,\n  HIDDEN            : `hidden${EVENT_KEY}`,\n  SHOW              : `show${EVENT_KEY}`,\n  SHOWN             : `shown${EVENT_KEY}`,\n  FOCUSIN           : `focusin${EVENT_KEY}`,\n  RESIZE            : `resize${EVENT_KEY}`,\n  CLICK_DISMISS     : `click.dismiss${EVENT_KEY}`,\n  KEYDOWN_DISMISS   : `keydown.dismiss${EVENT_KEY}`,\n  MOUSEUP_DISMISS   : `mouseup.dismiss${EVENT_KEY}`,\n  MOUSEDOWN_DISMISS : `mousedown.dismiss${EVENT_KEY}`,\n  CLICK_DATA_API    : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  SCROLLABLE         : 'modal-dialog-scrollable',\n  SCROLLBAR_MEASURER : 'modal-scrollbar-measure',\n  BACKDROP           : 'modal-backdrop',\n  OPEN               : 'modal-open',\n  FADE               : 'fade',\n  SHOW               : 'show',\n  STATIC             : 'modal-static'\n}\n\nconst Selector = {\n  DIALOG         : '.modal-dialog',\n  MODAL_BODY     : '.modal-body',\n  DATA_TOGGLE    : '[data-toggle=\"modal\"]',\n  DATA_DISMISS   : '[data-dismiss=\"modal\"]',\n  FIXED_CONTENT  : '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top',\n  STICKY_CONTENT : '.sticky-top'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Modal {\n  constructor(element, config) {\n    this._config              = this._getConfig(config)\n    this._element             = element\n    this._dialog              = element.querySelector(Selector.DIALOG)\n    this._backdrop            = null\n    this._isShown             = false\n    this._isBodyOverflowing   = false\n    this._ignoreBackdropClick = false\n    this._isTransitioning     = false\n    this._scrollbarWidth      = 0\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  // Public\n\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    if ($(this._element).hasClass(ClassName.FADE)) {\n      this._isTransitioning = true\n    }\n\n    const showEvent = $.Event(Event.SHOW, {\n      relatedTarget\n    })\n\n    $(this._element).trigger(showEvent)\n\n    if (this._isShown || showEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._isShown = true\n\n    this._checkScrollbar()\n    this._setScrollbar()\n\n    this._adjustDialog()\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    $(this._element).on(\n      Event.CLICK_DISMISS,\n      Selector.DATA_DISMISS,\n      (event) => this.hide(event)\n    )\n\n    $(this._dialog).on(Event.MOUSEDOWN_DISMISS, () => {\n      $(this._element).one(Event.MOUSEUP_DISMISS, (event) => {\n        if ($(event.target).is(this._element)) {\n          this._ignoreBackdropClick = true\n        }\n      })\n    })\n\n    this._showBackdrop(() => this._showElement(relatedTarget))\n  }\n\n  hide(event) {\n    if (event) {\n      event.preventDefault()\n    }\n\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = $.Event(Event.HIDE)\n\n    $(this._element).trigger(hideEvent)\n\n    if (!this._isShown || hideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._isShown = false\n    const transition = $(this._element).hasClass(ClassName.FADE)\n\n    if (transition) {\n      this._isTransitioning = true\n    }\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    $(document).off(Event.FOCUSIN)\n\n    $(this._element).removeClass(ClassName.SHOW)\n\n    $(this._element).off(Event.CLICK_DISMISS)\n    $(this._dialog).off(Event.MOUSEDOWN_DISMISS)\n\n\n    if (transition) {\n      const transitionDuration  = Util.getTransitionDurationFromElement(this._element)\n\n      $(this._element)\n        .one(Util.TRANSITION_END, (event) => this._hideModal(event))\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      this._hideModal()\n    }\n  }\n\n  dispose() {\n    [window, this._element, this._dialog]\n      .forEach((htmlElement) => $(htmlElement).off(EVENT_KEY))\n\n    /**\n     * `document` has 2 events `Event.FOCUSIN` and `Event.CLICK_DATA_API`\n     * Do not move `document` in `htmlElements` array\n     * It will remove `Event.CLICK_DATA_API` event that should remain\n     */\n    $(document).off(Event.FOCUSIN)\n\n    $.removeData(this._element, DATA_KEY)\n\n    this._config              = null\n    this._element             = null\n    this._dialog              = null\n    this._backdrop            = null\n    this._isShown             = null\n    this._isBodyOverflowing   = null\n    this._ignoreBackdropClick = null\n    this._isTransitioning     = null\n    this._scrollbarWidth      = null\n  }\n\n  handleUpdate() {\n    this._adjustDialog()\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...config\n    }\n    Util.typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _triggerBackdropTransition() {\n    if (this._config.backdrop === 'static') {\n      const hideEventPrevented = $.Event(Event.HIDE_PREVENTED)\n\n      $(this._element).trigger(hideEventPrevented)\n      if (hideEventPrevented.defaultPrevented) {\n        return\n      }\n\n      this._element.classList.add(ClassName.STATIC)\n\n      const modalTransitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n      $(this._element).one(Util.TRANSITION_END, () => {\n        this._element.classList.remove(ClassName.STATIC)\n      })\n        .emulateTransitionEnd(modalTransitionDuration)\n      this._element.focus()\n    } else {\n      this.hide()\n    }\n  }\n\n  _showElement(relatedTarget) {\n    const transition = $(this._element).hasClass(ClassName.FADE)\n    const modalBody = this._dialog ? this._dialog.querySelector(Selector.MODAL_BODY) : null\n\n    if (!this._element.parentNode ||\n        this._element.parentNode.nodeType !== Node.ELEMENT_NODE) {\n      // Don't move modal's DOM position\n      document.body.appendChild(this._element)\n    }\n\n    this._element.style.display = 'block'\n    this._element.removeAttribute('aria-hidden')\n    this._element.setAttribute('aria-modal', true)\n\n    if ($(this._dialog).hasClass(ClassName.SCROLLABLE) && modalBody) {\n      modalBody.scrollTop = 0\n    } else {\n      this._element.scrollTop = 0\n    }\n\n    if (transition) {\n      Util.reflow(this._element)\n    }\n\n    $(this._element).addClass(ClassName.SHOW)\n\n    if (this._config.focus) {\n      this._enforceFocus()\n    }\n\n    const shownEvent = $.Event(Event.SHOWN, {\n      relatedTarget\n    })\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._element.focus()\n      }\n      this._isTransitioning = false\n      $(this._element).trigger(shownEvent)\n    }\n\n    if (transition) {\n      const transitionDuration  = Util.getTransitionDurationFromElement(this._dialog)\n\n      $(this._dialog)\n        .one(Util.TRANSITION_END, transitionComplete)\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      transitionComplete()\n    }\n  }\n\n  _enforceFocus() {\n    $(document)\n      .off(Event.FOCUSIN) // Guard against infinite focus loop\n      .on(Event.FOCUSIN, (event) => {\n        if (document !== event.target &&\n            this._element !== event.target &&\n            $(this._element).has(event.target).length === 0) {\n          this._element.focus()\n        }\n      })\n  }\n\n  _setEscapeEvent() {\n    if (this._isShown && this._config.keyboard) {\n      $(this._element).on(Event.KEYDOWN_DISMISS, (event) => {\n        if (event.which === ESCAPE_KEYCODE) {\n          this._triggerBackdropTransition()\n        }\n      })\n    } else if (!this._isShown) {\n      $(this._element).off(Event.KEYDOWN_DISMISS)\n    }\n  }\n\n  _setResizeEvent() {\n    if (this._isShown) {\n      $(window).on(Event.RESIZE, (event) => this.handleUpdate(event))\n    } else {\n      $(window).off(Event.RESIZE)\n    }\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none'\n    this._element.setAttribute('aria-hidden', true)\n    this._element.removeAttribute('aria-modal')\n    this._isTransitioning = false\n    this._showBackdrop(() => {\n      $(document.body).removeClass(ClassName.OPEN)\n      this._resetAdjustments()\n      this._resetScrollbar()\n      $(this._element).trigger(Event.HIDDEN)\n    })\n  }\n\n  _removeBackdrop() {\n    if (this._backdrop) {\n      $(this._backdrop).remove()\n      this._backdrop = null\n    }\n  }\n\n  _showBackdrop(callback) {\n    const animate = $(this._element).hasClass(ClassName.FADE)\n      ? ClassName.FADE : ''\n\n    if (this._isShown && this._config.backdrop) {\n      this._backdrop = document.createElement('div')\n      this._backdrop.className = ClassName.BACKDROP\n\n      if (animate) {\n        this._backdrop.classList.add(animate)\n      }\n\n      $(this._backdrop).appendTo(document.body)\n\n      $(this._element).on(Event.CLICK_DISMISS, (event) => {\n        if (this._ignoreBackdropClick) {\n          this._ignoreBackdropClick = false\n          return\n        }\n        if (event.target !== event.currentTarget) {\n          return\n        }\n\n        this._triggerBackdropTransition()\n      })\n\n      if (animate) {\n        Util.reflow(this._backdrop)\n      }\n\n      $(this._backdrop).addClass(ClassName.SHOW)\n\n      if (!callback) {\n        return\n      }\n\n      if (!animate) {\n        callback()\n        return\n      }\n\n      const backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop)\n\n      $(this._backdrop)\n        .one(Util.TRANSITION_END, callback)\n        .emulateTransitionEnd(backdropTransitionDuration)\n    } else if (!this._isShown && this._backdrop) {\n      $(this._backdrop).removeClass(ClassName.SHOW)\n\n      const callbackRemove = () => {\n        this._removeBackdrop()\n        if (callback) {\n          callback()\n        }\n      }\n\n      if ($(this._element).hasClass(ClassName.FADE)) {\n        const backdropTransitionDuration = Util.getTransitionDurationFromElement(this._backdrop)\n\n        $(this._backdrop)\n          .one(Util.TRANSITION_END, callbackRemove)\n          .emulateTransitionEnd(backdropTransitionDuration)\n      } else {\n        callbackRemove()\n      }\n    } else if (callback) {\n      callback()\n    }\n  }\n\n  // ----------------------------------------------------------------------\n  // the following methods are used to handle overflowing modals\n  // todo (fat): these should probably be refactored out of modal.js\n  // ----------------------------------------------------------------------\n\n  _adjustDialog() {\n    const isModalOverflowing =\n      this._element.scrollHeight > document.documentElement.clientHeight\n\n    if (!this._isBodyOverflowing && isModalOverflowing) {\n      this._element.style.paddingLeft = `${this._scrollbarWidth}px`\n    }\n\n    if (this._isBodyOverflowing && !isModalOverflowing) {\n      this._element.style.paddingRight = `${this._scrollbarWidth}px`\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = ''\n    this._element.style.paddingRight = ''\n  }\n\n  _checkScrollbar() {\n    const rect = document.body.getBoundingClientRect()\n    this._isBodyOverflowing = rect.left + rect.right < window.innerWidth\n    this._scrollbarWidth = this._getScrollbarWidth()\n  }\n\n  _setScrollbar() {\n    if (this._isBodyOverflowing) {\n      // Note: DOMNode.style.paddingRight returns the actual value or '' if not set\n      //   while $(DOMNode).css('padding-right') returns the calculated value or 0 if not set\n      const fixedContent = [].slice.call(document.querySelectorAll(Selector.FIXED_CONTENT))\n      const stickyContent = [].slice.call(document.querySelectorAll(Selector.STICKY_CONTENT))\n\n      // Adjust fixed content padding\n      $(fixedContent).each((index, element) => {\n        const actualPadding = element.style.paddingRight\n        const calculatedPadding = $(element).css('padding-right')\n        $(element)\n          .data('padding-right', actualPadding)\n          .css('padding-right', `${parseFloat(calculatedPadding) + this._scrollbarWidth}px`)\n      })\n\n      // Adjust sticky content margin\n      $(stickyContent).each((index, element) => {\n        const actualMargin = element.style.marginRight\n        const calculatedMargin = $(element).css('margin-right')\n        $(element)\n          .data('margin-right', actualMargin)\n          .css('margin-right', `${parseFloat(calculatedMargin) - this._scrollbarWidth}px`)\n      })\n\n      // Adjust body padding\n      const actualPadding = document.body.style.paddingRight\n      const calculatedPadding = $(document.body).css('padding-right')\n      $(document.body)\n        .data('padding-right', actualPadding)\n        .css('padding-right', `${parseFloat(calculatedPadding) + this._scrollbarWidth}px`)\n    }\n\n    $(document.body).addClass(ClassName.OPEN)\n  }\n\n  _resetScrollbar() {\n    // Restore fixed content padding\n    const fixedContent = [].slice.call(document.querySelectorAll(Selector.FIXED_CONTENT))\n    $(fixedContent).each((index, element) => {\n      const padding = $(element).data('padding-right')\n      $(element).removeData('padding-right')\n      element.style.paddingRight = padding ? padding : ''\n    })\n\n    // Restore sticky content\n    const elements = [].slice.call(document.querySelectorAll(`${Selector.STICKY_CONTENT}`))\n    $(elements).each((index, element) => {\n      const margin = $(element).data('margin-right')\n      if (typeof margin !== 'undefined') {\n        $(element).css('margin-right', margin).removeData('margin-right')\n      }\n    })\n\n    // Restore body padding\n    const padding = $(document.body).data('padding-right')\n    $(document.body).removeData('padding-right')\n    document.body.style.paddingRight = padding ? padding : ''\n  }\n\n  _getScrollbarWidth() { // thx d.walsh\n    const scrollDiv = document.createElement('div')\n    scrollDiv.className = ClassName.SCROLLBAR_MEASURER\n    document.body.appendChild(scrollDiv)\n    const scrollbarWidth = scrollDiv.getBoundingClientRect().width - scrollDiv.clientWidth\n    document.body.removeChild(scrollDiv)\n    return scrollbarWidth\n  }\n\n  // Static\n\n  static _jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = {\n        ...Default,\n        ...$(this).data(),\n        ...typeof config === 'object' && config ? config : {}\n      }\n\n      if (!data) {\n        data = new Modal(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config](relatedTarget)\n      } else if (_config.show) {\n        data.show(relatedTarget)\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document).on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function (event) {\n  let target\n  const selector = Util.getSelectorFromElement(this)\n\n  if (selector) {\n    target = document.querySelector(selector)\n  }\n\n  const config = $(target).data(DATA_KEY)\n    ? 'toggle' : {\n      ...$(target).data(),\n      ...$(this).data()\n    }\n\n  if (this.tagName === 'A' || this.tagName === 'AREA') {\n    event.preventDefault()\n  }\n\n  const $target = $(target).one(Event.SHOW, (showEvent) => {\n    if (showEvent.isDefaultPrevented()) {\n      // Only register focus restorer if modal will actually get shown\n      return\n    }\n\n    $target.one(Event.HIDDEN, () => {\n      if ($(this).is(':visible')) {\n        this.focus()\n      }\n    })\n  })\n\n  Modal._jQueryInterface.call($(target), config, this)\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Modal._jQueryInterface\n$.fn[NAME].Constructor = Modal\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Modal._jQueryInterface\n}\n\nexport default Modal\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): tools/sanitizer.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst uriAttrs = [\n  'background',\n  'cite',\n  'href',\n  'itemtype',\n  'longdesc',\n  'poster',\n  'src',\n  'xlink:href'\n]\n\nconst ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i\n\nexport const DefaultWhitelist = {\n  // Global attributes allowed on any supplied element below.\n  '*': ['class', 'dir', 'id', 'lang', 'role', ARIA_ATTRIBUTE_PATTERN],\n  a: ['target', 'href', 'title', 'rel'],\n  area: [],\n  b: [],\n  br: [],\n  col: [],\n  code: [],\n  div: [],\n  em: [],\n  hr: [],\n  h1: [],\n  h2: [],\n  h3: [],\n  h4: [],\n  h5: [],\n  h6: [],\n  i: [],\n  img: ['src', 'alt', 'title', 'width', 'height'],\n  li: [],\n  ol: [],\n  p: [],\n  pre: [],\n  s: [],\n  small: [],\n  span: [],\n  sub: [],\n  sup: [],\n  strong: [],\n  u: [],\n  ul: []\n}\n\n/**\n * A pattern that recognizes a commonly useful subset of URLs that are safe.\n *\n * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\n */\nconst SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi\n\n/**\n * A pattern that matches safe data URLs. Only matches image, video and audio types.\n *\n * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\n */\nconst DATA_URL_PATTERN = /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i\n\nfunction allowedAttribute(attr, allowedAttributeList) {\n  const attrName = attr.nodeName.toLowerCase()\n\n  if (allowedAttributeList.indexOf(attrName) !== -1) {\n    if (uriAttrs.indexOf(attrName) !== -1) {\n      return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN) || attr.nodeValue.match(DATA_URL_PATTERN))\n    }\n\n    return true\n  }\n\n  const regExp = allowedAttributeList.filter((attrRegex) => attrRegex instanceof RegExp)\n\n  // Check if a regular expression validates the attribute.\n  for (let i = 0, l = regExp.length; i < l; i++) {\n    if (attrName.match(regExp[i])) {\n      return true\n    }\n  }\n\n  return false\n}\n\nexport function sanitizeHtml(unsafeHtml, whiteList, sanitizeFn) {\n  if (unsafeHtml.length === 0) {\n    return unsafeHtml\n  }\n\n  if (sanitizeFn && typeof sanitizeFn === 'function') {\n    return sanitizeFn(unsafeHtml)\n  }\n\n  const domParser = new window.DOMParser()\n  const createdDocument = domParser.parseFromString(unsafeHtml, 'text/html')\n  const whitelistKeys = Object.keys(whiteList)\n  const elements = [].slice.call(createdDocument.body.querySelectorAll('*'))\n\n  for (let i = 0, len = elements.length; i < len; i++) {\n    const el = elements[i]\n    const elName = el.nodeName.toLowerCase()\n\n    if (whitelistKeys.indexOf(el.nodeName.toLowerCase()) === -1) {\n      el.parentNode.removeChild(el)\n\n      continue\n    }\n\n    const attributeList = [].slice.call(el.attributes)\n    const whitelistedAttributes = [].concat(whiteList['*'] || [], whiteList[elName] || [])\n\n    attributeList.forEach((attr) => {\n      if (!allowedAttribute(attr, whitelistedAttributes)) {\n        el.removeAttribute(attr.nodeName)\n      }\n    })\n  }\n\n  return createdDocument.body.innerHTML\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): tooltip.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  DefaultWhitelist,\n  sanitizeHtml\n} from './tools/sanitizer'\nimport $ from 'jquery'\nimport Popper from 'popper.js'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                  = 'tooltip'\nconst VERSION               = '4.4.1'\nconst DATA_KEY              = 'bs.tooltip'\nconst EVENT_KEY             = `.${DATA_KEY}`\nconst JQUERY_NO_CONFLICT    = $.fn[NAME]\nconst CLASS_PREFIX          = 'bs-tooltip'\nconst BSCLS_PREFIX_REGEX    = new RegExp(`(^|\\\\s)${CLASS_PREFIX}\\\\S+`, 'g')\nconst DISALLOWED_ATTRIBUTES = ['sanitize', 'whiteList', 'sanitizeFn']\n\nconst DefaultType = {\n  animation         : 'boolean',\n  template          : 'string',\n  title             : '(string|element|function)',\n  trigger           : 'string',\n  delay             : '(number|object)',\n  html              : 'boolean',\n  selector          : '(string|boolean)',\n  placement         : '(string|function)',\n  offset            : '(number|string|function)',\n  container         : '(string|element|boolean)',\n  fallbackPlacement : '(string|array)',\n  boundary          : '(string|element)',\n  sanitize          : 'boolean',\n  sanitizeFn        : '(null|function)',\n  whiteList         : 'object',\n  popperConfig      : '(null|object)'\n}\n\nconst AttachmentMap = {\n  AUTO   : 'auto',\n  TOP    : 'top',\n  RIGHT  : 'right',\n  BOTTOM : 'bottom',\n  LEFT   : 'left'\n}\n\nconst Default = {\n  animation         : true,\n  template          : '<div class=\"tooltip\" role=\"tooltip\">' +\n                    '<div class=\"arrow\"></div>' +\n                    '<div class=\"tooltip-inner\"></div></div>',\n  trigger           : 'hover focus',\n  title             : '',\n  delay             : 0,\n  html              : false,\n  selector          : false,\n  placement         : 'top',\n  offset            : 0,\n  container         : false,\n  fallbackPlacement : 'flip',\n  boundary          : 'scrollParent',\n  sanitize          : true,\n  sanitizeFn        : null,\n  whiteList         : DefaultWhitelist,\n  popperConfig      : null\n}\n\nconst HoverState = {\n  SHOW : 'show',\n  OUT  : 'out'\n}\n\nconst Event = {\n  HIDE       : `hide${EVENT_KEY}`,\n  HIDDEN     : `hidden${EVENT_KEY}`,\n  SHOW       : `show${EVENT_KEY}`,\n  SHOWN      : `shown${EVENT_KEY}`,\n  INSERTED   : `inserted${EVENT_KEY}`,\n  CLICK      : `click${EVENT_KEY}`,\n  FOCUSIN    : `focusin${EVENT_KEY}`,\n  FOCUSOUT   : `focusout${EVENT_KEY}`,\n  MOUSEENTER : `mouseenter${EVENT_KEY}`,\n  MOUSELEAVE : `mouseleave${EVENT_KEY}`\n}\n\nconst ClassName = {\n  FADE : 'fade',\n  SHOW : 'show'\n}\n\nconst Selector = {\n  TOOLTIP       : '.tooltip',\n  TOOLTIP_INNER : '.tooltip-inner',\n  ARROW         : '.arrow'\n}\n\nconst Trigger = {\n  HOVER  : 'hover',\n  FOCUS  : 'focus',\n  CLICK  : 'click',\n  MANUAL : 'manual'\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Tooltip {\n  constructor(element, config) {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s tooltips require Popper.js (https://popper.js.org/)')\n    }\n\n    // private\n    this._isEnabled     = true\n    this._timeout       = 0\n    this._hoverState    = ''\n    this._activeTrigger = {}\n    this._popper        = null\n\n    // Protected\n    this.element = element\n    this.config  = this._getConfig(config)\n    this.tip     = null\n\n    this._setListeners()\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get Event() {\n    return Event\n  }\n\n  static get EVENT_KEY() {\n    return EVENT_KEY\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  // Public\n\n  enable() {\n    this._isEnabled = true\n  }\n\n  disable() {\n    this._isEnabled = false\n  }\n\n  toggleEnabled() {\n    this._isEnabled = !this._isEnabled\n  }\n\n  toggle(event) {\n    if (!this._isEnabled) {\n      return\n    }\n\n    if (event) {\n      const dataKey = this.constructor.DATA_KEY\n      let context = $(event.currentTarget).data(dataKey)\n\n      if (!context) {\n        context = new this.constructor(\n          event.currentTarget,\n          this._getDelegateConfig()\n        )\n        $(event.currentTarget).data(dataKey, context)\n      }\n\n      context._activeTrigger.click = !context._activeTrigger.click\n\n      if (context._isWithActiveTrigger()) {\n        context._enter(null, context)\n      } else {\n        context._leave(null, context)\n      }\n    } else {\n      if ($(this.getTipElement()).hasClass(ClassName.SHOW)) {\n        this._leave(null, this)\n        return\n      }\n\n      this._enter(null, this)\n    }\n  }\n\n  dispose() {\n    clearTimeout(this._timeout)\n\n    $.removeData(this.element, this.constructor.DATA_KEY)\n\n    $(this.element).off(this.constructor.EVENT_KEY)\n    $(this.element).closest('.modal').off('hide.bs.modal', this._hideModalHandler)\n\n    if (this.tip) {\n      $(this.tip).remove()\n    }\n\n    this._isEnabled     = null\n    this._timeout       = null\n    this._hoverState    = null\n    this._activeTrigger = null\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    this._popper = null\n    this.element = null\n    this.config  = null\n    this.tip     = null\n  }\n\n  show() {\n    if ($(this.element).css('display') === 'none') {\n      throw new Error('Please use show on visible elements')\n    }\n\n    const showEvent = $.Event(this.constructor.Event.SHOW)\n    if (this.isWithContent() && this._isEnabled) {\n      $(this.element).trigger(showEvent)\n\n      const shadowRoot = Util.findShadowRoot(this.element)\n      const isInTheDom = $.contains(\n        shadowRoot !== null ? shadowRoot : this.element.ownerDocument.documentElement,\n        this.element\n      )\n\n      if (showEvent.isDefaultPrevented() || !isInTheDom) {\n        return\n      }\n\n      const tip   = this.getTipElement()\n      const tipId = Util.getUID(this.constructor.NAME)\n\n      tip.setAttribute('id', tipId)\n      this.element.setAttribute('aria-describedby', tipId)\n\n      this.setContent()\n\n      if (this.config.animation) {\n        $(tip).addClass(ClassName.FADE)\n      }\n\n      const placement  = typeof this.config.placement === 'function'\n        ? this.config.placement.call(this, tip, this.element)\n        : this.config.placement\n\n      const attachment = this._getAttachment(placement)\n      this.addAttachmentClass(attachment)\n\n      const container = this._getContainer()\n      $(tip).data(this.constructor.DATA_KEY, this)\n\n      if (!$.contains(this.element.ownerDocument.documentElement, this.tip)) {\n        $(tip).appendTo(container)\n      }\n\n      $(this.element).trigger(this.constructor.Event.INSERTED)\n\n      this._popper = new Popper(this.element, tip, this._getPopperConfig(attachment))\n\n      $(tip).addClass(ClassName.SHOW)\n\n      // If this is a touch-enabled device we add extra\n      // empty mouseover listeners to the body's immediate children;\n      // only needed because of broken event delegation on iOS\n      // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n      if ('ontouchstart' in document.documentElement) {\n        $(document.body).children().on('mouseover', null, $.noop)\n      }\n\n      const complete = () => {\n        if (this.config.animation) {\n          this._fixTransition()\n        }\n        const prevHoverState = this._hoverState\n        this._hoverState     = null\n\n        $(this.element).trigger(this.constructor.Event.SHOWN)\n\n        if (prevHoverState === HoverState.OUT) {\n          this._leave(null, this)\n        }\n      }\n\n      if ($(this.tip).hasClass(ClassName.FADE)) {\n        const transitionDuration = Util.getTransitionDurationFromElement(this.tip)\n\n        $(this.tip)\n          .one(Util.TRANSITION_END, complete)\n          .emulateTransitionEnd(transitionDuration)\n      } else {\n        complete()\n      }\n    }\n  }\n\n  hide(callback) {\n    const tip       = this.getTipElement()\n    const hideEvent = $.Event(this.constructor.Event.HIDE)\n    const complete = () => {\n      if (this._hoverState !== HoverState.SHOW && tip.parentNode) {\n        tip.parentNode.removeChild(tip)\n      }\n\n      this._cleanTipClass()\n      this.element.removeAttribute('aria-describedby')\n      $(this.element).trigger(this.constructor.Event.HIDDEN)\n      if (this._popper !== null) {\n        this._popper.destroy()\n      }\n\n      if (callback) {\n        callback()\n      }\n    }\n\n    $(this.element).trigger(hideEvent)\n\n    if (hideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    $(tip).removeClass(ClassName.SHOW)\n\n    // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n    if ('ontouchstart' in document.documentElement) {\n      $(document.body).children().off('mouseover', null, $.noop)\n    }\n\n    this._activeTrigger[Trigger.CLICK] = false\n    this._activeTrigger[Trigger.FOCUS] = false\n    this._activeTrigger[Trigger.HOVER] = false\n\n    if ($(this.tip).hasClass(ClassName.FADE)) {\n      const transitionDuration = Util.getTransitionDurationFromElement(tip)\n\n      $(tip)\n        .one(Util.TRANSITION_END, complete)\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      complete()\n    }\n\n    this._hoverState = ''\n  }\n\n  update() {\n    if (this._popper !== null) {\n      this._popper.scheduleUpdate()\n    }\n  }\n\n  // Protected\n\n  isWithContent() {\n    return Boolean(this.getTitle())\n  }\n\n  addAttachmentClass(attachment) {\n    $(this.getTipElement()).addClass(`${CLASS_PREFIX}-${attachment}`)\n  }\n\n  getTipElement() {\n    this.tip = this.tip || $(this.config.template)[0]\n    return this.tip\n  }\n\n  setContent() {\n    const tip = this.getTipElement()\n    this.setElementContent($(tip.querySelectorAll(Selector.TOOLTIP_INNER)), this.getTitle())\n    $(tip).removeClass(`${ClassName.FADE} ${ClassName.SHOW}`)\n  }\n\n  setElementContent($element, content) {\n    if (typeof content === 'object' && (content.nodeType || content.jquery)) {\n      // Content is a DOM node or a jQuery\n      if (this.config.html) {\n        if (!$(content).parent().is($element)) {\n          $element.empty().append(content)\n        }\n      } else {\n        $element.text($(content).text())\n      }\n\n      return\n    }\n\n    if (this.config.html) {\n      if (this.config.sanitize) {\n        content = sanitizeHtml(content, this.config.whiteList, this.config.sanitizeFn)\n      }\n\n      $element.html(content)\n    } else {\n      $element.text(content)\n    }\n  }\n\n  getTitle() {\n    let title = this.element.getAttribute('data-original-title')\n\n    if (!title) {\n      title = typeof this.config.title === 'function'\n        ? this.config.title.call(this.element)\n        : this.config.title\n    }\n\n    return title\n  }\n\n  // Private\n\n  _getPopperConfig(attachment) {\n    const defaultBsConfig = {\n      placement: attachment,\n      modifiers: {\n        offset: this._getOffset(),\n        flip: {\n          behavior: this.config.fallbackPlacement\n        },\n        arrow: {\n          element: Selector.ARROW\n        },\n        preventOverflow: {\n          boundariesElement: this.config.boundary\n        }\n      },\n      onCreate: (data) => {\n        if (data.originalPlacement !== data.placement) {\n          this._handlePopperPlacementChange(data)\n        }\n      },\n      onUpdate: (data) => this._handlePopperPlacementChange(data)\n    }\n\n    return {\n      ...defaultBsConfig,\n      ...this.config.popperConfig\n    }\n  }\n\n  _getOffset() {\n    const offset = {}\n\n    if (typeof this.config.offset === 'function') {\n      offset.fn = (data) => {\n        data.offsets = {\n          ...data.offsets,\n          ...this.config.offset(data.offsets, this.element) || {}\n        }\n\n        return data\n      }\n    } else {\n      offset.offset = this.config.offset\n    }\n\n    return offset\n  }\n\n  _getContainer() {\n    if (this.config.container === false) {\n      return document.body\n    }\n\n    if (Util.isElement(this.config.container)) {\n      return $(this.config.container)\n    }\n\n    return $(document).find(this.config.container)\n  }\n\n  _getAttachment(placement) {\n    return AttachmentMap[placement.toUpperCase()]\n  }\n\n  _setListeners() {\n    const triggers = this.config.trigger.split(' ')\n\n    triggers.forEach((trigger) => {\n      if (trigger === 'click') {\n        $(this.element).on(\n          this.constructor.Event.CLICK,\n          this.config.selector,\n          (event) => this.toggle(event)\n        )\n      } else if (trigger !== Trigger.MANUAL) {\n        const eventIn = trigger === Trigger.HOVER\n          ? this.constructor.Event.MOUSEENTER\n          : this.constructor.Event.FOCUSIN\n        const eventOut = trigger === Trigger.HOVER\n          ? this.constructor.Event.MOUSELEAVE\n          : this.constructor.Event.FOCUSOUT\n\n        $(this.element)\n          .on(\n            eventIn,\n            this.config.selector,\n            (event) => this._enter(event)\n          )\n          .on(\n            eventOut,\n            this.config.selector,\n            (event) => this._leave(event)\n          )\n      }\n    })\n\n    this._hideModalHandler = () => {\n      if (this.element) {\n        this.hide()\n      }\n    }\n\n    $(this.element).closest('.modal').on(\n      'hide.bs.modal',\n      this._hideModalHandler\n    )\n\n    if (this.config.selector) {\n      this.config = {\n        ...this.config,\n        trigger: 'manual',\n        selector: ''\n      }\n    } else {\n      this._fixTitle()\n    }\n  }\n\n  _fixTitle() {\n    const titleType = typeof this.element.getAttribute('data-original-title')\n\n    if (this.element.getAttribute('title') || titleType !== 'string') {\n      this.element.setAttribute(\n        'data-original-title',\n        this.element.getAttribute('title') || ''\n      )\n\n      this.element.setAttribute('title', '')\n    }\n  }\n\n  _enter(event, context) {\n    const dataKey = this.constructor.DATA_KEY\n    context = context || $(event.currentTarget).data(dataKey)\n\n    if (!context) {\n      context = new this.constructor(\n        event.currentTarget,\n        this._getDelegateConfig()\n      )\n      $(event.currentTarget).data(dataKey, context)\n    }\n\n    if (event) {\n      context._activeTrigger[\n        event.type === 'focusin' ? Trigger.FOCUS : Trigger.HOVER\n      ] = true\n    }\n\n    if ($(context.getTipElement()).hasClass(ClassName.SHOW) || context._hoverState === HoverState.SHOW) {\n      context._hoverState = HoverState.SHOW\n      return\n    }\n\n    clearTimeout(context._timeout)\n\n    context._hoverState = HoverState.SHOW\n\n    if (!context.config.delay || !context.config.delay.show) {\n      context.show()\n      return\n    }\n\n    context._timeout = setTimeout(() => {\n      if (context._hoverState === HoverState.SHOW) {\n        context.show()\n      }\n    }, context.config.delay.show)\n  }\n\n  _leave(event, context) {\n    const dataKey = this.constructor.DATA_KEY\n    context = context || $(event.currentTarget).data(dataKey)\n\n    if (!context) {\n      context = new this.constructor(\n        event.currentTarget,\n        this._getDelegateConfig()\n      )\n      $(event.currentTarget).data(dataKey, context)\n    }\n\n    if (event) {\n      context._activeTrigger[\n        event.type === 'focusout' ? Trigger.FOCUS : Trigger.HOVER\n      ] = false\n    }\n\n    if (context._isWithActiveTrigger()) {\n      return\n    }\n\n    clearTimeout(context._timeout)\n\n    context._hoverState = HoverState.OUT\n\n    if (!context.config.delay || !context.config.delay.hide) {\n      context.hide()\n      return\n    }\n\n    context._timeout = setTimeout(() => {\n      if (context._hoverState === HoverState.OUT) {\n        context.hide()\n      }\n    }, context.config.delay.hide)\n  }\n\n  _isWithActiveTrigger() {\n    for (const trigger in this._activeTrigger) {\n      if (this._activeTrigger[trigger]) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  _getConfig(config) {\n    const dataAttributes = $(this.element).data()\n\n    Object.keys(dataAttributes)\n      .forEach((dataAttr) => {\n        if (DISALLOWED_ATTRIBUTES.indexOf(dataAttr) !== -1) {\n          delete dataAttributes[dataAttr]\n        }\n      })\n\n    config = {\n      ...this.constructor.Default,\n      ...dataAttributes,\n      ...typeof config === 'object' && config ? config : {}\n    }\n\n    if (typeof config.delay === 'number') {\n      config.delay = {\n        show: config.delay,\n        hide: config.delay\n      }\n    }\n\n    if (typeof config.title === 'number') {\n      config.title = config.title.toString()\n    }\n\n    if (typeof config.content === 'number') {\n      config.content = config.content.toString()\n    }\n\n    Util.typeCheckConfig(\n      NAME,\n      config,\n      this.constructor.DefaultType\n    )\n\n    if (config.sanitize) {\n      config.template = sanitizeHtml(config.template, config.whiteList, config.sanitizeFn)\n    }\n\n    return config\n  }\n\n  _getDelegateConfig() {\n    const config = {}\n\n    if (this.config) {\n      for (const key in this.config) {\n        if (this.constructor.Default[key] !== this.config[key]) {\n          config[key] = this.config[key]\n        }\n      }\n    }\n\n    return config\n  }\n\n  _cleanTipClass() {\n    const $tip = $(this.getTipElement())\n    const tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX)\n    if (tabClass !== null && tabClass.length) {\n      $tip.removeClass(tabClass.join(''))\n    }\n  }\n\n  _handlePopperPlacementChange(popperData) {\n    const popperInstance = popperData.instance\n    this.tip = popperInstance.popper\n    this._cleanTipClass()\n    this.addAttachmentClass(this._getAttachment(popperData.placement))\n  }\n\n  _fixTransition() {\n    const tip = this.getTipElement()\n    const initConfigAnimation = this.config.animation\n\n    if (tip.getAttribute('x-placement') !== null) {\n      return\n    }\n\n    $(tip).removeClass(ClassName.FADE)\n    this.config.animation = false\n    this.hide()\n    this.show()\n    this.config.animation = initConfigAnimation\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = typeof config === 'object' && config\n\n      if (!data && /dispose|hide/.test(config)) {\n        return\n      }\n\n      if (!data) {\n        data = new Tooltip(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Tooltip._jQueryInterface\n$.fn[NAME].Constructor = Tooltip\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Tooltip._jQueryInterface\n}\n\nexport default Tooltip\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): popover.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Tooltip from './tooltip'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'popover'\nconst VERSION             = '4.4.1'\nconst DATA_KEY            = 'bs.popover'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\nconst CLASS_PREFIX        = 'bs-popover'\nconst BSCLS_PREFIX_REGEX  = new RegExp(`(^|\\\\s)${CLASS_PREFIX}\\\\S+`, 'g')\n\nconst Default = {\n  ...Tooltip.Default,\n  placement : 'right',\n  trigger   : 'click',\n  content   : '',\n  template  : '<div class=\"popover\" role=\"tooltip\">' +\n              '<div class=\"arrow\"></div>' +\n              '<h3 class=\"popover-header\"></h3>' +\n              '<div class=\"popover-body\"></div></div>'\n}\n\nconst DefaultType = {\n  ...Tooltip.DefaultType,\n  content : '(string|element|function)'\n}\n\nconst ClassName = {\n  FADE : 'fade',\n  SHOW : 'show'\n}\n\nconst Selector = {\n  TITLE   : '.popover-header',\n  CONTENT : '.popover-body'\n}\n\nconst Event = {\n  HIDE       : `hide${EVENT_KEY}`,\n  HIDDEN     : `hidden${EVENT_KEY}`,\n  SHOW       : `show${EVENT_KEY}`,\n  SHOWN      : `shown${EVENT_KEY}`,\n  INSERTED   : `inserted${EVENT_KEY}`,\n  CLICK      : `click${EVENT_KEY}`,\n  FOCUSIN    : `focusin${EVENT_KEY}`,\n  FOCUSOUT   : `focusout${EVENT_KEY}`,\n  MOUSEENTER : `mouseenter${EVENT_KEY}`,\n  MOUSELEAVE : `mouseleave${EVENT_KEY}`\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Popover extends Tooltip {\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get Event() {\n    return Event\n  }\n\n  static get EVENT_KEY() {\n    return EVENT_KEY\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  // Overrides\n\n  isWithContent() {\n    return this.getTitle() || this._getContent()\n  }\n\n  addAttachmentClass(attachment) {\n    $(this.getTipElement()).addClass(`${CLASS_PREFIX}-${attachment}`)\n  }\n\n  getTipElement() {\n    this.tip = this.tip || $(this.config.template)[0]\n    return this.tip\n  }\n\n  setContent() {\n    const $tip = $(this.getTipElement())\n\n    // We use append for html objects to maintain js events\n    this.setElementContent($tip.find(Selector.TITLE), this.getTitle())\n    let content = this._getContent()\n    if (typeof content === 'function') {\n      content = content.call(this.element)\n    }\n    this.setElementContent($tip.find(Selector.CONTENT), content)\n\n    $tip.removeClass(`${ClassName.FADE} ${ClassName.SHOW}`)\n  }\n\n  // Private\n\n  _getContent() {\n    return this.element.getAttribute('data-content') ||\n      this.config.content\n  }\n\n  _cleanTipClass() {\n    const $tip = $(this.getTipElement())\n    const tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX)\n    if (tabClass !== null && tabClass.length > 0) {\n      $tip.removeClass(tabClass.join(''))\n    }\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = typeof config === 'object' ? config : null\n\n      if (!data && /dispose|hide/.test(config)) {\n        return\n      }\n\n      if (!data) {\n        data = new Popover(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Popover._jQueryInterface\n$.fn[NAME].Constructor = Popover\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Popover._jQueryInterface\n}\n\nexport default Popover\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): scrollspy.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'scrollspy'\nconst VERSION            = '4.4.1'\nconst DATA_KEY           = 'bs.scrollspy'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst DATA_API_KEY       = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst Default = {\n  offset : 10,\n  method : 'auto',\n  target : ''\n}\n\nconst DefaultType = {\n  offset : 'number',\n  method : 'string',\n  target : '(string|element)'\n}\n\nconst Event = {\n  ACTIVATE      : `activate${EVENT_KEY}`,\n  SCROLL        : `scroll${EVENT_KEY}`,\n  LOAD_DATA_API : `load${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  DROPDOWN_ITEM : 'dropdown-item',\n  DROPDOWN_MENU : 'dropdown-menu',\n  ACTIVE        : 'active'\n}\n\nconst Selector = {\n  DATA_SPY        : '[data-spy=\"scroll\"]',\n  ACTIVE          : '.active',\n  NAV_LIST_GROUP  : '.nav, .list-group',\n  NAV_LINKS       : '.nav-link',\n  NAV_ITEMS       : '.nav-item',\n  LIST_ITEMS      : '.list-group-item',\n  DROPDOWN        : '.dropdown',\n  DROPDOWN_ITEMS  : '.dropdown-item',\n  DROPDOWN_TOGGLE : '.dropdown-toggle'\n}\n\nconst OffsetMethod = {\n  OFFSET   : 'offset',\n  POSITION : 'position'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ScrollSpy {\n  constructor(element, config) {\n    this._element       = element\n    this._scrollElement = element.tagName === 'BODY' ? window : element\n    this._config        = this._getConfig(config)\n    this._selector      = `${this._config.target} ${Selector.NAV_LINKS},` +\n                          `${this._config.target} ${Selector.LIST_ITEMS},` +\n                          `${this._config.target} ${Selector.DROPDOWN_ITEMS}`\n    this._offsets       = []\n    this._targets       = []\n    this._activeTarget  = null\n    this._scrollHeight  = 0\n\n    $(this._scrollElement).on(Event.SCROLL, (event) => this._process(event))\n\n    this.refresh()\n    this._process()\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  // Public\n\n  refresh() {\n    const autoMethod = this._scrollElement === this._scrollElement.window\n      ? OffsetMethod.OFFSET : OffsetMethod.POSITION\n\n    const offsetMethod = this._config.method === 'auto'\n      ? autoMethod : this._config.method\n\n    const offsetBase = offsetMethod === OffsetMethod.POSITION\n      ? this._getScrollTop() : 0\n\n    this._offsets = []\n    this._targets = []\n\n    this._scrollHeight = this._getScrollHeight()\n\n    const targets = [].slice.call(document.querySelectorAll(this._selector))\n\n    targets\n      .map((element) => {\n        let target\n        const targetSelector = Util.getSelectorFromElement(element)\n\n        if (targetSelector) {\n          target = document.querySelector(targetSelector)\n        }\n\n        if (target) {\n          const targetBCR = target.getBoundingClientRect()\n          if (targetBCR.width || targetBCR.height) {\n            // TODO (fat): remove sketch reliance on jQuery position/offset\n            return [\n              $(target)[offsetMethod]().top + offsetBase,\n              targetSelector\n            ]\n          }\n        }\n        return null\n      })\n      .filter((item) => item)\n      .sort((a, b) => a[0] - b[0])\n      .forEach((item) => {\n        this._offsets.push(item[0])\n        this._targets.push(item[1])\n      })\n  }\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    $(this._scrollElement).off(EVENT_KEY)\n\n    this._element       = null\n    this._scrollElement = null\n    this._config        = null\n    this._selector      = null\n    this._offsets       = null\n    this._targets       = null\n    this._activeTarget  = null\n    this._scrollHeight  = null\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...typeof config === 'object' && config ? config : {}\n    }\n\n    if (typeof config.target !== 'string') {\n      let id = $(config.target).attr('id')\n      if (!id) {\n        id = Util.getUID(NAME)\n        $(config.target).attr('id', id)\n      }\n      config.target = `#${id}`\n    }\n\n    Util.typeCheckConfig(NAME, config, DefaultType)\n\n    return config\n  }\n\n  _getScrollTop() {\n    return this._scrollElement === window\n      ? this._scrollElement.pageYOffset : this._scrollElement.scrollTop\n  }\n\n  _getScrollHeight() {\n    return this._scrollElement.scrollHeight || Math.max(\n      document.body.scrollHeight,\n      document.documentElement.scrollHeight\n    )\n  }\n\n  _getOffsetHeight() {\n    return this._scrollElement === window\n      ? window.innerHeight : this._scrollElement.getBoundingClientRect().height\n  }\n\n  _process() {\n    const scrollTop    = this._getScrollTop() + this._config.offset\n    const scrollHeight = this._getScrollHeight()\n    const maxScroll    = this._config.offset +\n      scrollHeight -\n      this._getOffsetHeight()\n\n    if (this._scrollHeight !== scrollHeight) {\n      this.refresh()\n    }\n\n    if (scrollTop >= maxScroll) {\n      const target = this._targets[this._targets.length - 1]\n\n      if (this._activeTarget !== target) {\n        this._activate(target)\n      }\n      return\n    }\n\n    if (this._activeTarget && scrollTop < this._offsets[0] && this._offsets[0] > 0) {\n      this._activeTarget = null\n      this._clear()\n      return\n    }\n\n    const offsetLength = this._offsets.length\n    for (let i = offsetLength; i--;) {\n      const isActiveTarget = this._activeTarget !== this._targets[i] &&\n          scrollTop >= this._offsets[i] &&\n          (typeof this._offsets[i + 1] === 'undefined' ||\n              scrollTop < this._offsets[i + 1])\n\n      if (isActiveTarget) {\n        this._activate(this._targets[i])\n      }\n    }\n  }\n\n  _activate(target) {\n    this._activeTarget = target\n\n    this._clear()\n\n    const queries = this._selector\n      .split(',')\n      .map((selector) => `${selector}[data-target=\"${target}\"],${selector}[href=\"${target}\"]`)\n\n    const $link = $([].slice.call(document.querySelectorAll(queries.join(','))))\n\n    if ($link.hasClass(ClassName.DROPDOWN_ITEM)) {\n      $link.closest(Selector.DROPDOWN).find(Selector.DROPDOWN_TOGGLE).addClass(ClassName.ACTIVE)\n      $link.addClass(ClassName.ACTIVE)\n    } else {\n      // Set triggered link as active\n      $link.addClass(ClassName.ACTIVE)\n      // Set triggered links parents as active\n      // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor\n      $link.parents(Selector.NAV_LIST_GROUP).prev(`${Selector.NAV_LINKS}, ${Selector.LIST_ITEMS}`).addClass(ClassName.ACTIVE)\n      // Handle special case when .nav-link is inside .nav-item\n      $link.parents(Selector.NAV_LIST_GROUP).prev(Selector.NAV_ITEMS).children(Selector.NAV_LINKS).addClass(ClassName.ACTIVE)\n    }\n\n    $(this._scrollElement).trigger(Event.ACTIVATE, {\n      relatedTarget: target\n    })\n  }\n\n  _clear() {\n    [].slice.call(document.querySelectorAll(this._selector))\n      .filter((node) => node.classList.contains(ClassName.ACTIVE))\n      .forEach((node) => node.classList.remove(ClassName.ACTIVE))\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = typeof config === 'object' && config\n\n      if (!data) {\n        data = new ScrollSpy(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(window).on(Event.LOAD_DATA_API, () => {\n  const scrollSpys = [].slice.call(document.querySelectorAll(Selector.DATA_SPY))\n  const scrollSpysLength = scrollSpys.length\n\n  for (let i = scrollSpysLength; i--;) {\n    const $spy = $(scrollSpys[i])\n    ScrollSpy._jQueryInterface.call($spy, $spy.data())\n  }\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = ScrollSpy._jQueryInterface\n$.fn[NAME].Constructor = ScrollSpy\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return ScrollSpy._jQueryInterface\n}\n\nexport default ScrollSpy\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): tab.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'tab'\nconst VERSION            = '4.4.1'\nconst DATA_KEY           = 'bs.tab'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst DATA_API_KEY       = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst Event = {\n  HIDE           : `hide${EVENT_KEY}`,\n  HIDDEN         : `hidden${EVENT_KEY}`,\n  SHOW           : `show${EVENT_KEY}`,\n  SHOWN          : `shown${EVENT_KEY}`,\n  CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  DROPDOWN_MENU : 'dropdown-menu',\n  ACTIVE        : 'active',\n  DISABLED      : 'disabled',\n  FADE          : 'fade',\n  SHOW          : 'show'\n}\n\nconst Selector = {\n  DROPDOWN              : '.dropdown',\n  NAV_LIST_GROUP        : '.nav, .list-group',\n  ACTIVE                : '.active',\n  ACTIVE_UL             : '> li > .active',\n  DATA_TOGGLE           : '[data-toggle=\"tab\"], [data-toggle=\"pill\"], [data-toggle=\"list\"]',\n  DROPDOWN_TOGGLE       : '.dropdown-toggle',\n  DROPDOWN_ACTIVE_CHILD : '> .dropdown-menu .active'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Tab {\n  constructor(element) {\n    this._element = element\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n\n  show() {\n    if (this._element.parentNode &&\n        this._element.parentNode.nodeType === Node.ELEMENT_NODE &&\n        $(this._element).hasClass(ClassName.ACTIVE) ||\n        $(this._element).hasClass(ClassName.DISABLED)) {\n      return\n    }\n\n    let target\n    let previous\n    const listElement = $(this._element).closest(Selector.NAV_LIST_GROUP)[0]\n    const selector = Util.getSelectorFromElement(this._element)\n\n    if (listElement) {\n      const itemSelector = listElement.nodeName === 'UL' || listElement.nodeName === 'OL' ? Selector.ACTIVE_UL : Selector.ACTIVE\n      previous = $.makeArray($(listElement).find(itemSelector))\n      previous = previous[previous.length - 1]\n    }\n\n    const hideEvent = $.Event(Event.HIDE, {\n      relatedTarget: this._element\n    })\n\n    const showEvent = $.Event(Event.SHOW, {\n      relatedTarget: previous\n    })\n\n    if (previous) {\n      $(previous).trigger(hideEvent)\n    }\n\n    $(this._element).trigger(showEvent)\n\n    if (showEvent.isDefaultPrevented() ||\n        hideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    if (selector) {\n      target = document.querySelector(selector)\n    }\n\n    this._activate(\n      this._element,\n      listElement\n    )\n\n    const complete = () => {\n      const hiddenEvent = $.Event(Event.HIDDEN, {\n        relatedTarget: this._element\n      })\n\n      const shownEvent = $.Event(Event.SHOWN, {\n        relatedTarget: previous\n      })\n\n      $(previous).trigger(hiddenEvent)\n      $(this._element).trigger(shownEvent)\n    }\n\n    if (target) {\n      this._activate(target, target.parentNode, complete)\n    } else {\n      complete()\n    }\n  }\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    this._element = null\n  }\n\n  // Private\n\n  _activate(element, container, callback) {\n    const activeElements = container && (container.nodeName === 'UL' || container.nodeName === 'OL')\n      ? $(container).find(Selector.ACTIVE_UL)\n      : $(container).children(Selector.ACTIVE)\n\n    const active = activeElements[0]\n    const isTransitioning = callback && (active && $(active).hasClass(ClassName.FADE))\n    const complete = () => this._transitionComplete(\n      element,\n      active,\n      callback\n    )\n\n    if (active && isTransitioning) {\n      const transitionDuration = Util.getTransitionDurationFromElement(active)\n\n      $(active)\n        .removeClass(ClassName.SHOW)\n        .one(Util.TRANSITION_END, complete)\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      complete()\n    }\n  }\n\n  _transitionComplete(element, active, callback) {\n    if (active) {\n      $(active).removeClass(ClassName.ACTIVE)\n\n      const dropdownChild = $(active.parentNode).find(\n        Selector.DROPDOWN_ACTIVE_CHILD\n      )[0]\n\n      if (dropdownChild) {\n        $(dropdownChild).removeClass(ClassName.ACTIVE)\n      }\n\n      if (active.getAttribute('role') === 'tab') {\n        active.setAttribute('aria-selected', false)\n      }\n    }\n\n    $(element).addClass(ClassName.ACTIVE)\n    if (element.getAttribute('role') === 'tab') {\n      element.setAttribute('aria-selected', true)\n    }\n\n    Util.reflow(element)\n\n    if (element.classList.contains(ClassName.FADE)) {\n      element.classList.add(ClassName.SHOW)\n    }\n\n    if (element.parentNode && $(element.parentNode).hasClass(ClassName.DROPDOWN_MENU)) {\n      const dropdownElement = $(element).closest(Selector.DROPDOWN)[0]\n\n      if (dropdownElement) {\n        const dropdownToggleList = [].slice.call(dropdownElement.querySelectorAll(Selector.DROPDOWN_TOGGLE))\n\n        $(dropdownToggleList).addClass(ClassName.ACTIVE)\n      }\n\n      element.setAttribute('aria-expanded', true)\n    }\n\n    if (callback) {\n      callback()\n    }\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      const $this = $(this)\n      let data = $this.data(DATA_KEY)\n\n      if (!data) {\n        data = new Tab(this)\n        $this.data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE, function (event) {\n    event.preventDefault()\n    Tab._jQueryInterface.call($(this), 'show')\n  })\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Tab._jQueryInterface\n$.fn[NAME].Constructor = Tab\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Tab._jQueryInterface\n}\n\nexport default Tab\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): toast.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'toast'\nconst VERSION            = '4.4.1'\nconst DATA_KEY           = 'bs.toast'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst Event = {\n  CLICK_DISMISS : `click.dismiss${EVENT_KEY}`,\n  HIDE          : `hide${EVENT_KEY}`,\n  HIDDEN        : `hidden${EVENT_KEY}`,\n  SHOW          : `show${EVENT_KEY}`,\n  SHOWN         : `shown${EVENT_KEY}`\n}\n\nconst ClassName = {\n  FADE    : 'fade',\n  HIDE    : 'hide',\n  SHOW    : 'show',\n  SHOWING : 'showing'\n}\n\nconst DefaultType = {\n  animation : 'boolean',\n  autohide  : 'boolean',\n  delay     : 'number'\n}\n\nconst Default = {\n  animation : true,\n  autohide  : true,\n  delay     : 500\n}\n\nconst Selector = {\n  DATA_DISMISS : '[data-dismiss=\"toast\"]'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Toast {\n  constructor(element, config) {\n    this._element = element\n    this._config  = this._getConfig(config)\n    this._timeout = null\n    this._setListeners()\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  // Public\n\n  show() {\n    const showEvent = $.Event(Event.SHOW)\n\n    $(this._element).trigger(showEvent)\n    if (showEvent.isDefaultPrevented()) {\n      return\n    }\n\n    if (this._config.animation) {\n      this._element.classList.add(ClassName.FADE)\n    }\n\n    const complete = () => {\n      this._element.classList.remove(ClassName.SHOWING)\n      this._element.classList.add(ClassName.SHOW)\n\n      $(this._element).trigger(Event.SHOWN)\n\n      if (this._config.autohide) {\n        this._timeout = setTimeout(() => {\n          this.hide()\n        }, this._config.delay)\n      }\n    }\n\n    this._element.classList.remove(ClassName.HIDE)\n    Util.reflow(this._element)\n    this._element.classList.add(ClassName.SHOWING)\n    if (this._config.animation) {\n      const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n      $(this._element)\n        .one(Util.TRANSITION_END, complete)\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      complete()\n    }\n  }\n\n  hide() {\n    if (!this._element.classList.contains(ClassName.SHOW)) {\n      return\n    }\n\n    const hideEvent = $.Event(Event.HIDE)\n\n    $(this._element).trigger(hideEvent)\n    if (hideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._close()\n  }\n\n  dispose() {\n    clearTimeout(this._timeout)\n    this._timeout = null\n\n    if (this._element.classList.contains(ClassName.SHOW)) {\n      this._element.classList.remove(ClassName.SHOW)\n    }\n\n    $(this._element).off(Event.CLICK_DISMISS)\n\n    $.removeData(this._element, DATA_KEY)\n    this._element = null\n    this._config  = null\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...$(this._element).data(),\n      ...typeof config === 'object' && config ? config : {}\n    }\n\n    Util.typeCheckConfig(\n      NAME,\n      config,\n      this.constructor.DefaultType\n    )\n\n    return config\n  }\n\n  _setListeners() {\n    $(this._element).on(\n      Event.CLICK_DISMISS,\n      Selector.DATA_DISMISS,\n      () => this.hide()\n    )\n  }\n\n  _close() {\n    const complete = () => {\n      this._element.classList.add(ClassName.HIDE)\n      $(this._element).trigger(Event.HIDDEN)\n    }\n\n    this._element.classList.remove(ClassName.SHOW)\n    if (this._config.animation) {\n      const transitionDuration = Util.getTransitionDurationFromElement(this._element)\n\n      $(this._element)\n        .one(Util.TRANSITION_END, complete)\n        .emulateTransitionEnd(transitionDuration)\n    } else {\n      complete()\n    }\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      const $element = $(this)\n      let data       = $element.data(DATA_KEY)\n      const _config  = typeof config === 'object' && config\n\n      if (!data) {\n        data = new Toast(this, _config)\n        $element.data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config](this)\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME]             = Toast._jQueryInterface\n$.fn[NAME].Constructor = Toast\n$.fn[NAME].noConflict  = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Toast._jQueryInterface\n}\n\nexport default Toast\n"]}]}